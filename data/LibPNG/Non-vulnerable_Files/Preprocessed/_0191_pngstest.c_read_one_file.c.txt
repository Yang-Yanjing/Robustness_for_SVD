func	1:0	56:0	0	static int	read_one_file
params	2:13	0:0	1	
param	2:14	2:26	2	Image *	image
stmnts	4:3	55:50	1	
if	4:3	54:3	2	(! ( image -> opts & READ_FILE ) || ( image -> opts & USE_STDIO ))
cond	4:7	4:61	3	! ( image -> opts & READ_FILE ) || ( image -> opts & USE_STDIO )
op	4:7	0:0	4	!
water	4:8	0:0	4	(
water	4:9	0:0	4	image
op	4:14	0:0	4	->
water	4:16	0:0	4	opts
op	4:21	0:0	4	&
water	4:23	0:0	4	READ_FILE
water	4:32	0:0	4	)
op	4:34	0:0	4	||
water	4:37	0:0	4	(
water	4:38	0:0	4	image
op	4:43	0:0	4	->
water	4:45	0:0	4	opts
op	4:50	0:0	4	&
water	4:52	0:0	4	USE_STDIO
water	4:61	0:0	4	)
stmts	5:3	54:3	3	
water	5:3	0:0	4	{
decl	7:6	7:45	4	FILE	*f
op	7:14	0:0	4	=
call	7:16	7:44	5	fopen
arg	7:22	7:38	6	image->file_name
water	7:22	0:0	7	image
op	7:27	0:0	7	->
water	7:29	0:0	7	file_name
arg	7:40	7:44	6	"rb"
water	7:40	0:0	7	"rb"
if	8:6	50:6	4	(f != NULL)
cond	8:10	8:15	5	f != NULL
water	8:10	0:0	6	f
op	8:12	0:0	6	!=
water	8:15	0:0	6	NULL
stmts	9:6	50:6	5	
water	9:6	0:0	6	{
if	10:9	11:33	6	(image -> opts & READ_FILE)
cond	10:13	10:27	7	image -> opts & READ_FILE
water	10:13	0:0	8	image
op	10:18	0:0	8	->
water	10:20	0:0	8	opts
op	10:25	0:0	8	&
water	10:27	0:0	8	READ_FILE
stmts	11:12	11:33	7	
water	11:12	0:0	8	image
op	11:17	0:0	8	->
water	11:19	0:0	8	input_file
op	11:30	0:0	8	=
water	11:32	0:0	8	f
water	11:33	0:0	8	;
else	12:9	49:9	6
stmts	13:9	49:9	7	
water	13:9	0:0	8	{
if	14:12	46:12	8	(fseek (f ,0 ,SEEK_END ) == 0)
cond	14:16	14:41	9	fseek (f ,0 ,SEEK_END ) == 0
call	14:16	14:36	10	fseek
arg	14:22	14:23	11	f
water	14:22	0:0	12	f
arg	14:25	14:26	11	0
water	14:25	0:0	12	0
arg	14:28	14:36	11	SEEK_END
water	14:28	0:0	12	SEEK_END
op	14:38	0:0	10	==
water	14:41	0:0	10	0
stmts	15:12	46:12	9	
water	15:12	0:0	10	{
water	16:15	0:0	10	long
water	16:20	0:0	10	int
water	16:24	0:0	10	cb
op	16:27	0:0	10	=
call	16:29	16:36	10	ftell
arg	16:35	16:36	11	f
water	16:35	0:0	12	f
water	16:37	0:0	10	;
if	17:15	39:15	10	(cb > 0 && ( unsigned long int ) cb < ( size_t ) ~ ( size_t ) 0)
cond	17:19	17:70	11	cb > 0 && ( unsigned long int ) cb < ( size_t ) ~ ( size_t ) 0
water	17:19	0:0	12	cb
op	17:22	0:0	12	>
water	17:24	0:0	12	0
op	17:26	0:0	12	&&
water	17:29	0:0	12	(
water	17:30	0:0	12	unsigned
water	17:39	0:0	12	long
water	17:44	0:0	12	int
water	17:47	0:0	12	)
water	17:48	0:0	12	cb
op	17:51	0:0	12	<
water	17:53	0:0	12	(
water	17:54	0:0	12	size_t
water	17:60	0:0	12	)
op	17:61	0:0	12	~
water	17:62	0:0	12	(
water	17:63	0:0	12	size_t
water	17:69	0:0	12	)
water	17:70	0:0	12	0
stmts	18:15	39:15	11	
water	18:15	0:0	12	{
decl	19:18	19:71	12	png_bytep	b
op	19:30	0:0	12	=
call	19:32	19:70	13	voidcast
arg	19:41	19:50	14	png_bytep
water	19:41	0:0	15	png_bytep
arg	19:52	19:70	14	malloc((size_t)cb)
call	19:52	19:69	15	malloc
arg	19:59	19:69	16	(size_t)cb
water	19:59	0:0	17	(
water	19:60	0:0	17	size_t
water	19:66	0:0	17	)
water	19:67	0:0	17	cb
if	20:18	35:18	12	(b != NULL)
cond	20:22	20:27	13	b != NULL
water	20:22	0:0	14	b
op	20:24	0:0	14	!=
water	20:27	0:0	14	NULL
stmts	21:18	35:18	13	
water	21:18	0:0	14	{
call	22:21	22:29	14	rewind
arg	22:28	22:29	15	f
water	22:28	0:0	16	f
water	22:30	0:0	14	;
if	23:21	28:21	14	(fread (b ,( size_t ) cb ,1 ,f ) == 1)
cond	23:25	23:55	15	fread (b ,( size_t ) cb ,1 ,f ) == 1
call	23:25	23:50	16	fread
arg	23:31	23:32	17	b
water	23:31	0:0	18	b
arg	23:34	23:44	17	(size_t)cb
water	23:34	0:0	18	(
water	23:35	0:0	18	size_t
water	23:41	0:0	18	)
water	23:42	0:0	18	cb
arg	23:46	23:47	17	1
water	23:46	0:0	18	1
arg	23:49	23:50	17	f
water	23:49	0:0	18	f
op	23:52	0:0	16	==
water	23:55	0:0	16	1
stmts	24:21	28:21	15	
water	24:21	0:0	16	{
call	25:24	25:32	16	fclose
arg	25:31	25:32	17	f
water	25:31	0:0	18	f
water	25:33	0:0	16	;
water	26:24	0:0	16	image
op	26:29	0:0	16	->
water	26:31	0:0	16	input_memory_size
op	26:49	0:0	16	=
water	26:51	0:0	16	cb
water	26:53	0:0	16	;
water	27:24	0:0	16	image
op	27:29	0:0	16	->
water	27:31	0:0	16	input_memory
op	27:44	0:0	16	=
water	27:46	0:0	16	b
water	27:47	0:0	16	;
water	28:21	0:0	16	}
else	29:21	34:21	14
stmts	30:21	34:21	15	
water	30:21	0:0	16	{
call	31:24	31:30	16	free
arg	31:29	31:30	17	b
water	31:29	0:0	18	b
water	31:31	0:0	16	;
return	32:24	33:45	16	logclose(image,f,image->file_name,": read failed: ")
call	32:31	33:44	17	logclose
arg	32:40	32:45	18	image
water	32:40	0:0	19	image
arg	32:47	32:48	18	f
water	32:47	0:0	19	f
arg	32:50	32:66	18	image->file_name
water	32:50	0:0	19	image
op	32:55	0:0	19	->
water	32:57	0:0	19	file_name
arg	33:27	33:44	18	": read failed: "
water	33:27	0:0	19	": read failed: "
water	34:21	0:0	16	}
water	35:18	0:0	14	}
else	36:18	38:44	12
stmts	37:21	38:44	13	
return	37:21	38:44	14	logclose(image,f,image->file_name,": out of memory: ")
call	37:28	38:43	15	logclose
arg	37:37	37:42	16	image
water	37:37	0:0	17	image
arg	37:44	37:45	16	f
water	37:44	0:0	17	f
arg	37:47	37:63	16	image->file_name
water	37:47	0:0	17	image
op	37:52	0:0	17	->
water	37:54	0:0	17	file_name
arg	38:24	38:43	16	": out of memory: "
water	38:24	0:0	17	": out of memory: "
water	39:15	0:0	12	}
else	40:15	42:39	10
stmts	40:20	42:39	11	
if	40:20	42:39	12	(cb == 0)
cond	40:24	40:30	13	cb == 0
water	40:24	0:0	14	cb
op	40:27	0:0	14	==
water	40:30	0:0	14	0
stmts	41:18	42:39	13	
return	41:18	42:39	14	logclose(image,f,image->file_name,": zero length: ")
call	41:25	42:38	15	logclose
arg	41:34	41:39	16	image
water	41:34	0:0	17	image
arg	41:41	41:42	16	f
water	41:41	0:0	17	f
arg	41:44	41:60	16	image->file_name
water	41:44	0:0	17	image
op	41:49	0:0	17	->
water	41:51	0:0	17	file_name
arg	42:21	42:38	16	": zero length: "
water	42:21	0:0	17	": zero length: "
else	43:15	45:39	10
stmts	44:18	45:39	11	
return	44:18	45:39	12	logclose(image,f,image->file_name,": tell failed: ")
call	44:25	45:38	13	logclose
arg	44:34	44:39	14	image
water	44:34	0:0	15	image
arg	44:41	44:42	14	f
water	44:41	0:0	15	f
arg	44:44	44:60	14	image->file_name
water	44:44	0:0	15	image
op	44:49	0:0	15	->
water	44:51	0:0	15	file_name
arg	45:21	45:38	14	": tell failed: "
water	45:21	0:0	15	": tell failed: "
water	46:12	0:0	10	}
else	47:12	48:77	8
stmts	48:15	48:77	9	
return	48:15	48:77	10	logclose(image,f,image->file_name,": seek failed: ")
call	48:22	48:76	11	logclose
arg	48:31	48:36	12	image
water	48:31	0:0	13	image
arg	48:38	48:39	12	f
water	48:38	0:0	13	f
arg	48:41	48:57	12	image->file_name
water	48:41	0:0	13	image
op	48:46	0:0	13	->
water	48:48	0:0	13	file_name
arg	48:59	48:76	12	": seek failed: "
water	48:59	0:0	13	": seek failed: "
water	49:9	0:0	8	}
water	50:6	0:0	6	}
else	51:6	53:28	4
stmts	52:9	53:28	5	
return	52:9	53:28	6	logerror(image,image->file_name,": open failed: ",strerror(errno))
call	52:16	53:27	7	logerror
arg	52:25	52:30	8	image
water	52:25	0:0	9	image
arg	52:32	52:48	8	image->file_name
water	52:32	0:0	9	image
op	52:37	0:0	9	->
water	52:39	0:0	9	file_name
arg	52:50	52:67	8	": open failed: "
water	52:50	0:0	9	": open failed: "
arg	53:12	53:27	8	strerror(errno)
call	53:12	53:26	9	strerror
arg	53:21	53:26	10	errno
water	53:21	0:0	11	errno
water	54:3	0:0	4	}
return	55:3	55:50	2	read_file(image,FORMAT_NO_CHANGE,NULL)
call	55:10	55:49	3	read_file
arg	55:20	55:25	4	image
water	55:20	0:0	5	image
arg	55:27	55:43	4	FORMAT_NO_CHANGE
water	55:27	0:0	5	FORMAT_NO_CHANGE
arg	55:45	55:49	4	NULL
water	55:45	0:0	5	NULL
