func	2:0	75:0	0	BOOL	PngSaveImage
params	2:18	0:0	1	
param	2:19	2:37	2	PTSTR	pstrFileName
param	2:39	2:56	2	png_byte *	pDiData
param	3:19	3:29	2	int	iWidth
param	3:31	3:42	2	int	iHeight
param	3:44	3:62	2	png_color	bkgColor
stmnts	0:0	74:15	1	
decl	5:4	5:38	2	const int	ciBitDepth
op	5:35	0:0	2	=
water	5:37	0:0	2	8
decl	6:4	6:38	2	const int	ciChannels
op	6:35	0:0	2	=
water	6:37	0:0	2	3
water	7:4	0:0	2	static
water	7:11	0:0	2	FILE
op	7:23	0:0	2	*
water	7:24	0:0	2	pfFile
water	7:30	0:0	2	;
decl	8:4	8:34	2	png_uint_32	ulRowBytes
water	9:4	0:0	2	static
water	9:11	0:0	2	png_byte
op	9:22	0:0	2	*
op	9:23	0:0	2	*
water	9:24	0:0	2	ppbRowPointers
op	9:39	0:0	2	=
water	9:41	0:0	2	NULL
water	9:45	0:0	2	;
decl	10:4	10:25	2	int	i
if	12:4	13:20	2	(! pstrFileName)
cond	12:8	12:9	3	! pstrFileName
op	12:8	0:0	4	!
water	12:9	0:0	4	pstrFileName
stmts	13:8	13:20	3	
return	13:8	13:20	4	FALSE
water	13:15	0:0	5	FALSE
if	14:4	15:20	2	(! ( pfFile =fopen (pstrFileName ,"wb" ) ))
cond	14:8	14:44	3	! ( pfFile =fopen (pstrFileName ,"wb" ) )
op	14:8	0:0	4	!
water	14:9	0:0	4	(
water	14:10	0:0	4	pfFile
op	14:17	0:0	4	=
call	14:19	14:43	4	fopen
arg	14:25	14:37	5	pstrFileName
water	14:25	0:0	6	pstrFileName
arg	14:39	14:43	5	"wb"
water	14:39	0:0	6	"wb"
water	14:44	0:0	4	)
stmts	15:8	15:20	3	
return	15:8	15:20	4	FALSE
water	15:15	0:0	5	FALSE
water	17:4	0:0	2	png_ptr
op	17:12	0:0	2	=
call	17:14	18:59	2	png_create_write_struct
arg	17:38	17:62	3	png_get_libpng_ver(NULL)
call	17:38	17:61	4	png_get_libpng_ver
arg	17:57	17:61	5	NULL
water	17:57	0:0	6	NULL
arg	17:64	17:68	3	NULL
water	17:64	0:0	4	NULL
arg	18:6	18:38	3	(png_error_ptr)png_cexcept_error
water	18:6	0:0	4	(
water	18:7	0:0	4	png_error_ptr
water	18:20	0:0	4	)
water	18:21	0:0	4	png_cexcept_error
arg	18:40	18:59	3	(png_error_ptr)NULL
water	18:40	0:0	4	(
water	18:41	0:0	4	png_error_ptr
water	18:54	0:0	4	)
water	18:55	0:0	4	NULL
water	18:60	0:0	2	;
if	19:4	23:4	2	(! png_ptr)
cond	19:8	19:9	3	! png_ptr
op	19:8	0:0	4	!
water	19:9	0:0	4	png_ptr
stmts	20:4	23:4	3	
water	20:4	0:0	4	{
call	21:8	21:21	4	fclose
arg	21:15	21:21	5	pfFile
water	21:15	0:0	6	pfFile
water	21:22	0:0	4	;
return	22:8	22:20	4	FALSE
water	22:15	0:0	5	FALSE
water	23:4	0:0	4	}
water	24:4	0:0	2	info_ptr
op	24:13	0:0	2	=
call	24:15	24:45	2	png_create_info_struct
arg	24:38	24:45	3	png_ptr
water	24:38	0:0	4	png_ptr
water	24:46	0:0	2	;
if	25:4	29:4	2	(! info_ptr)
cond	25:8	25:9	3	! info_ptr
op	25:8	0:0	4	!
water	25:9	0:0	4	info_ptr
stmts	25:19	29:4	3	
water	25:19	0:0	4	{
call	26:8	26:21	4	fclose
arg	26:15	26:21	5	pfFile
water	26:15	0:0	6	pfFile
water	26:22	0:0	4	;
call	27:8	27:60	4	png_destroy_write_struct
arg	27:33	27:41	5	&png_ptr
op	27:33	0:0	6	&
water	27:34	0:0	6	png_ptr
arg	27:43	27:60	5	(png_infopp)NULL
water	27:43	0:0	6	(
water	27:44	0:0	6	png_infopp
water	27:54	0:0	6	)
water	27:56	0:0	6	NULL
water	27:61	0:0	4	;
return	28:8	28:20	4	FALSE
water	28:15	0:0	5	FALSE
water	29:4	0:0	4	}
water	30:4	0:0	2	Try
water	31:4	0:0	2	{
call	34:8	34:35	2	png_init_io
arg	34:20	34:27	3	png_ptr
water	34:20	0:0	4	png_ptr
arg	34:29	34:35	3	pfFile
water	34:29	0:0	4	pfFile
water	34:36	0:0	2	;
call	36:8	36:78	2	png_set_write_fn
arg	36:25	36:32	3	png_ptr
water	36:25	0:0	4	png_ptr
arg	36:34	36:51	3	(png_voidp)pfFile
water	36:34	0:0	4	(
water	36:35	0:0	4	png_voidp
water	36:44	0:0	4	)
water	36:45	0:0	4	pfFile
arg	36:53	36:67	3	png_write_data
water	36:53	0:0	4	png_write_data
arg	36:69	36:78	3	png_flush
water	36:69	0:0	4	png_flush
water	36:79	0:0	2	;
call	39:8	41:32	2	png_set_IHDR
arg	39:21	39:28	3	png_ptr
water	39:21	0:0	4	png_ptr
arg	39:30	39:38	3	info_ptr
water	39:30	0:0	4	info_ptr
arg	39:40	39:46	3	iWidth
water	39:40	0:0	4	iWidth
arg	39:48	39:55	3	iHeight
water	39:48	0:0	4	iHeight
arg	39:57	39:67	3	ciBitDepth
water	39:57	0:0	4	ciBitDepth
arg	40:12	40:30	3	PNG_COLOR_TYPE_RGB
water	40:12	0:0	4	PNG_COLOR_TYPE_RGB
arg	40:32	40:50	3	PNG_INTERLACE_NONE
water	40:32	0:0	4	PNG_INTERLACE_NONE
arg	40:52	40:77	3	PNG_COMPRESSION_TYPE_BASE
water	40:52	0:0	4	PNG_COMPRESSION_TYPE_BASE
arg	41:12	41:32	3	PNG_FILTER_TYPE_BASE
water	41:12	0:0	4	PNG_FILTER_TYPE_BASE
water	41:33	0:0	2	;
call	43:8	43:40	2	png_write_info
arg	43:23	43:30	3	png_ptr
water	43:23	0:0	4	png_ptr
arg	43:32	43:40	3	info_ptr
water	43:32	0:0	4	info_ptr
water	43:41	0:0	2	;
call	45:8	45:27	2	png_set_bgr
arg	45:20	45:27	3	png_ptr
water	45:20	0:0	4	png_ptr
water	45:28	0:0	2	;
water	47:8	0:0	2	ulRowBytes
op	47:19	0:0	2	=
water	47:21	0:0	2	iWidth
op	47:28	0:0	2	*
water	47:30	0:0	2	ciChannels
water	47:40	0:0	2	;
water	49:8	0:0	2	if
water	49:11	0:0	2	(
water	49:12	0:0	2	(
water	49:13	0:0	2	ppbRowPointers
op	49:28	0:0	2	=
water	49:30	0:0	2	(
water	49:31	0:0	2	png_bytepp
water	49:41	0:0	2	)
call	49:43	49:77	2	malloc
arg	49:50	49:77	3	iHeight*sizeof(png_bytep)
water	49:50	0:0	4	iHeight
op	49:58	0:0	4	*
op	49:60	0:0	4	sizeof
water	49:66	0:0	4	(
water	49:67	0:0	4	png_bytep
water	49:76	0:0	4	)
water	49:78	0:0	2	)
op	49:80	0:0	2	==
water	49:83	0:0	2	NULL
water	49:87	0:0	2	)
water	50:12	0:0	2	Throw
water	50:18	0:0	2	"Visualpng: Out of memory"
water	50:44	0:0	2	;
water	52:8	0:0	2	for
water	52:12	0:0	2	(
water	52:13	0:0	2	i
op	52:15	0:0	2	=
water	52:17	0:0	2	0
water	52:18	0:0	2	;
water	52:20	0:0	2	i
op	52:22	0:0	2	<
water	52:24	0:0	2	iHeight
water	52:31	0:0	2	;
water	52:33	0:0	2	i
op	52:34	0:0	2	++
water	52:36	0:0	2	)
water	53:12	0:0	2	ppbRowPointers
op	53:26	0:0	2	[
water	53:27	0:0	2	i
op	53:28	0:0	2	]
op	53:30	0:0	2	=
water	53:32	0:0	2	pDiData
op	53:40	0:0	2	+
water	53:42	0:0	2	i
op	53:44	0:0	2	*
water	53:46	0:0	2	(
water	53:47	0:0	2	(
water	53:48	0:0	2	(
water	53:49	0:0	2	ulRowBytes
op	53:60	0:0	2	+
water	53:62	0:0	2	3
water	53:63	0:0	2	)
op	53:65	0:0	2	>>
water	53:68	0:0	2	2
water	53:69	0:0	2	)
op	53:71	0:0	2	<<
water	53:74	0:0	2	2
water	53:75	0:0	2	)
water	53:76	0:0	2	;
call	55:8	55:48	2	png_write_image
arg	55:25	55:32	3	png_ptr
water	55:25	0:0	4	png_ptr
arg	55:34	55:48	3	ppbRowPointers
water	55:34	0:0	4	ppbRowPointers
water	55:49	0:0	2	;
call	57:8	57:39	2	png_write_end
arg	57:22	57:29	3	png_ptr
water	57:22	0:0	4	png_ptr
arg	57:31	57:39	3	info_ptr
water	57:31	0:0	4	info_ptr
water	57:40	0:0	2	;
call	59:8	59:28	2	free
arg	59:14	59:28	3	ppbRowPointers
water	59:14	0:0	4	ppbRowPointers
water	59:29	0:0	2	;
water	60:8	0:0	2	ppbRowPointers
op	60:23	0:0	2	=
water	60:25	0:0	2	NULL
water	60:29	0:0	2	;
call	62:8	62:60	2	png_destroy_write_struct
arg	62:33	62:41	3	&png_ptr
op	62:33	0:0	4	&
water	62:34	0:0	4	png_ptr
arg	62:43	62:60	3	(png_infopp)NULL
water	62:43	0:0	4	(
water	62:44	0:0	4	png_infopp
water	62:54	0:0	4	)
water	62:56	0:0	4	NULL
water	62:61	0:0	2	;
water	64:4	0:0	2	}
call	65:4	65:14	2	Catch
arg	65:11	65:14	3	msg
water	65:11	0:0	4	msg
water	66:4	0:0	2	{
call	67:8	67:60	2	png_destroy_write_struct
arg	67:33	67:41	3	&png_ptr
op	67:33	0:0	4	&
water	67:34	0:0	4	png_ptr
arg	67:43	67:60	3	(png_infopp)NULL
water	67:43	0:0	4	(
water	67:44	0:0	4	png_infopp
water	67:54	0:0	4	)
water	67:56	0:0	4	NULL
water	67:61	0:0	2	;
water	68:8	0:0	2	if
water	68:10	0:0	2	(
water	68:11	0:0	2	ppbRowPointers
water	68:25	0:0	2	)
call	69:12	69:32	2	free
arg	69:18	69:32	3	ppbRowPointers
water	69:18	0:0	4	ppbRowPointers
water	69:33	0:0	2	;
call	70:8	70:21	2	fclose
arg	70:15	70:21	3	pfFile
water	70:15	0:0	4	pfFile
water	70:22	0:0	2	;
water	71:8	0:0	2	return
water	71:15	0:0	2	FALSE
water	71:20	0:0	2	;
water	72:4	0:0	2	}
call	73:4	73:18	2	fclose
arg	73:12	73:18	3	pfFile
water	73:12	0:0	4	pfFile
water	73:19	0:0	2	;
return	74:4	74:15	2	TRUE
water	74:11	0:0	3	TRUE
