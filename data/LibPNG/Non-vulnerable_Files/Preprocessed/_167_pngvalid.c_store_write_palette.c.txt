func	1:0	18:0	0	static store_palette_entry *	store_write_palette
params	2:19	0:0	1	
param	2:20	2:33	2	png_store *	ps
param	2:35	2:47	2	int	npalette
stmnts	4:3	17:21	1	
if	4:3	5:77	2	(ps -> pwrite == NULL)
cond	4:7	4:21	3	ps -> pwrite == NULL
water	4:7	0:0	4	ps
op	4:9	0:0	4	->
water	4:11	0:0	4	pwrite
op	4:18	0:0	4	==
water	4:21	0:0	4	NULL
stmts	5:6	5:77	3	
call	5:6	5:76	4	store_log
arg	5:16	5:18	5	ps
water	5:16	0:0	6	ps
arg	5:20	5:24	5	NULL
water	5:20	0:0	6	NULL
arg	5:26	5:73	5	"attempt to write palette without write stream"
water	5:26	0:0	6	"attempt to write palette without write stream"
arg	5:75	5:76	5	1
water	5:75	0:0	6	1
water	5:77	0:0	4	;
if	6:3	7:65	2	(ps -> palette != NULL)
cond	6:7	6:22	3	ps -> palette != NULL
water	6:7	0:0	4	ps
op	6:9	0:0	4	->
water	6:11	0:0	4	palette
op	6:19	0:0	4	!=
water	6:22	0:0	4	NULL
stmts	7:6	7:65	3	
call	7:6	7:64	4	png_error
arg	7:16	7:26	5	ps->pwrite
water	7:16	0:0	6	ps
op	7:18	0:0	6	->
water	7:20	0:0	6	pwrite
arg	7:28	7:64	5	"multiple store_write_palette calls"
water	7:28	0:0	6	"multiple store_write_palette calls"
water	7:65	0:0	4	;
if	9:3	16:3	2	(npalette > 0)
cond	9:7	9:18	3	npalette > 0
water	9:7	0:0	4	npalette
op	9:16	0:0	4	>
water	9:18	0:0	4	0
stmts	10:3	16:3	3	
water	10:3	0:0	4	{
water	11:6	0:0	4	ps
op	11:8	0:0	4	->
water	11:10	0:0	4	palette
op	11:18	0:0	4	=
call	11:20	12:29	4	voidcast
arg	11:29	11:49	5	store_palette_entry*
water	11:29	0:0	6	store_palette_entry
op	11:48	0:0	6	*
arg	11:51	12:29	5	malloc(npalette*sizeof*ps->palette)
call	11:51	12:28	6	malloc
arg	11:58	12:28	7	npalette*sizeof*ps->palette
water	11:58	0:0	8	npalette
op	11:67	0:0	8	*
op	12:9	0:0	8	sizeof
op	12:16	0:0	8	*
water	12:17	0:0	8	ps
op	12:19	0:0	8	->
water	12:21	0:0	8	palette
water	12:30	0:0	4	;
if	13:6	14:56	4	(ps -> palette == NULL)
cond	13:10	13:25	5	ps -> palette == NULL
water	13:10	0:0	6	ps
op	13:12	0:0	6	->
water	13:14	0:0	6	palette
op	13:22	0:0	6	==
water	13:25	0:0	6	NULL
stmts	14:9	14:56	5	
call	14:9	14:55	6	png_error
arg	14:19	14:29	7	ps->pwrite
water	14:19	0:0	8	ps
op	14:21	0:0	8	->
water	14:23	0:0	8	pwrite
arg	14:31	14:55	7	"store new palette: OOM"
water	14:31	0:0	8	"store new palette: OOM"
water	14:56	0:0	6	;
water	15:6	0:0	4	ps
op	15:8	0:0	4	->
water	15:10	0:0	4	npalette
op	15:19	0:0	4	=
water	15:21	0:0	4	npalette
water	15:29	0:0	4	;
water	16:3	0:0	4	}
return	17:3	17:21	2	ps->palette
water	17:10	0:0	3	ps
op	17:12	0:0	3	->
water	17:14	0:0	3	palette
