func	1:0	52:0	0	static int	AStreamPeekStream
params	1:28	0:0	1	
param	1:30	1:41	2	stream_t *	s
param	1:43	1:66	2	const uint8_t * *	pp_peek
param	1:68	1:88	2	unsigned int	i_read
stmnts	0:0	51:17	1	
decl	3:4	3:34	2	stream_sys_t	*p_sys
op	3:24	0:0	2	=
water	3:26	0:0	2	s
op	3:27	0:0	2	->
water	3:29	0:0	2	p_sys
decl	4:4	4:62	2	stream_track_t	*tk
op	4:23	0:0	2	=
op	4:25	0:0	2	&
water	4:26	0:0	2	p_sys
op	4:31	0:0	2	->
water	4:33	0:0	2	stream
op	4:39	0:0	2	.
water	4:40	0:0	2	tk
op	4:42	0:0	2	[
water	4:43	0:0	2	p_sys
op	4:48	0:0	2	->
water	4:50	0:0	2	stream
op	4:56	0:0	2	.
water	4:57	0:0	2	i_tk
op	4:61	0:0	2	]
decl	5:4	5:18	2	uint64_t	i_off
if	6:4	6:43	2	(tk -> i_start >= tk -> i_end)
cond	6:8	6:27	3	tk -> i_start >= tk -> i_end
water	6:8	0:0	4	tk
op	6:10	0:0	4	->
water	6:12	0:0	4	i_start
op	6:20	0:0	4	>=
water	6:23	0:0	4	tk
op	6:25	0:0	4	->
water	6:27	0:0	4	i_end
stmts	6:35	6:43	3	
return	6:35	6:43	4	0
water	6:42	0:0	5	0
call	8:4	11:60	2	msg_Dbg
arg	8:13	8:14	3	s
water	8:13	0:0	4	s
arg	8:16	9:52	3	"AStreamPeekStream: %d pos=%"PRId64" tk=%d ""start=%"PRId64" offset=%d end=%"PRId64
water	8:16	0:0	4	"AStreamPeekStream: %d pos=%"
water	8:45	0:0	4	PRId64
water	8:51	0:0	4	" tk=%d "
water	9:13	0:0	4	"start=%"
water	9:22	0:0	4	PRId64
water	9:28	0:0	4	" offset=%d end=%"
water	9:46	0:0	4	PRId64
arg	10:13	10:19	3	i_read
water	10:13	0:0	4	i_read
arg	10:21	10:33	3	p_sys->i_pos
water	10:21	0:0	4	p_sys
op	10:26	0:0	4	->
water	10:28	0:0	4	i_pos
arg	10:35	10:53	3	p_sys->stream.i_tk
water	10:35	0:0	4	p_sys
op	10:40	0:0	4	->
water	10:42	0:0	4	stream
op	10:48	0:0	4	.
water	10:49	0:0	4	i_tk
arg	11:13	11:24	3	tk->i_start
water	11:13	0:0	4	tk
op	11:15	0:0	4	->
water	11:17	0:0	4	i_start
arg	11:26	11:48	3	p_sys->stream.i_offset
water	11:26	0:0	4	p_sys
op	11:31	0:0	4	->
water	11:33	0:0	4	stream
op	11:39	0:0	4	.
water	11:40	0:0	4	i_offset
arg	11:50	11:60	3	tk->i_end
water	11:50	0:0	4	tk
op	11:52	0:0	4	->
water	11:54	0:0	4	i_end
water	11:61	0:0	2	;
if	14:4	15:44	2	(i_read > STREAM_CACHE_TRACK_SIZE / 2)
cond	14:8	14:43	3	i_read > STREAM_CACHE_TRACK_SIZE / 2
water	14:8	0:0	4	i_read
op	14:15	0:0	4	>
water	14:17	0:0	4	STREAM_CACHE_TRACK_SIZE
op	14:41	0:0	4	/
water	14:43	0:0	4	2
stmts	15:8	15:44	3	
water	15:8	0:0	4	i_read
op	15:15	0:0	4	=
water	15:17	0:0	4	STREAM_CACHE_TRACK_SIZE
op	15:41	0:0	4	/
water	15:43	0:0	4	2
water	15:44	0:0	4	;
while	16:4	24:4	2	(tk -> i_end < tk -> i_start + p_sys -> stream . i_offset + i_read)
cond	16:11	16:62	3	tk -> i_end < tk -> i_start + p_sys -> stream . i_offset + i_read
water	16:11	0:0	4	tk
op	16:13	0:0	4	->
water	16:15	0:0	4	i_end
op	16:21	0:0	4	<
water	16:23	0:0	4	tk
op	16:25	0:0	4	->
water	16:27	0:0	4	i_start
op	16:35	0:0	4	+
water	16:37	0:0	4	p_sys
op	16:42	0:0	4	->
water	16:44	0:0	4	stream
op	16:50	0:0	4	.
water	16:51	0:0	4	i_offset
op	16:60	0:0	4	+
water	16:62	0:0	4	i_read
stmts	17:4	24:4	3	
water	17:4	0:0	4	{
if	18:8	22:8	4	(p_sys -> stream . i_used <= 1)
cond	18:12	18:36	5	p_sys -> stream . i_used <= 1
water	18:12	0:0	6	p_sys
op	18:17	0:0	6	->
water	18:19	0:0	6	stream
op	18:25	0:0	6	.
water	18:26	0:0	6	i_used
op	18:33	0:0	6	<=
water	18:36	0:0	6	1
stmts	19:8	22:8	5	
water	19:8	0:0	6	{
water	21:12	0:0	6	p_sys
op	21:17	0:0	6	->
water	21:19	0:0	6	stream
op	21:25	0:0	6	.
water	21:26	0:0	6	i_used
op	21:33	0:0	6	+=
water	21:36	0:0	6	tk
op	21:38	0:0	6	->
water	21:40	0:0	6	i_start
op	21:48	0:0	6	+
water	21:50	0:0	6	p_sys
op	21:55	0:0	6	->
water	21:57	0:0	6	stream
op	21:63	0:0	6	.
water	21:64	0:0	6	i_offset
op	21:73	0:0	6	+
water	21:75	0:0	6	i_read
op	21:82	0:0	6	-
water	21:84	0:0	6	tk
op	21:86	0:0	6	->
water	21:88	0:0	6	i_end
water	21:93	0:0	6	;
water	22:8	0:0	6	}
if	23:8	23:44	4	(AStreamRefillStream (s ))
cond	23:12	23:35	5	AStreamRefillStream (s )
call	23:12	23:35	6	AStreamRefillStream
arg	23:33	23:35	7	s
water	23:33	0:0	8	s
stmts	23:39	23:44	5	
break	23:39	23:44	6	
water	24:4	0:0	4	}
if	25:4	28:4	2	(tk -> i_end < tk -> i_start + p_sys -> stream . i_offset + i_read)
cond	25:8	25:59	3	tk -> i_end < tk -> i_start + p_sys -> stream . i_offset + i_read
water	25:8	0:0	4	tk
op	25:10	0:0	4	->
water	25:12	0:0	4	i_end
op	25:18	0:0	4	<
water	25:20	0:0	4	tk
op	25:22	0:0	4	->
water	25:24	0:0	4	i_start
op	25:32	0:0	4	+
water	25:34	0:0	4	p_sys
op	25:39	0:0	4	->
water	25:41	0:0	4	stream
op	25:47	0:0	4	.
water	25:48	0:0	4	i_offset
op	25:57	0:0	4	+
water	25:59	0:0	4	i_read
stmts	26:4	28:4	3	
water	26:4	0:0	4	{
water	27:8	0:0	4	i_read
op	27:15	0:0	4	=
water	27:17	0:0	4	tk
op	27:19	0:0	4	->
water	27:21	0:0	4	i_end
op	27:27	0:0	4	-
water	27:29	0:0	4	tk
op	27:31	0:0	4	->
water	27:33	0:0	4	i_start
op	27:41	0:0	4	-
water	27:43	0:0	4	p_sys
op	27:48	0:0	4	->
water	27:50	0:0	4	stream
op	27:56	0:0	4	.
water	27:57	0:0	4	i_offset
water	27:65	0:0	4	;
water	28:4	0:0	4	}
water	30:4	0:0	2	i_off
op	30:10	0:0	2	=
water	30:12	0:0	2	(
water	30:13	0:0	2	tk
op	30:15	0:0	2	->
water	30:17	0:0	2	i_start
op	30:25	0:0	2	+
water	30:27	0:0	2	p_sys
op	30:32	0:0	2	->
water	30:34	0:0	2	stream
op	30:40	0:0	2	.
water	30:41	0:0	2	i_offset
water	30:49	0:0	2	)
op	30:51	0:0	2	%
water	30:53	0:0	2	STREAM_CACHE_TRACK_SIZE
water	30:76	0:0	2	;
if	31:4	35:4	2	(i_off + i_read <= STREAM_CACHE_TRACK_SIZE)
cond	31:8	31:26	3	i_off + i_read <= STREAM_CACHE_TRACK_SIZE
water	31:8	0:0	4	i_off
op	31:14	0:0	4	+
water	31:16	0:0	4	i_read
op	31:23	0:0	4	<=
water	31:26	0:0	4	STREAM_CACHE_TRACK_SIZE
stmts	32:4	35:4	3	
water	32:4	0:0	4	{
op	33:8	0:0	4	*
water	33:9	0:0	4	pp_peek
op	33:17	0:0	4	=
op	33:19	0:0	4	&
water	33:20	0:0	4	tk
op	33:22	0:0	4	->
water	33:24	0:0	4	p_buffer
op	33:32	0:0	4	[
water	33:33	0:0	4	i_off
op	33:38	0:0	4	]
water	33:39	0:0	4	;
return	34:8	34:21	4	i_read
water	34:15	0:0	5	i_read
water	35:4	0:0	4	}
if	36:4	45:4	2	(p_sys -> i_peek < i_read)
cond	36:8	36:24	3	p_sys -> i_peek < i_read
water	36:8	0:0	4	p_sys
op	36:13	0:0	4	->
water	36:15	0:0	4	i_peek
op	36:22	0:0	4	<
water	36:24	0:0	4	i_read
stmts	37:4	45:4	3	
water	37:4	0:0	4	{
water	38:8	0:0	4	p_sys
op	38:13	0:0	4	->
water	38:15	0:0	4	p_peek
op	38:22	0:0	4	=
call	38:24	38:63	4	realloc_or_free
arg	38:41	38:54	5	p_sys->p_peek
water	38:41	0:0	6	p_sys
op	38:46	0:0	6	->
water	38:48	0:0	6	p_peek
arg	38:56	38:63	5	i_read
water	38:56	0:0	6	i_read
water	38:64	0:0	4	;
if	39:8	43:8	4	(! p_sys -> p_peek)
cond	39:12	39:20	5	! p_sys -> p_peek
op	39:12	0:0	6	!
water	39:13	0:0	6	p_sys
op	39:18	0:0	6	->
water	39:20	0:0	6	p_peek
stmts	40:8	43:8	5	
water	40:8	0:0	6	{
water	41:12	0:0	6	p_sys
op	41:17	0:0	6	->
water	41:19	0:0	6	i_peek
op	41:26	0:0	6	=
water	41:28	0:0	6	0
water	41:29	0:0	6	;
return	42:12	42:20	6	0
water	42:19	0:0	7	0
water	43:8	0:0	6	}
water	44:8	0:0	4	p_sys
op	44:13	0:0	4	->
water	44:15	0:0	4	i_peek
op	44:22	0:0	4	=
water	44:24	0:0	4	i_read
water	44:30	0:0	4	;
water	45:4	0:0	4	}
call	46:4	47:44	2	memcpy
arg	46:12	46:25	3	p_sys->p_peek
water	46:12	0:0	4	p_sys
op	46:17	0:0	4	->
water	46:19	0:0	4	p_peek
arg	46:27	46:47	3	&tk->p_buffer[i_off]
op	46:27	0:0	4	&
water	46:28	0:0	4	tk
op	46:30	0:0	4	->
water	46:32	0:0	4	p_buffer
op	46:40	0:0	4	[
water	46:41	0:0	4	i_off
op	46:46	0:0	4	]
arg	47:12	47:44	3	STREAM_CACHE_TRACK_SIZE-i_off
water	47:12	0:0	4	STREAM_CACHE_TRACK_SIZE
op	47:36	0:0	4	-
water	47:38	0:0	4	i_off
water	47:45	0:0	2	;
call	48:4	49:73	2	memcpy
arg	48:12	48:59	3	&p_sys->p_peek[STREAM_CACHE_TRACK_SIZE-i_off]
op	48:12	0:0	4	&
water	48:13	0:0	4	p_sys
op	48:18	0:0	4	->
water	48:20	0:0	4	p_peek
op	48:26	0:0	4	[
water	48:27	0:0	4	STREAM_CACHE_TRACK_SIZE
op	48:51	0:0	4	-
water	48:53	0:0	4	i_off
op	48:58	0:0	4	]
arg	49:12	49:28	3	&tk->p_buffer[0]
op	49:12	0:0	4	&
water	49:13	0:0	4	tk
op	49:15	0:0	4	->
water	49:17	0:0	4	p_buffer
op	49:25	0:0	4	[
water	49:26	0:0	4	0
op	49:27	0:0	4	]
arg	49:30	49:73	3	i_read-(STREAM_CACHE_TRACK_SIZE-i_off)
water	49:30	0:0	4	i_read
op	49:37	0:0	4	-
water	49:39	0:0	4	(
water	49:40	0:0	4	STREAM_CACHE_TRACK_SIZE
op	49:64	0:0	4	-
water	49:66	0:0	4	i_off
water	49:71	0:0	4	)
water	49:74	0:0	2	;
op	50:4	0:0	2	*
water	50:5	0:0	2	pp_peek
op	50:13	0:0	2	=
water	50:15	0:0	2	p_sys
op	50:20	0:0	2	->
water	50:22	0:0	2	p_peek
water	50:28	0:0	2	;
return	51:4	51:17	2	i_read
water	51:11	0:0	3	i_read
