func	2:0	64:0	0	char *	MacLegacy_Select
params	2:22	0:0	1	
param	2:24	2:42	2	filter_t *	p_filter
param	2:44	2:68	2	const char *	psz_fontname
param	3:26	3:37	2	bool	b_bold
param	3:39	3:52	2	bool	b_italic
param	3:54	3:64	2	int	i_size
param	3:66	3:77	2	int *	i_idx
stmnts	5:4	63:19	1	
call	5:4	5:23	2	VLC_UNUSED
arg	5:16	5:23	3	b_bold
water	5:16	0:0	4	b_bold
water	5:24	0:0	2	;
call	6:4	6:25	2	VLC_UNUSED
arg	6:16	6:25	3	b_italic
water	6:16	0:0	4	b_italic
water	6:26	0:0	2	;
call	7:4	7:23	2	VLC_UNUSED
arg	7:16	7:23	3	i_size
water	7:16	0:0	4	i_size
water	7:24	0:0	2	;
decl	8:4	8:13	2	FSRef	ref
decl	9:4	9:34	2	unsigned char	path[MAXPATHLEN]
decl	10:4	10:19	2	char	*psz_path
decl	11:4	11:28	2	CFStringRef	cf_fontName
decl	12:4	12:28	2	ATSFontRef	ats_font_id
op	13:4	0:0	2	*
water	13:5	0:0	2	i_idx
op	13:11	0:0	2	=
water	13:13	0:0	2	0
water	13:14	0:0	2	;
if	14:4	15:19	2	(psz_fontname == NULL)
cond	14:8	14:24	3	psz_fontname == NULL
water	14:8	0:0	4	psz_fontname
op	14:21	0:0	4	==
water	14:24	0:0	4	NULL
stmts	15:8	15:19	3	
return	15:8	15:19	4	NULL
water	15:15	0:0	5	NULL
call	16:4	16:54	2	msg_Dbg
arg	16:13	16:21	3	p_filter
water	16:13	0:0	4	p_filter
arg	16:23	16:39	3	"looking for %s"
water	16:23	0:0	4	"looking for %s"
arg	16:41	16:54	3	psz_fontname
water	16:41	0:0	4	psz_fontname
water	16:55	0:0	2	;
water	17:4	0:0	2	cf_fontName
op	17:16	0:0	2	=
call	17:18	17:102	2	CFStringCreateWithCString
arg	17:45	17:64	3	kCFAllocatorDefault
water	17:45	0:0	4	kCFAllocatorDefault
arg	17:66	17:78	3	psz_fontname
water	17:66	0:0	4	psz_fontname
arg	17:80	17:102	3	kCFStringEncodingUTF8
water	17:80	0:0	4	kCFStringEncodingUTF8
water	17:103	0:0	2	;
water	18:4	0:0	2	ats_font_id
op	18:16	0:0	2	=
call	18:18	18:87	2	ATSFontFindFromName
arg	18:39	18:50	3	cf_fontName
water	18:39	0:0	4	cf_fontName
arg	18:52	18:87	3	kATSOptionFlagsIncludeDisabledMask
water	18:52	0:0	4	kATSOptionFlagsIncludeDisabledMask
water	18:88	0:0	2	;
if	19:4	34:4	2	(ats_font_id == 0 || ats_font_id == 0 xFFFFFFFFUL)
cond	19:9	19:45	3	ats_font_id == 0 || ats_font_id == 0 xFFFFFFFFUL
water	19:9	0:0	4	ats_font_id
op	19:21	0:0	4	==
water	19:24	0:0	4	0
op	19:26	0:0	4	||
water	19:29	0:0	4	ats_font_id
op	19:41	0:0	4	==
water	19:44	0:0	4	0
water	19:45	0:0	4	xFFFFFFFFUL
stmts	20:4	34:4	3	
water	20:4	0:0	4	{
call	21:8	21:89	4	msg_Dbg
arg	21:17	21:25	5	p_filter
water	21:17	0:0	6	p_filter
arg	21:27	21:74	5	"ATS couldn't find %s by name, checking family"
water	21:27	0:0	6	"ATS couldn't find %s by name, checking family"
arg	21:76	21:89	5	psz_fontname
water	21:76	0:0	6	psz_fontname
water	21:90	0:0	4	;
water	22:8	0:0	4	ats_font_id
op	22:20	0:0	4	=
call	22:22	22:85	4	ATSFontFamilyFindFromName
arg	22:49	22:60	5	cf_fontName
water	22:49	0:0	6	cf_fontName
arg	22:62	22:85	5	kATSOptionFlagsDefault
water	22:62	0:0	6	kATSOptionFlagsDefault
water	22:86	0:0	4	;
if	23:8	33:8	4	(ats_font_id == 0 || ats_font_id == 0 xFFFFFFFFUL)
cond	23:13	23:49	5	ats_font_id == 0 || ats_font_id == 0 xFFFFFFFFUL
water	23:13	0:0	6	ats_font_id
op	23:25	0:0	6	==
water	23:28	0:0	6	0
op	23:30	0:0	6	||
water	23:33	0:0	6	ats_font_id
op	23:45	0:0	6	==
water	23:48	0:0	6	0
water	23:49	0:0	6	xFFFFFFFFUL
stmts	24:8	33:8	5	
water	24:8	0:0	6	{
call	25:12	25:108	6	msg_Dbg
arg	25:21	25:29	7	p_filter
water	25:21	0:0	8	p_filter
arg	25:31	25:93	7	"ATS couldn't find either %s nor its family, checking PS name"
water	25:31	0:0	8	"ATS couldn't find either %s nor its family, checking PS name"
arg	25:95	25:108	7	psz_fontname
water	25:95	0:0	8	psz_fontname
water	25:109	0:0	6	;
water	26:12	0:0	6	ats_font_id
op	26:24	0:0	6	=
call	26:26	26:93	6	ATSFontFindFromPostScriptName
arg	26:57	26:68	7	cf_fontName
water	26:57	0:0	8	cf_fontName
arg	26:70	26:93	7	kATSOptionFlagsDefault
water	26:70	0:0	8	kATSOptionFlagsDefault
water	26:94	0:0	6	;
if	27:12	32:12	6	(ats_font_id == 0 || ats_font_id == 0 xFFFFFFFFUL)
cond	27:17	27:53	7	ats_font_id == 0 || ats_font_id == 0 xFFFFFFFFUL
water	27:17	0:0	8	ats_font_id
op	27:29	0:0	8	==
water	27:32	0:0	8	0
op	27:34	0:0	8	||
water	27:37	0:0	8	ats_font_id
op	27:49	0:0	8	==
water	27:52	0:0	8	0
water	27:53	0:0	8	xFFFFFFFFUL
stmts	28:12	32:12	7	
water	28:12	0:0	8	{
call	29:16	29:106	8	msg_Err
arg	29:25	29:33	9	p_filter
water	29:25	0:0	10	p_filter
arg	29:35	29:91	9	"ATS couldn't find %s (no font name, family or PS name)"
water	29:35	0:0	10	"ATS couldn't find %s (no font name, family or PS name)"
arg	29:93	29:106	9	psz_fontname
water	29:93	0:0	10	psz_fontname
water	29:107	0:0	8	;
call	30:16	30:39	8	CFRelease
arg	30:27	30:39	9	cf_fontName
water	30:27	0:0	10	cf_fontName
water	30:40	0:0	8	;
return	31:16	31:27	8	NULL
water	31:23	0:0	9	NULL
water	32:12	0:0	8	}
water	33:8	0:0	6	}
water	34:4	0:0	4	}
call	35:4	35:27	2	CFRelease
arg	35:15	35:27	3	cf_fontName
water	35:15	0:0	4	cf_fontName
water	35:28	0:0	2	;
if	36:4	40:4	2	(noErr !=ATSFontGetFileReference (ats_font_id ,& ref ))
cond	36:9	36:61	3	noErr !=ATSFontGetFileReference (ats_font_id ,& ref )
water	36:9	0:0	4	noErr
op	36:15	0:0	4	!=
call	36:18	36:61	4	ATSFontGetFileReference
arg	36:43	36:54	5	ats_font_id
water	36:43	0:0	6	ats_font_id
arg	36:56	36:61	5	&ref
op	36:56	0:0	6	&
water	36:57	0:0	6	ref
stmts	37:4	40:4	3	
water	37:4	0:0	4	{
call	38:8	38:76	4	msg_Err
arg	38:17	38:25	5	p_filter
water	38:17	0:0	6	p_filter
arg	38:27	38:61	5	"ATS couldn't get file ref for %s"
water	38:27	0:0	6	"ATS couldn't get file ref for %s"
arg	38:63	38:76	5	psz_fontname
water	38:63	0:0	6	psz_fontname
water	38:77	0:0	4	;
return	39:8	39:19	4	NULL
water	39:15	0:0	5	NULL
water	40:4	0:0	4	}
water	43:4	0:0	2	{
decl	44:8	44:41	2	ATSFontRef	id2
op	44:24	0:0	2	=
water	44:26	0:0	2	ats_font_id
op	44:38	0:0	2	-
water	44:40	0:0	2	1
decl	45:8	45:24	2	FSRef	ref2
while	46:8	53:8	2	(id2 > 0)
cond	46:16	46:22	3	id2 > 0
water	46:16	0:0	4	id2
op	46:20	0:0	4	>
water	46:22	0:0	4	0
stmts	47:8	53:8	3	
water	47:8	0:0	4	{
if	48:12	49:21	4	(noErr !=ATSFontGetFileReference (id2 ,& ref2 ))
cond	48:17	48:62	5	noErr !=ATSFontGetFileReference (id2 ,& ref2 )
water	48:17	0:0	6	noErr
op	48:23	0:0	6	!=
call	48:26	48:62	6	ATSFontGetFileReference
arg	48:51	48:54	7	id2
water	48:51	0:0	8	id2
arg	48:56	48:62	7	&ref2
op	48:56	0:0	8	&
water	48:57	0:0	8	ref2
stmts	49:16	49:21	5	
break	49:16	49:21	6	
if	50:12	51:21	4	(noErr !=FSCompareFSRefs (& ref ,& ref2 ))
cond	50:17	50:55	5	noErr !=FSCompareFSRefs (& ref ,& ref2 )
water	50:17	0:0	6	noErr
op	50:23	0:0	6	!=
call	50:26	50:55	6	FSCompareFSRefs
arg	50:43	50:47	7	&ref
op	50:43	0:0	8	&
water	50:44	0:0	8	ref
arg	50:49	50:55	7	&ref2
op	50:49	0:0	8	&
water	50:50	0:0	8	ref2
stmts	51:16	51:21	5	
break	51:16	51:21	6	
water	52:12	0:0	4	id2
op	52:16	0:0	4	--
water	52:18	0:0	4	;
water	53:8	0:0	4	}
op	54:8	0:0	2	*
water	54:9	0:0	2	i_idx
op	54:15	0:0	2	=
water	54:17	0:0	2	ats_font_id
op	54:29	0:0	2	-
water	54:31	0:0	2	(
water	54:33	0:0	2	id2
op	54:37	0:0	2	+
water	54:39	0:0	2	1
water	54:41	0:0	2	)
water	54:42	0:0	2	;
water	55:4	0:0	2	}
if	56:4	60:4	2	(noErr !=FSRefMakePath (& ref ,path ,sizeof ( path ) ))
cond	56:9	56:58	3	noErr !=FSRefMakePath (& ref ,path ,sizeof ( path ) )
water	56:9	0:0	4	noErr
op	56:15	0:0	4	!=
call	56:18	56:58	4	FSRefMakePath
arg	56:33	56:37	5	&ref
op	56:33	0:0	6	&
water	56:34	0:0	6	ref
arg	56:39	56:43	5	path
water	56:39	0:0	6	path
arg	56:45	56:58	5	sizeof(path)
op	56:45	0:0	6	sizeof
water	56:51	0:0	6	(
water	56:52	0:0	6	path
water	56:56	0:0	6	)
stmts	57:4	60:4	3	
water	57:4	0:0	4	{
call	58:8	58:66	4	msg_Err
arg	58:17	58:25	5	p_filter
water	58:17	0:0	6	p_filter
arg	58:27	58:66	5	"failure when getting path from FSRef"
water	58:27	0:0	6	"failure when getting path from FSRef"
water	58:67	0:0	4	;
return	59:8	59:19	4	NULL
water	59:15	0:0	5	NULL
water	60:4	0:0	4	}
call	61:4	61:40	2	msg_Dbg
arg	61:13	61:21	3	p_filter
water	61:13	0:0	4	p_filter
arg	61:23	61:33	3	"found %s"
water	61:23	0:0	4	"found %s"
arg	61:35	61:40	3	path
water	61:35	0:0	4	path
water	61:41	0:0	2	;
water	62:4	0:0	2	psz_path
op	62:13	0:0	2	=
call	62:15	62:36	2	strdup
arg	62:23	62:36	3	(char*)path
water	62:23	0:0	4	(
water	62:24	0:0	4	char
op	62:29	0:0	4	*
water	62:30	0:0	4	)
water	62:31	0:0	4	path
water	62:37	0:0	2	;
return	63:4	63:19	2	psz_path
water	63:11	0:0	3	psz_path
