decl	1:7	1:46	0	void	Direct3DUnlockSurface
water	1:33	0:0	0	(
water	1:34	0:0	0	picture_t
op	1:44	0:0	0	*
water	1:45	0:0	0	)
func	2:0	47:0	0	static void	Prepare
params	2:19	0:0	1	
param	2:20	2:38	2	vout_display_t *	vd
param	2:40	2:58	2	picture_t *	picture
param	2:60	2:84	2	subpicture_t *	subpicture
stmnts	0:0	46:4	1	
decl	4:4	4:37	2	vout_display_sys_t	*sys
op	4:28	0:0	2	=
water	4:30	0:0	2	vd
op	4:32	0:0	2	->
water	4:34	0:0	2	sys
decl	5:4	5:56	2	LPDIRECT3DSURFACE9	surface
op	5:31	0:0	2	=
water	5:33	0:0	2	picture
op	5:40	0:0	2	->
water	5:42	0:0	2	p_sys
op	5:47	0:0	2	->
water	5:49	0:0	2	surface
call	7:4	7:27	2	picture_Release
arg	7:20	7:27	3	picture
water	7:20	0:0	4	picture
water	7:28	0:0	2	;
call	8:4	8:25	2	VLC_UNUSED
arg	8:15	8:25	3	subpicture
water	8:15	0:0	4	subpicture
water	8:26	0:0	2	;
call	15:4	15:33	2	Direct3DUnlockSurface
arg	15:26	15:33	3	picture
water	15:26	0:0	4	picture
water	15:34	0:0	2	;
call	16:4	16:25	2	VLC_UNUSED
arg	16:15	16:25	3	subpicture
water	16:15	0:0	4	subpicture
water	16:26	0:0	2	;
decl	19:4	19:67	2	HRESULT	hr
op	19:15	0:0	2	=
call	19:17	19:66	3	IDirect3DDevice9_TestCooperativeLevel
arg	19:55	19:66	4	sys->d3ddev
water	19:55	0:0	5	sys
op	19:58	0:0	5	->
water	19:60	0:0	5	d3ddev
if	20:4	31:4	2	(FAILED (hr ))
cond	20:8	20:17	3	FAILED (hr )
call	20:8	20:17	4	FAILED
arg	20:15	20:17	5	hr
water	20:15	0:0	6	hr
stmts	20:20	31:4	3	
water	20:20	0:0	4	{
if	21:8	25:8	4	(hr == D3DERR_DEVICENOTRESET && ! sys -> reset_device)
cond	21:12	21:49	5	hr == D3DERR_DEVICENOTRESET && ! sys -> reset_device
water	21:12	0:0	6	hr
op	21:15	0:0	6	==
water	21:18	0:0	6	D3DERR_DEVICENOTRESET
op	21:40	0:0	6	&&
op	21:43	0:0	6	!
water	21:44	0:0	6	sys
op	21:47	0:0	6	->
water	21:49	0:0	6	reset_device
stmts	21:63	25:8	5	
water	21:63	0:0	6	{
call	22:12	22:52	6	vout_display_SendEventPicturesInvalid
arg	22:50	22:52	7	vd
water	22:50	0:0	8	vd
water	22:53	0:0	6	;
water	23:12	0:0	6	sys
op	23:15	0:0	6	->
water	23:17	0:0	6	reset_device
op	23:30	0:0	6	=
water	23:32	0:0	6	true
water	23:36	0:0	6	;
water	24:12	0:0	6	sys
op	24:15	0:0	6	->
water	24:17	0:0	6	lost_not_ready
op	24:32	0:0	6	=
water	24:34	0:0	6	false
water	24:39	0:0	6	;
water	25:8	0:0	6	}
if	26:8	29:8	4	(hr == D3DERR_DEVICELOST && ! sys -> lost_not_ready)
cond	26:12	26:45	5	hr == D3DERR_DEVICELOST && ! sys -> lost_not_ready
water	26:12	0:0	6	hr
op	26:15	0:0	6	==
water	26:18	0:0	6	D3DERR_DEVICELOST
op	26:36	0:0	6	&&
op	26:39	0:0	6	!
water	26:40	0:0	6	sys
op	26:43	0:0	6	->
water	26:45	0:0	6	lost_not_ready
stmts	26:61	29:8	5	
water	26:61	0:0	6	{
water	28:12	0:0	6	sys
op	28:15	0:0	6	->
water	28:17	0:0	6	lost_not_ready
op	28:32	0:0	6	=
water	28:34	0:0	6	true
water	28:38	0:0	6	;
water	29:8	0:0	6	}
return	30:8	30:14	4	
water	31:4	0:0	4	}
decl	32:4	32:31	2	d3d_region_t	picture_region
if	33:4	46:4	2	(!Direct3DImportPicture (vd ,& picture_region ,surface ))
cond	33:8	33:59	3	!Direct3DImportPicture (vd ,& picture_region ,surface )
op	33:8	0:0	4	!
call	33:9	33:59	4	Direct3DImportPicture
arg	33:31	33:33	5	vd
water	33:31	0:0	6	vd
arg	33:35	33:50	5	&picture_region
op	33:35	0:0	6	&
water	33:36	0:0	6	picture_region
arg	33:52	33:59	5	surface
water	33:52	0:0	6	surface
stmts	33:62	46:4	3	
water	33:62	0:0	4	{
water	34:8	0:0	4	picture_region
op	34:22	0:0	4	.
water	34:23	0:0	4	width
op	34:29	0:0	4	=
water	34:31	0:0	4	picture
op	34:38	0:0	4	->
water	34:40	0:0	4	format
op	34:46	0:0	4	.
water	34:47	0:0	4	i_width
water	34:54	0:0	4	;
water	35:8	0:0	4	picture_region
op	35:22	0:0	4	.
water	35:23	0:0	4	height
op	35:30	0:0	4	=
water	35:32	0:0	4	picture
op	35:39	0:0	4	->
water	35:41	0:0	4	format
op	35:47	0:0	4	.
water	35:48	0:0	4	i_height
water	35:56	0:0	4	;
decl	36:8	36:43	4	int	subpicture_region_count
op	36:40	0:0	4	=
water	36:42	0:0	4	0
decl	37:8	37:46	4	d3d_region_t	*subpicture_region
op	37:40	0:0	4	=
water	37:42	0:0	4	NULL
if	38:8	40:48	4	(subpicture)
cond	38:12	38:12	5	subpicture
water	38:12	0:0	6	subpicture
stmts	39:12	40:48	5	
call	39:12	40:47	6	Direct3DImportSubpicture
arg	39:37	39:39	7	vd
water	39:37	0:0	8	vd
arg	39:41	39:65	7	&subpicture_region_count
op	39:41	0:0	8	&
water	39:42	0:0	8	subpicture_region_count
arg	39:67	39:85	7	&subpicture_region
op	39:67	0:0	8	&
water	39:68	0:0	8	subpicture_region
arg	40:37	40:47	7	subpicture
water	40:37	0:0	8	subpicture
water	40:48	0:0	6	;
call	41:8	42:70	4	Direct3DRenderScene
arg	41:28	41:30	5	vd
water	41:28	0:0	6	vd
arg	41:32	41:47	5	&picture_region
op	41:32	0:0	6	&
water	41:33	0:0	6	picture_region
arg	42:28	42:51	5	subpicture_region_count
water	42:28	0:0	6	subpicture_region_count
arg	42:53	42:70	5	subpicture_region
water	42:53	0:0	6	subpicture_region
water	42:71	0:0	4	;
call	43:8	43:66	4	Direct3DDeleteRegions
arg	43:30	43:50	5	sys->d3dregion_count
water	43:30	0:0	6	sys
op	43:33	0:0	6	->
water	43:35	0:0	6	d3dregion_count
arg	43:52	43:66	5	sys->d3dregion
water	43:52	0:0	6	sys
op	43:55	0:0	6	->
water	43:57	0:0	6	d3dregion
water	43:67	0:0	4	;
water	44:8	0:0	4	sys
op	44:11	0:0	4	->
water	44:13	0:0	4	d3dregion_count
op	44:29	0:0	4	=
water	44:31	0:0	4	subpicture_region_count
water	44:54	0:0	4	;
water	45:8	0:0	4	sys
op	45:11	0:0	4	->
water	45:13	0:0	4	d3dregion
op	45:29	0:0	4	=
water	45:31	0:0	4	subpicture_region
water	45:48	0:0	4	;
water	46:4	0:0	4	}
