func	2:0	99:0	0	static block_t *	TSNew
params	2:21	0:0	1	
param	2:23	2:40	2	sout_mux_t *	p_mux
param	2:42	2:63	2	ts_stream_t *	p_stream
param	3:23	3:34	2	bool	b_pcr
stmnts	5:4	98:15	1	
call	5:4	5:20	2	VLC_UNUSED
arg	5:15	5:20	3	p_mux
water	5:15	0:0	4	p_mux
water	5:21	0:0	2	;
decl	6:4	6:48	2	block_t	*p_pes
op	6:19	0:0	2	=
water	6:21	0:0	2	p_stream
op	6:29	0:0	2	->
water	6:31	0:0	2	chain_pes
op	6:40	0:0	2	.
water	6:41	0:0	2	p_first
decl	7:4	7:26	2	bool	b_new_pes
op	7:19	0:0	2	=
water	7:21	0:0	2	false
decl	8:4	8:35	2	bool	b_adaptation_field
op	8:28	0:0	2	=
water	8:30	0:0	2	false
decl	9:4	9:47	2	int	i_payload_max
op	9:22	0:0	2	=
water	9:24	0:0	2	184
op	9:28	0:0	2	-
water	9:30	0:0	2	(
water	9:32	0:0	2	b_pcr
water	9:38	0:0	2	?
water	9:40	0:0	2	8
water	9:42	0:0	2	:
water	9:44	0:0	2	0
water	9:46	0:0	2	)
if	10:4	13:4	2	(p_stream -> i_pes_used <= 0)
cond	10:8	10:32	3	p_stream -> i_pes_used <= 0
water	10:8	0:0	4	p_stream
op	10:16	0:0	4	->
water	10:18	0:0	4	i_pes_used
op	10:29	0:0	4	<=
water	10:32	0:0	4	0
stmts	11:4	13:4	3	
water	11:4	0:0	4	{
water	12:8	0:0	4	b_new_pes
op	12:18	0:0	4	=
water	12:20	0:0	4	true
water	12:24	0:0	4	;
water	13:4	0:0	4	}
decl	14:4	15:38	2	int	i_payload
op	14:18	0:0	2	=
call	14:20	15:37	3	__MIN
arg	14:27	14:70	4	(int)p_pes->i_buffer-p_stream->i_pes_used
water	14:27	0:0	5	(
water	14:28	0:0	5	int
water	14:31	0:0	5	)
water	14:32	0:0	5	p_pes
op	14:37	0:0	5	->
water	14:39	0:0	5	i_buffer
op	14:48	0:0	5	-
water	14:50	0:0	5	p_stream
op	14:58	0:0	5	->
water	14:60	0:0	5	i_pes_used
arg	15:23	15:37	4	i_payload_max
water	15:23	0:0	5	i_payload_max
if	16:4	19:4	2	(b_pcr || i_payload < i_payload_max)
cond	16:8	16:29	3	b_pcr || i_payload < i_payload_max
water	16:8	0:0	4	b_pcr
op	16:14	0:0	4	||
water	16:17	0:0	4	i_payload
op	16:27	0:0	4	<
water	16:29	0:0	4	i_payload_max
stmts	17:4	19:4	3	
water	17:4	0:0	4	{
water	18:8	0:0	4	b_adaptation_field
op	18:27	0:0	4	=
water	18:29	0:0	4	true
water	18:33	0:0	4	;
water	19:4	0:0	4	}
decl	20:4	20:38	2	block_t	*p_ts
op	20:18	0:0	2	=
call	20:20	20:37	3	block_Alloc
arg	20:33	20:37	4	188
water	20:33	0:0	5	188
if	21:4	24:4	2	(b_new_pes && ! ( p_pes -> i_flags & BLOCK_FLAG_NO_KEYFRAME ) && p_pes -> i_flags & BLOCK_FLAG_TYPE_I)
cond	21:8	21:84	3	b_new_pes && ! ( p_pes -> i_flags & BLOCK_FLAG_NO_KEYFRAME ) && p_pes -> i_flags & BLOCK_FLAG_TYPE_I
water	21:8	0:0	4	b_new_pes
op	21:18	0:0	4	&&
op	21:21	0:0	4	!
water	21:22	0:0	4	(
water	21:23	0:0	4	p_pes
op	21:28	0:0	4	->
water	21:30	0:0	4	i_flags
op	21:38	0:0	4	&
water	21:40	0:0	4	BLOCK_FLAG_NO_KEYFRAME
water	21:62	0:0	4	)
op	21:64	0:0	4	&&
water	21:67	0:0	4	p_pes
op	21:72	0:0	4	->
water	21:74	0:0	4	i_flags
op	21:82	0:0	4	&
water	21:84	0:0	4	BLOCK_FLAG_TYPE_I
stmts	22:4	24:4	3	
water	22:4	0:0	4	{
water	23:8	0:0	4	p_ts
op	23:12	0:0	4	->
water	23:14	0:0	4	i_flags
op	23:22	0:0	4	|=
water	23:25	0:0	4	BLOCK_FLAG_TYPE_I
water	23:42	0:0	4	;
water	24:4	0:0	4	}
water	25:4	0:0	2	p_ts
op	25:8	0:0	2	->
water	25:10	0:0	2	i_dts
op	25:16	0:0	2	=
water	25:18	0:0	2	p_pes
op	25:23	0:0	2	->
water	25:25	0:0	2	i_dts
water	25:30	0:0	2	;
water	26:4	0:0	2	p_ts
op	26:8	0:0	2	->
water	26:10	0:0	2	p_buffer
op	26:18	0:0	2	[
water	26:19	0:0	2	0
op	26:20	0:0	2	]
op	26:22	0:0	2	=
water	26:24	0:0	2	0
water	26:25	0:0	2	x47
water	26:28	0:0	2	;
water	27:4	0:0	2	p_ts
op	27:8	0:0	2	->
water	27:10	0:0	2	p_buffer
op	27:18	0:0	2	[
water	27:19	0:0	2	1
op	27:20	0:0	2	]
op	27:22	0:0	2	=
water	27:24	0:0	2	(
water	27:26	0:0	2	b_new_pes
water	27:36	0:0	2	?
water	27:38	0:0	2	0
water	27:39	0:0	2	x40
water	27:43	0:0	2	:
water	27:45	0:0	2	0
water	27:46	0:0	2	x00
water	27:50	0:0	2	)
op	27:52	0:0	2	|
water	28:8	0:0	2	(
water	28:10	0:0	2	(
water	28:12	0:0	2	p_stream
op	28:20	0:0	2	->
water	28:22	0:0	2	i_pid
op	28:28	0:0	2	>>
water	28:31	0:0	2	8
water	28:33	0:0	2	)
op	28:34	0:0	2	&
water	28:35	0:0	2	0
water	28:36	0:0	2	x1f
water	28:40	0:0	2	)
water	28:41	0:0	2	;
water	29:4	0:0	2	p_ts
op	29:8	0:0	2	->
water	29:10	0:0	2	p_buffer
op	29:18	0:0	2	[
water	29:19	0:0	2	2
op	29:20	0:0	2	]
op	29:22	0:0	2	=
water	29:24	0:0	2	p_stream
op	29:32	0:0	2	->
water	29:34	0:0	2	i_pid
op	29:40	0:0	2	&
water	29:42	0:0	2	0
water	29:43	0:0	2	xff
water	29:46	0:0	2	;
water	30:4	0:0	2	p_ts
op	30:8	0:0	2	->
water	30:10	0:0	2	p_buffer
op	30:18	0:0	2	[
water	30:19	0:0	2	3
op	30:20	0:0	2	]
op	30:22	0:0	2	=
water	30:24	0:0	2	(
water	30:26	0:0	2	b_adaptation_field
water	30:45	0:0	2	?
water	30:47	0:0	2	0
water	30:48	0:0	2	x30
water	30:52	0:0	2	:
water	30:54	0:0	2	0
water	30:55	0:0	2	x10
water	30:59	0:0	2	)
op	30:61	0:0	2	|
water	31:8	0:0	2	p_stream
op	31:16	0:0	2	->
water	31:18	0:0	2	i_continuity_counter
water	31:38	0:0	2	;
water	32:4	0:0	2	p_stream
op	32:12	0:0	2	->
water	32:14	0:0	2	i_continuity_counter
op	32:35	0:0	2	=
water	32:37	0:0	2	(
water	32:38	0:0	2	p_stream
op	32:46	0:0	2	->
water	32:48	0:0	2	i_continuity_counter
op	32:68	0:0	2	+
water	32:69	0:0	2	1
water	32:70	0:0	2	)
op	32:71	0:0	2	%
water	32:72	0:0	2	16
water	32:74	0:0	2	;
water	33:4	0:0	2	p_stream
op	33:12	0:0	2	->
water	33:14	0:0	2	b_discontinuity
op	33:30	0:0	2	=
water	33:32	0:0	2	p_pes
op	33:37	0:0	2	->
water	33:39	0:0	2	i_flags
op	33:47	0:0	2	&
water	33:49	0:0	2	BLOCK_FLAG_DISCONTINUITY
water	33:73	0:0	2	;
if	34:4	70:4	2	(b_adaptation_field)
cond	34:8	34:8	3	b_adaptation_field
water	34:8	0:0	4	b_adaptation_field
stmts	35:4	70:4	3	
water	35:4	0:0	4	{
decl	36:8	36:50	4	int	i_stuffing
op	36:23	0:0	4	=
water	36:25	0:0	4	i_payload_max
op	36:39	0:0	4	-
water	36:41	0:0	4	i_payload
if	37:8	57:8	4	(b_pcr)
cond	37:12	37:12	5	b_pcr
water	37:12	0:0	6	b_pcr
stmts	38:8	57:8	5	
water	38:8	0:0	6	{
water	39:12	0:0	6	p_ts
op	39:16	0:0	6	->
water	39:18	0:0	6	i_flags
op	39:26	0:0	6	|=
water	39:29	0:0	6	BLOCK_FLAG_CLOCK
water	39:45	0:0	6	;
water	40:12	0:0	6	p_ts
op	40:16	0:0	6	->
water	40:18	0:0	6	p_buffer
op	40:26	0:0	6	[
water	40:27	0:0	6	4
op	40:28	0:0	6	]
op	40:30	0:0	6	=
water	40:32	0:0	6	7
op	40:34	0:0	6	+
water	40:36	0:0	6	i_stuffing
water	40:46	0:0	6	;
water	41:12	0:0	6	p_ts
op	41:16	0:0	6	->
water	41:18	0:0	6	p_buffer
op	41:26	0:0	6	[
water	41:27	0:0	6	5
op	41:28	0:0	6	]
op	41:30	0:0	6	=
water	41:32	0:0	6	0
water	41:33	0:0	6	x10
water	41:36	0:0	6	;
if	42:12	46:12	6	(p_stream -> b_discontinuity)
cond	42:16	42:26	7	p_stream -> b_discontinuity
water	42:16	0:0	8	p_stream
op	42:24	0:0	8	->
water	42:26	0:0	8	b_discontinuity
stmts	43:12	46:12	7	
water	43:12	0:0	8	{
water	44:16	0:0	8	p_ts
op	44:20	0:0	8	->
water	44:22	0:0	8	p_buffer
op	44:30	0:0	8	[
water	44:31	0:0	8	5
op	44:32	0:0	8	]
op	44:34	0:0	8	|=
water	44:37	0:0	8	0
water	44:38	0:0	8	x80
water	44:41	0:0	8	;
water	45:16	0:0	8	p_stream
op	45:24	0:0	8	->
water	45:26	0:0	8	b_discontinuity
op	45:42	0:0	8	=
water	45:44	0:0	8	false
water	45:49	0:0	8	;
water	46:12	0:0	8	}
water	47:12	0:0	6	p_ts
op	47:16	0:0	6	->
water	47:18	0:0	6	p_buffer
op	47:26	0:0	6	[
water	47:27	0:0	6	6
op	47:28	0:0	6	]
op	47:30	0:0	6	=
water	47:32	0:0	6	0
op	47:34	0:0	6	&
water	47:35	0:0	6	0
water	47:36	0:0	6	xff
water	47:39	0:0	6	;
water	48:12	0:0	6	p_ts
op	48:16	0:0	6	->
water	48:18	0:0	6	p_buffer
op	48:26	0:0	6	[
water	48:27	0:0	6	7
op	48:28	0:0	6	]
op	48:30	0:0	6	=
water	48:32	0:0	6	0
op	48:34	0:0	6	&
water	48:35	0:0	6	0
water	48:36	0:0	6	xff
water	48:39	0:0	6	;
water	49:12	0:0	6	p_ts
op	49:16	0:0	6	->
water	49:18	0:0	6	p_buffer
op	49:26	0:0	6	[
water	49:27	0:0	6	8
op	49:28	0:0	6	]
op	49:30	0:0	6	=
water	49:32	0:0	6	0
op	49:34	0:0	6	&
water	49:35	0:0	6	0
water	49:36	0:0	6	xff
water	49:39	0:0	6	;
water	50:12	0:0	6	p_ts
op	50:16	0:0	6	->
water	50:18	0:0	6	p_buffer
op	50:26	0:0	6	[
water	50:27	0:0	6	9
op	50:28	0:0	6	]
op	50:30	0:0	6	=
water	50:32	0:0	6	0
op	50:34	0:0	6	&
water	50:35	0:0	6	0
water	50:36	0:0	6	xff
water	50:39	0:0	6	;
water	51:12	0:0	6	p_ts
op	51:16	0:0	6	->
water	51:18	0:0	6	p_buffer
op	51:26	0:0	6	[
water	51:27	0:0	6	10
op	51:29	0:0	6	]
op	51:30	0:0	6	=
water	51:32	0:0	6	(
water	51:34	0:0	6	0
op	51:36	0:0	6	&
water	51:37	0:0	6	0
water	51:38	0:0	6	x80
water	51:42	0:0	6	)
op	51:44	0:0	6	|
water	51:46	0:0	6	0
water	51:47	0:0	6	x7e
water	51:50	0:0	6	;
water	52:12	0:0	6	p_ts
op	52:16	0:0	6	->
water	52:18	0:0	6	p_buffer
op	52:26	0:0	6	[
water	52:27	0:0	6	11
op	52:29	0:0	6	]
op	52:30	0:0	6	=
water	52:32	0:0	6	0
water	52:33	0:0	6	;
for	53:12	56:12	6	( int i = 12 ;i < 12 + i_stuffing;i ++)
forinit	0:0	53:27	7	 int i = 12 ;
decl	53:17	53:27	8	int	i
op	53:23	0:0	8	=
water	53:25	0:0	8	12
cond	53:29	53:38	7	i < 12 + i_stuffing
water	53:29	0:0	8	i
op	53:31	0:0	8	<
water	53:33	0:0	8	12
op	53:36	0:0	8	+
water	53:38	0:0	8	i_stuffing
forexpr	53:50	53:51	7	i ++
water	53:50	0:0	8	i
op	53:51	0:0	8	++
stmts	54:12	56:12	7	
water	54:12	0:0	8	{
water	55:16	0:0	8	p_ts
op	55:20	0:0	8	->
water	55:22	0:0	8	p_buffer
op	55:30	0:0	8	[
water	55:31	0:0	8	i
op	55:32	0:0	8	]
op	55:34	0:0	8	=
water	55:36	0:0	8	0
water	55:37	0:0	8	xff
water	55:40	0:0	8	;
water	56:12	0:0	8	}
water	57:8	0:0	6	}
else	58:8	69:8	4
stmts	59:8	69:8	5	
water	59:8	0:0	6	{
water	60:12	0:0	6	p_ts
op	60:16	0:0	6	->
water	60:18	0:0	6	p_buffer
op	60:26	0:0	6	[
water	60:27	0:0	6	4
op	60:28	0:0	6	]
op	60:30	0:0	6	=
water	60:32	0:0	6	i_stuffing
op	60:43	0:0	6	-
water	60:45	0:0	6	1
water	60:46	0:0	6	;
if	61:12	68:12	6	(i_stuffing > 1)
cond	61:16	61:29	7	i_stuffing > 1
water	61:16	0:0	8	i_stuffing
op	61:27	0:0	8	>
water	61:29	0:0	8	1
stmts	62:12	68:12	7	
water	62:12	0:0	8	{
water	63:16	0:0	8	p_ts
op	63:20	0:0	8	->
water	63:22	0:0	8	p_buffer
op	63:30	0:0	8	[
water	63:31	0:0	8	5
op	63:32	0:0	8	]
op	63:34	0:0	8	=
water	63:36	0:0	8	0
water	63:37	0:0	8	x00
water	63:40	0:0	8	;
for	64:16	67:16	8	( int i = 6 ;i < 6 + i_stuffing - 2;i ++)
forinit	0:0	64:30	9	 int i = 6 ;
decl	64:21	64:30	10	int	i
op	64:27	0:0	10	=
water	64:29	0:0	10	6
cond	64:32	64:53	9	i < 6 + i_stuffing - 2
water	64:32	0:0	10	i
op	64:34	0:0	10	<
water	64:36	0:0	10	6
op	64:38	0:0	10	+
water	64:40	0:0	10	i_stuffing
op	64:51	0:0	10	-
water	64:53	0:0	10	2
forexpr	64:56	64:57	9	i ++
water	64:56	0:0	10	i
op	64:57	0:0	10	++
stmts	65:16	67:16	9	
water	65:16	0:0	10	{
water	66:20	0:0	10	p_ts
op	66:24	0:0	10	->
water	66:26	0:0	10	p_buffer
op	66:34	0:0	10	[
water	66:35	0:0	10	i
op	66:36	0:0	10	]
op	66:38	0:0	10	=
water	66:40	0:0	10	0
water	66:41	0:0	10	xff
water	66:44	0:0	10	;
water	67:16	0:0	10	}
water	68:12	0:0	8	}
water	69:8	0:0	6	}
water	70:4	0:0	4	}
call	72:4	73:62	2	memcpy
arg	72:12	72:44	3	&p_ts->p_buffer[188-i_payload]
op	72:12	0:0	4	&
water	72:13	0:0	4	p_ts
op	72:17	0:0	4	->
water	72:19	0:0	4	p_buffer
op	72:27	0:0	4	[
water	72:28	0:0	4	188
op	72:32	0:0	4	-
water	72:34	0:0	4	i_payload
op	72:43	0:0	4	]
arg	73:12	73:50	3	&p_pes->p_buffer[p_stream->i_pes_used]
op	73:12	0:0	4	&
water	73:13	0:0	4	p_pes
op	73:18	0:0	4	->
water	73:20	0:0	4	p_buffer
op	73:28	0:0	4	[
water	73:29	0:0	4	p_stream
op	73:37	0:0	4	->
water	73:39	0:0	4	i_pes_used
op	73:49	0:0	4	]
arg	73:52	73:62	3	i_payload
water	73:52	0:0	4	i_payload
water	73:63	0:0	2	;
water	74:4	0:0	2	p_stream
op	74:12	0:0	2	->
water	74:14	0:0	2	i_pes_used
op	74:25	0:0	2	+=
water	74:28	0:0	2	i_payload
water	74:37	0:0	2	;
water	75:4	0:0	2	p_stream
op	75:12	0:0	2	->
water	75:14	0:0	2	i_pes_dts
op	75:24	0:0	2	=
water	75:26	0:0	2	p_pes
op	75:31	0:0	2	->
water	75:33	0:0	2	i_dts
op	75:39	0:0	2	+
water	75:41	0:0	2	p_pes
op	75:46	0:0	2	->
water	75:48	0:0	2	i_length
op	75:57	0:0	2	*
water	76:8	0:0	2	p_stream
op	76:16	0:0	2	->
water	76:18	0:0	2	i_pes_used
op	76:29	0:0	2	/
water	76:31	0:0	2	p_pes
op	76:36	0:0	2	->
water	76:38	0:0	2	i_buffer
water	76:46	0:0	2	;
water	77:4	0:0	2	p_stream
op	77:12	0:0	2	->
water	77:14	0:0	2	i_pes_length
op	77:27	0:0	2	-=
water	77:30	0:0	2	p_pes
op	77:35	0:0	2	->
water	77:37	0:0	2	i_length
op	77:46	0:0	2	*
water	77:48	0:0	2	i_payload
op	77:58	0:0	2	/
water	77:60	0:0	2	p_pes
op	77:65	0:0	2	->
water	77:67	0:0	2	i_buffer
water	77:75	0:0	2	;
if	78:4	97:4	2	(p_stream -> i_pes_used >= ( int ) p_pes -> i_buffer)
cond	78:8	78:44	3	p_stream -> i_pes_used >= ( int ) p_pes -> i_buffer
water	78:8	0:0	4	p_stream
op	78:16	0:0	4	->
water	78:18	0:0	4	i_pes_used
op	78:29	0:0	4	>=
water	78:32	0:0	4	(
water	78:33	0:0	4	int
water	78:36	0:0	4	)
water	78:37	0:0	4	p_pes
op	78:42	0:0	4	->
water	78:44	0:0	4	i_buffer
stmts	79:4	97:4	3	
water	79:4	0:0	4	{
call	80:8	80:60	4	block_Release
arg	80:22	80:60	5	BufferChainGet(&p_stream->chain_pes)
call	80:22	80:59	6	BufferChainGet
arg	80:38	80:59	7	&p_stream->chain_pes
op	80:38	0:0	8	&
water	80:39	0:0	8	p_stream
op	80:47	0:0	8	->
water	80:49	0:0	8	chain_pes
water	80:61	0:0	4	;
water	81:8	0:0	4	p_pes
op	81:14	0:0	4	=
water	81:16	0:0	4	p_stream
op	81:24	0:0	4	->
water	81:26	0:0	4	chain_pes
op	81:35	0:0	4	.
water	81:36	0:0	4	p_first
water	81:43	0:0	4	;
water	82:8	0:0	4	p_stream
op	82:16	0:0	4	->
water	82:18	0:0	4	i_pes_length
op	82:31	0:0	4	=
water	82:33	0:0	4	0
water	82:34	0:0	4	;
if	83:8	91:8	4	(p_pes)
cond	83:12	83:12	5	p_pes
water	83:12	0:0	6	p_pes
stmts	84:8	91:8	5	
water	84:8	0:0	6	{
water	85:12	0:0	6	p_stream
op	85:20	0:0	6	->
water	85:22	0:0	6	i_pes_dts
op	85:32	0:0	6	=
water	85:34	0:0	6	p_pes
op	85:39	0:0	6	->
water	85:41	0:0	6	i_dts
water	85:46	0:0	6	;
while	86:12	90:12	6	(p_pes)
cond	86:19	86:19	7	p_pes
water	86:19	0:0	8	p_pes
stmts	87:12	90:12	7	
water	87:12	0:0	8	{
water	88:16	0:0	8	p_stream
op	88:24	0:0	8	->
water	88:26	0:0	8	i_pes_length
op	88:39	0:0	8	+=
water	88:42	0:0	8	p_pes
op	88:47	0:0	8	->
water	88:49	0:0	8	i_length
water	88:57	0:0	8	;
water	89:16	0:0	8	p_pes
op	89:22	0:0	8	=
water	89:24	0:0	8	p_pes
op	89:29	0:0	8	->
water	89:31	0:0	8	p_next
water	89:37	0:0	8	;
water	90:12	0:0	8	}
water	91:8	0:0	6	}
else	92:8	95:8	4
stmts	93:8	95:8	5	
water	93:8	0:0	6	{
water	94:12	0:0	6	p_stream
op	94:20	0:0	6	->
water	94:22	0:0	6	i_pes_dts
op	94:32	0:0	6	=
water	94:34	0:0	6	0
water	94:35	0:0	6	;
water	95:8	0:0	6	}
water	96:8	0:0	4	p_stream
op	96:16	0:0	4	->
water	96:18	0:0	4	i_pes_used
op	96:29	0:0	4	=
water	96:31	0:0	4	0
water	96:32	0:0	4	;
water	97:4	0:0	4	}
return	98:4	98:15	2	p_ts
water	98:11	0:0	3	p_ts
