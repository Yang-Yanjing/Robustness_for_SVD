func	2:0	65:0	0	static block_t *	Encode
params	2:22	0:0	1	
param	2:24	2:40	2	encoder_t *	p_enc
param	2:42	2:62	2	block_t *	p_aout_buf
stmnts	0:0	64:18	1	
decl	4:4	4:39	2	encoder_sys_t	*p_sys
op	4:25	0:0	2	=
water	4:27	0:0	2	p_enc
op	4:32	0:0	2	->
water	4:34	0:0	2	p_sys
decl	5:4	5:27	2	block_t	*p_chain
op	5:21	0:0	2	=
water	5:23	0:0	2	NULL
if	6:4	22:4	2	(unlikely (! p_aout_buf ))
cond	6:8	6:30	3	unlikely (! p_aout_buf )
call	6:8	6:30	4	unlikely
arg	6:18	6:30	5	!p_aout_buf
op	6:18	0:0	6	!
water	6:19	0:0	6	p_aout_buf
stmts	6:34	22:4	3	
water	6:34	0:0	4	{
decl	7:8	7:22	4	int	i_used
op	7:19	0:0	4	=
water	7:21	0:0	4	0
decl	8:8	8:24	4	block_t	*p_block
water	9:8	0:0	4	i_used
op	9:15	0:0	4	=
call	9:17	10:74	4	twolame_encode_flush
arg	9:39	9:55	5	p_sys->p_twolame
water	9:39	0:0	6	p_sys
op	9:44	0:0	6	->
water	9:46	0:0	6	p_twolame
arg	10:32	10:51	5	p_sys->p_out_buffer
water	10:32	0:0	6	p_sys
op	10:37	0:0	6	->
water	10:39	0:0	6	p_out_buffer
arg	10:53	10:74	5	MAX_CODED_FRAME_SIZE
water	10:53	0:0	6	MAX_CODED_FRAME_SIZE
water	10:75	0:0	4	;
if	11:8	12:23	4	(i_used <= 0)
cond	11:12	11:22	5	i_used <= 0
water	11:12	0:0	6	i_used
op	11:19	0:0	6	<=
water	11:22	0:0	6	0
stmts	12:12	12:23	5	
return	12:12	12:23	6	NULL
water	12:19	0:0	7	NULL
water	13:8	0:0	4	p_block
op	13:16	0:0	4	=
call	13:18	13:38	4	block_Alloc
arg	13:31	13:38	5	i_used
water	13:31	0:0	6	i_used
water	13:39	0:0	4	;
if	14:8	15:23	4	(! p_block)
cond	14:12	14:13	5	! p_block
op	14:12	0:0	6	!
water	14:13	0:0	6	p_block
stmts	15:12	15:23	5	
return	15:12	15:23	6	NULL
water	15:19	0:0	7	NULL
call	16:8	16:63	4	memcpy
arg	16:16	16:33	5	p_block->p_buffer
water	16:16	0:0	6	p_block
op	16:23	0:0	6	->
water	16:25	0:0	6	p_buffer
arg	16:35	16:54	5	p_sys->p_out_buffer
water	16:35	0:0	6	p_sys
op	16:40	0:0	6	->
water	16:42	0:0	6	p_out_buffer
arg	16:56	16:63	5	i_used
water	16:56	0:0	6	i_used
water	16:64	0:0	4	;
water	17:8	0:0	4	p_block
op	17:15	0:0	4	->
water	17:17	0:0	4	i_length
op	17:26	0:0	4	=
water	17:28	0:0	4	(
water	17:29	0:0	4	mtime_t
water	17:36	0:0	4	)
water	17:37	0:0	4	1000000
op	17:45	0:0	4	*
water	18:16	0:0	4	(
water	18:17	0:0	4	mtime_t
water	18:24	0:0	4	)
water	18:25	0:0	4	MPEG_FRAME_SIZE
op	18:41	0:0	4	/
water	18:43	0:0	4	(
water	18:44	0:0	4	mtime_t
water	18:51	0:0	4	)
water	18:52	0:0	4	p_enc
op	18:57	0:0	4	->
water	18:59	0:0	4	fmt_out
op	18:66	0:0	4	.
water	18:67	0:0	4	audio
op	18:72	0:0	4	.
water	18:73	0:0	4	i_rate
water	18:79	0:0	4	;
water	19:8	0:0	4	p_block
op	19:15	0:0	4	->
water	19:17	0:0	4	i_dts
op	19:23	0:0	4	=
water	19:25	0:0	4	p_block
op	19:32	0:0	4	->
water	19:34	0:0	4	i_pts
op	19:40	0:0	4	=
water	19:42	0:0	4	p_sys
op	19:47	0:0	4	->
water	19:49	0:0	4	i_pts
water	19:54	0:0	4	;
water	20:8	0:0	4	p_sys
op	20:13	0:0	4	->
water	20:15	0:0	4	i_pts
op	20:21	0:0	4	+=
water	20:24	0:0	4	p_block
op	20:31	0:0	4	->
water	20:33	0:0	4	i_length
water	20:41	0:0	4	;
return	21:8	21:22	4	p_block
water	21:15	0:0	5	p_block
water	22:4	0:0	4	}
decl	23:4	23:55	2	int16_t	*p_buffer
op	23:22	0:0	2	=
water	23:24	0:0	2	(
water	23:25	0:0	2	int16_t
op	23:33	0:0	2	*
water	23:34	0:0	2	)
water	23:35	0:0	2	p_aout_buf
op	23:45	0:0	2	->
water	23:47	0:0	2	p_buffer
decl	24:4	24:47	2	int	i_nb_samples
op	24:21	0:0	2	=
water	24:23	0:0	2	p_aout_buf
op	24:33	0:0	2	->
water	24:35	0:0	2	i_nb_samples
water	25:4	0:0	2	p_sys
op	25:9	0:0	2	->
water	25:11	0:0	2	i_pts
op	25:17	0:0	2	=
water	25:19	0:0	2	p_aout_buf
op	25:29	0:0	2	->
water	25:31	0:0	2	i_pts
op	25:37	0:0	2	-
water	26:16	0:0	2	(
water	26:17	0:0	2	mtime_t
water	26:24	0:0	2	)
water	26:25	0:0	2	1000000
op	26:33	0:0	2	*
water	26:35	0:0	2	(
water	26:36	0:0	2	mtime_t
water	26:43	0:0	2	)
water	26:44	0:0	2	p_sys
op	26:49	0:0	2	->
water	26:51	0:0	2	i_nb_samples
op	26:64	0:0	2	/
water	27:16	0:0	2	(
water	27:17	0:0	2	mtime_t
water	27:24	0:0	2	)
water	27:25	0:0	2	p_enc
op	27:30	0:0	2	->
water	27:32	0:0	2	fmt_out
op	27:39	0:0	2	.
water	27:40	0:0	2	audio
op	27:45	0:0	2	.
water	27:46	0:0	2	i_rate
water	27:52	0:0	2	;
while	28:4	58:4	2	(p_sys -> i_nb_samples + i_nb_samples >= MPEG_FRAME_SIZE)
cond	28:12	28:50	3	p_sys -> i_nb_samples + i_nb_samples >= MPEG_FRAME_SIZE
water	28:12	0:0	4	p_sys
op	28:17	0:0	4	->
water	28:19	0:0	4	i_nb_samples
op	28:32	0:0	4	+
water	28:34	0:0	4	i_nb_samples
op	28:47	0:0	4	>=
water	28:50	0:0	4	MPEG_FRAME_SIZE
stmts	29:4	58:4	3	
water	29:4	0:0	4	{
decl	30:8	30:18	4	int	i_used
decl	31:8	31:24	4	block_t	*p_block
call	32:8	32:74	4	Bufferize
arg	32:19	32:24	5	p_enc
water	32:19	0:0	6	p_enc
arg	32:26	32:34	5	p_buffer
water	32:26	0:0	6	p_buffer
arg	32:36	32:74	5	MPEG_FRAME_SIZE-p_sys->i_nb_samples
water	32:36	0:0	6	MPEG_FRAME_SIZE
op	32:52	0:0	6	-
water	32:54	0:0	6	p_sys
op	32:59	0:0	6	->
water	32:61	0:0	6	i_nb_samples
water	32:75	0:0	4	;
water	33:8	0:0	4	i_nb_samples
op	33:21	0:0	4	-=
water	33:24	0:0	4	MPEG_FRAME_SIZE
op	33:40	0:0	4	-
water	33:42	0:0	4	p_sys
op	33:47	0:0	4	->
water	33:49	0:0	4	i_nb_samples
water	33:61	0:0	4	;
water	34:8	0:0	4	p_buffer
op	34:17	0:0	4	+=
water	34:20	0:0	4	(
water	34:21	0:0	4	MPEG_FRAME_SIZE
op	34:37	0:0	4	-
water	34:39	0:0	4	p_sys
op	34:44	0:0	4	->
water	34:46	0:0	4	i_nb_samples
water	34:58	0:0	4	)
op	34:60	0:0	4	*
water	34:62	0:0	4	2
water	34:63	0:0	4	;
water	35:8	0:0	4	i_used
op	35:15	0:0	4	=
call	35:17	37:73	4	twolame_encode_buffer_interleaved
arg	35:52	35:68	5	p_sys->p_twolame
water	35:52	0:0	6	p_sys
op	35:57	0:0	6	->
water	35:59	0:0	6	p_twolame
arg	36:31	36:46	5	p_sys->p_buffer
water	36:31	0:0	6	p_sys
op	36:36	0:0	6	->
water	36:38	0:0	6	p_buffer
arg	36:48	36:63	5	MPEG_FRAME_SIZE
water	36:48	0:0	6	MPEG_FRAME_SIZE
arg	37:31	37:50	5	p_sys->p_out_buffer
water	37:31	0:0	6	p_sys
op	37:36	0:0	6	->
water	37:38	0:0	6	p_out_buffer
arg	37:52	37:73	5	MAX_CODED_FRAME_SIZE
water	37:52	0:0	6	MAX_CODED_FRAME_SIZE
water	37:74	0:0	4	;
if	39:8	43:8	4	(i_used < 0)
cond	39:12	39:21	5	i_used < 0
water	39:12	0:0	6	i_used
op	39:19	0:0	6	<
water	39:21	0:0	6	0
stmts	40:8	43:8	5	
water	40:8	0:0	6	{
call	41:12	41:56	6	msg_Err
arg	41:21	41:26	7	p_enc
water	41:21	0:0	8	p_enc
arg	41:28	41:47	7	"encoder error: %d"
water	41:28	0:0	8	"encoder error: %d"
arg	41:49	41:56	7	i_used
water	41:49	0:0	8	i_used
water	41:57	0:0	6	;
break	42:12	42:17	6	
water	43:8	0:0	6	}
water	44:8	0:0	4	p_sys
op	44:13	0:0	4	->
water	44:15	0:0	4	i_nb_samples
op	44:28	0:0	4	=
water	44:30	0:0	4	0
water	44:31	0:0	4	;
water	45:8	0:0	4	p_block
op	45:16	0:0	4	=
call	45:18	45:38	4	block_Alloc
arg	45:31	45:38	5	i_used
water	45:31	0:0	6	i_used
water	45:39	0:0	4	;
if	46:8	51:8	4	(! p_block)
cond	46:12	46:13	5	! p_block
op	46:12	0:0	6	!
water	46:13	0:0	6	p_block
stmts	47:8	51:8	5	
water	47:8	0:0	6	{
if	48:12	49:45	6	(p_chain)
cond	48:16	48:16	7	p_chain
water	48:16	0:0	8	p_chain
stmts	49:16	49:45	7	
call	49:16	49:44	8	block_ChainRelease
arg	49:36	49:44	9	p_chain
water	49:36	0:0	10	p_chain
water	49:45	0:0	8	;
return	50:12	50:23	6	NULL
water	50:19	0:0	7	NULL
water	51:8	0:0	6	}
call	52:8	52:63	4	memcpy
arg	52:16	52:33	5	p_block->p_buffer
water	52:16	0:0	6	p_block
op	52:23	0:0	6	->
water	52:25	0:0	6	p_buffer
arg	52:35	52:54	5	p_sys->p_out_buffer
water	52:35	0:0	6	p_sys
op	52:40	0:0	6	->
water	52:42	0:0	6	p_out_buffer
arg	52:56	52:63	5	i_used
water	52:56	0:0	6	i_used
water	52:64	0:0	4	;
water	53:8	0:0	4	p_block
op	53:15	0:0	4	->
water	53:17	0:0	4	i_length
op	53:26	0:0	4	=
water	53:28	0:0	4	(
water	53:29	0:0	4	mtime_t
water	53:36	0:0	4	)
water	53:37	0:0	4	1000000
op	53:45	0:0	4	*
water	54:16	0:0	4	(
water	54:17	0:0	4	mtime_t
water	54:24	0:0	4	)
water	54:25	0:0	4	MPEG_FRAME_SIZE
op	54:41	0:0	4	/
water	54:43	0:0	4	(
water	54:44	0:0	4	mtime_t
water	54:51	0:0	4	)
water	54:52	0:0	4	p_enc
op	54:57	0:0	4	->
water	54:59	0:0	4	fmt_out
op	54:66	0:0	4	.
water	54:67	0:0	4	audio
op	54:72	0:0	4	.
water	54:73	0:0	4	i_rate
water	54:79	0:0	4	;
water	55:8	0:0	4	p_block
op	55:15	0:0	4	->
water	55:17	0:0	4	i_dts
op	55:23	0:0	4	=
water	55:25	0:0	4	p_block
op	55:32	0:0	4	->
water	55:34	0:0	4	i_pts
op	55:40	0:0	4	=
water	55:42	0:0	4	p_sys
op	55:47	0:0	4	->
water	55:49	0:0	4	i_pts
water	55:54	0:0	4	;
water	56:8	0:0	4	p_sys
op	56:13	0:0	4	->
water	56:15	0:0	4	i_pts
op	56:21	0:0	4	+=
water	56:24	0:0	4	p_block
op	56:31	0:0	4	->
water	56:33	0:0	4	i_length
water	56:41	0:0	4	;
call	57:8	57:45	4	block_ChainAppend
arg	57:27	57:35	5	&p_chain
op	57:27	0:0	6	&
water	57:28	0:0	6	p_chain
arg	57:37	57:45	5	p_block
water	57:37	0:0	6	p_block
water	57:46	0:0	4	;
water	58:4	0:0	4	}
if	59:4	63:4	2	(i_nb_samples)
cond	59:9	59:9	3	i_nb_samples
water	59:9	0:0	4	i_nb_samples
stmts	60:4	63:4	3	
water	60:4	0:0	4	{
call	61:8	61:49	4	Bufferize
arg	61:19	61:24	5	p_enc
water	61:19	0:0	6	p_enc
arg	61:26	61:34	5	p_buffer
water	61:26	0:0	6	p_buffer
arg	61:36	61:49	5	i_nb_samples
water	61:36	0:0	6	i_nb_samples
water	61:50	0:0	4	;
water	62:8	0:0	4	p_sys
op	62:13	0:0	4	->
water	62:15	0:0	4	i_nb_samples
op	62:28	0:0	4	+=
water	62:31	0:0	4	i_nb_samples
water	62:43	0:0	4	;
water	63:4	0:0	4	}
return	64:4	64:18	2	p_chain
water	64:11	0:0	3	p_chain
