func	2:0	75:0	0	static int	Open
params	2:15	0:0	1	
param	2:17	2:38	2	vlc_object_t *	p_this
stmnts	0:0	74:22	1	
decl	4:4	4:62	2	sout_access_out_t	*p_access
op	4:34	0:0	2	=
water	4:36	0:0	2	(
water	4:37	0:0	2	sout_access_out_t
op	4:54	0:0	2	*
water	4:55	0:0	2	)
water	4:56	0:0	2	p_this
decl	5:4	5:32	2	sout_access_out_sys_t	*p_sys
decl	6:4	6:17	2	char	*psz_idx
call	7:4	7:85	2	config_ChainParse
arg	7:23	7:31	3	p_access
water	7:23	0:0	4	p_access
arg	7:33	7:48	3	SOUT_CFG_PREFIX
water	7:33	0:0	4	SOUT_CFG_PREFIX
arg	7:50	7:67	3	ppsz_sout_options
water	7:50	0:0	4	ppsz_sout_options
arg	7:69	7:85	3	p_access->p_cfg
water	7:69	0:0	4	p_access
op	7:77	0:0	4	->
water	7:79	0:0	4	p_cfg
water	7:86	0:0	2	;
if	8:4	12:4	2	(! p_access -> psz_path)
cond	8:8	8:19	3	! p_access -> psz_path
op	8:8	0:0	4	!
water	8:9	0:0	4	p_access
op	8:17	0:0	4	->
water	8:19	0:0	4	psz_path
stmts	9:4	12:4	3	
water	9:4	0:0	4	{
call	10:8	10:52	4	msg_Err
arg	10:17	10:25	5	p_access
water	10:17	0:0	6	p_access
arg	10:27	10:52	5	"no file name specified"
water	10:27	0:0	6	"no file name specified"
water	10:53	0:0	4	;
return	11:8	11:27	4	VLC_EGENERIC
water	11:15	0:0	5	VLC_EGENERIC
water	12:4	0:0	4	}
if	13:4	14:25	2	(unlikely (! ( p_sys =calloc (1 ,sizeof ( * p_sys ) ) ) ))
cond	13:8	13:62	3	unlikely (! ( p_sys =calloc (1 ,sizeof ( * p_sys ) ) ) )
call	13:8	13:62	4	unlikely
arg	13:18	13:62	5	!(p_sys=calloc(1,sizeof(*p_sys)))
op	13:18	0:0	6	!
water	13:19	0:0	6	(
water	13:21	0:0	6	p_sys
op	13:27	0:0	6	=
call	13:29	13:58	6	calloc
arg	13:38	13:39	7	1
water	13:38	0:0	8	1
arg	13:41	13:58	7	sizeof(*p_sys)
op	13:41	0:0	8	sizeof
water	13:47	0:0	8	(
op	13:49	0:0	8	*
water	13:50	0:0	8	p_sys
water	13:56	0:0	8	)
water	13:60	0:0	6	)
stmts	14:8	14:25	3	
return	14:8	14:25	4	VLC_ENOMEM
water	14:15	0:0	5	VLC_ENOMEM
water	15:4	0:0	2	p_sys
op	15:9	0:0	2	->
water	15:11	0:0	2	i_seglen
op	15:20	0:0	2	=
call	15:22	15:73	2	var_GetInteger
arg	15:38	15:46	3	p_access
water	15:38	0:0	4	p_access
arg	15:48	15:73	3	SOUT_CFG_PREFIX"seglen"
water	15:48	0:0	4	SOUT_CFG_PREFIX
water	15:64	0:0	4	"seglen"
water	15:74	0:0	2	;
water	17:4	0:0	2	p_sys
op	17:9	0:0	2	->
water	17:11	0:0	2	i_seglenm
op	17:21	0:0	2	=
water	17:23	0:0	2	CLOCK_FREQ
op	17:34	0:0	2	*
water	17:36	0:0	2	p_sys
op	17:41	0:0	2	->
water	17:43	0:0	2	i_seglen
water	17:51	0:0	2	;
water	18:4	0:0	2	p_sys
op	18:9	0:0	2	->
water	18:11	0:0	2	block_buffer
op	18:24	0:0	2	=
water	18:26	0:0	2	NULL
water	18:30	0:0	2	;
water	19:4	0:0	2	p_sys
op	19:9	0:0	2	->
water	19:11	0:0	2	last_block_buffer
op	19:29	0:0	2	=
op	19:31	0:0	2	&
water	19:32	0:0	2	p_sys
op	19:37	0:0	2	->
water	19:39	0:0	2	block_buffer
water	19:51	0:0	2	;
water	20:4	0:0	2	p_sys
op	20:9	0:0	2	->
water	20:11	0:0	2	i_numsegs
op	20:21	0:0	2	=
call	20:23	20:75	2	var_GetInteger
arg	20:39	20:47	3	p_access
water	20:39	0:0	4	p_access
arg	20:49	20:75	3	SOUT_CFG_PREFIX"numsegs"
water	20:49	0:0	4	SOUT_CFG_PREFIX
water	20:65	0:0	4	"numsegs"
water	20:76	0:0	2	;
water	21:4	0:0	2	p_sys
op	21:9	0:0	2	->
water	21:11	0:0	2	i_initial_segment
op	21:29	0:0	2	=
call	21:31	21:98	2	var_GetInteger
arg	21:47	21:55	3	p_access
water	21:47	0:0	4	p_access
arg	21:57	21:98	3	SOUT_CFG_PREFIX"initial-segment-number"
water	21:57	0:0	4	SOUT_CFG_PREFIX
water	21:73	0:0	4	"initial-segment-number"
water	21:99	0:0	2	;
water	22:4	0:0	2	p_sys
op	22:9	0:0	2	->
water	22:11	0:0	2	b_splitanywhere
op	22:27	0:0	2	=
call	22:29	22:84	2	var_GetBool
arg	22:42	22:50	3	p_access
water	22:42	0:0	4	p_access
arg	22:52	22:84	3	SOUT_CFG_PREFIX"splitanywhere"
water	22:52	0:0	4	SOUT_CFG_PREFIX
water	22:68	0:0	4	"splitanywhere"
water	22:85	0:0	2	;
water	23:4	0:0	2	p_sys
op	23:9	0:0	2	->
water	23:11	0:0	2	b_delsegs
op	23:21	0:0	2	=
call	23:23	23:72	2	var_GetBool
arg	23:36	23:44	3	p_access
water	23:36	0:0	4	p_access
arg	23:46	23:72	3	SOUT_CFG_PREFIX"delsegs"
water	23:46	0:0	4	SOUT_CFG_PREFIX
water	23:62	0:0	4	"delsegs"
water	23:73	0:0	2	;
water	24:4	0:0	2	p_sys
op	24:9	0:0	2	->
water	24:11	0:0	2	b_ratecontrol
op	24:25	0:0	2	=
call	24:27	24:79	2	var_GetBool
arg	24:40	24:48	3	p_access
water	24:40	0:0	4	p_access
arg	24:50	24:79	3	SOUT_CFG_PREFIX"ratecontrol"
water	24:50	0:0	4	SOUT_CFG_PREFIX
water	24:66	0:0	4	"ratecontrol"
water	24:81	0:0	2	;
water	25:4	0:0	2	p_sys
op	25:9	0:0	2	->
water	25:11	0:0	2	b_caching
op	25:21	0:0	2	=
call	25:23	25:71	2	var_GetBool
arg	25:36	25:44	3	p_access
water	25:36	0:0	4	p_access
arg	25:46	25:71	3	SOUT_CFG_PREFIX"caching"
water	25:46	0:0	4	SOUT_CFG_PREFIX
water	25:62	0:0	4	"caching"
water	25:73	0:0	2	;
water	26:4	0:0	2	p_sys
op	26:9	0:0	2	->
water	26:11	0:0	2	b_generate_iv
op	26:25	0:0	2	=
call	26:27	26:79	2	var_GetBool
arg	26:40	26:48	3	p_access
water	26:40	0:0	4	p_access
arg	26:50	26:79	3	SOUT_CFG_PREFIX"generate-iv"
water	26:50	0:0	4	SOUT_CFG_PREFIX
water	26:66	0:0	4	"generate-iv"
water	26:81	0:0	2	;
water	27:4	0:0	2	p_sys
op	27:9	0:0	2	->
water	27:11	0:0	2	b_segment_has_data
op	27:30	0:0	2	=
water	27:32	0:0	2	false
water	27:37	0:0	2	;
water	28:4	0:0	2	p_sys
op	28:9	0:0	2	->
water	28:11	0:0	2	segments_t
op	28:22	0:0	2	=
call	28:24	28:38	2	vlc_array_new
water	28:39	0:0	2	;
water	29:4	0:0	2	p_sys
op	29:9	0:0	2	->
water	29:11	0:0	2	stuffing_size
op	29:25	0:0	2	=
water	29:27	0:0	2	0
water	29:28	0:0	2	;
water	30:4	0:0	2	p_sys
op	30:9	0:0	2	->
water	30:11	0:0	2	i_opendts
op	30:21	0:0	2	=
water	30:23	0:0	2	VLC_TS_INVALID
water	30:37	0:0	2	;
water	31:4	0:0	2	p_sys
op	31:9	0:0	2	->
water	31:11	0:0	2	i_dts_offset
op	31:25	0:0	2	=
water	31:27	0:0	2	0
water	31:28	0:0	2	;
water	32:4	0:0	2	p_sys
op	32:9	0:0	2	->
water	32:11	0:0	2	psz_indexPath
op	32:25	0:0	2	=
water	32:27	0:0	2	NULL
water	32:31	0:0	2	;
water	33:4	0:0	2	psz_idx
op	33:12	0:0	2	=
call	33:14	33:71	2	var_GetNonEmptyString
arg	33:37	33:45	3	p_access
water	33:37	0:0	4	p_access
arg	33:47	33:71	3	SOUT_CFG_PREFIX"index"
water	33:47	0:0	4	SOUT_CFG_PREFIX
water	33:63	0:0	4	"index"
water	33:72	0:0	2	;
if	34:4	47:4	2	(psz_idx)
cond	34:9	34:9	3	psz_idx
water	34:9	0:0	4	psz_idx
stmts	35:4	47:4	3	
water	35:4	0:0	4	{
decl	36:8	36:21	4	char	*psz_tmp
water	37:8	0:0	4	psz_tmp
op	37:16	0:0	4	=
call	37:18	37:43	4	str_format_time
arg	37:35	37:43	5	psz_idx
water	37:35	0:0	6	psz_idx
water	37:44	0:0	4	;
call	38:8	38:22	4	free
arg	38:14	38:22	5	psz_idx
water	38:14	0:0	6	psz_idx
water	38:23	0:0	4	;
if	39:8	43:8	4	(! psz_tmp)
cond	39:13	39:14	5	! psz_tmp
op	39:13	0:0	6	!
water	39:14	0:0	6	psz_tmp
stmts	40:8	43:8	5	
water	40:8	0:0	6	{
call	41:12	41:24	6	free
arg	41:18	41:24	7	p_sys
water	41:18	0:0	8	p_sys
water	41:25	0:0	6	;
return	42:12	42:29	6	VLC_ENOMEM
water	42:19	0:0	7	VLC_ENOMEM
water	43:8	0:0	6	}
call	44:8	44:31	4	path_sanitize
arg	44:23	44:31	5	psz_tmp
water	44:23	0:0	6	psz_tmp
water	44:32	0:0	4	;
water	45:8	0:0	4	p_sys
op	45:13	0:0	4	->
water	45:15	0:0	4	psz_indexPath
op	45:29	0:0	4	=
water	45:31	0:0	4	psz_tmp
water	45:38	0:0	4	;
call	46:8	46:41	4	vlc_unlink
arg	46:20	46:41	5	p_sys->psz_indexPath
water	46:20	0:0	6	p_sys
op	46:25	0:0	6	->
water	46:27	0:0	6	psz_indexPath
water	46:42	0:0	4	;
water	47:4	0:0	4	}
water	48:4	0:0	2	p_sys
op	48:9	0:0	2	->
water	48:11	0:0	2	psz_indexUrl
op	48:24	0:0	2	=
call	48:26	48:87	2	var_GetNonEmptyString
arg	48:49	48:57	3	p_access
water	48:49	0:0	4	p_access
arg	48:59	48:87	3	SOUT_CFG_PREFIX"index-url"
water	48:59	0:0	4	SOUT_CFG_PREFIX
water	48:75	0:0	4	"index-url"
water	48:88	0:0	2	;
water	49:4	0:0	2	p_sys
op	49:9	0:0	2	->
water	49:11	0:0	2	psz_keyfile
op	49:24	0:0	2	=
call	49:26	49:90	2	var_GetNonEmptyString
arg	49:49	49:57	3	p_access
water	49:49	0:0	4	p_access
arg	49:59	49:90	3	SOUT_CFG_PREFIX"key-loadfile"
water	49:59	0:0	4	SOUT_CFG_PREFIX
water	49:75	0:0	4	"key-loadfile"
water	49:91	0:0	2	;
water	50:4	0:0	2	p_sys
op	50:9	0:0	2	->
water	50:11	0:0	2	key_uri
op	50:24	0:0	2	=
call	50:26	50:85	2	var_GetNonEmptyString
arg	50:49	50:57	3	p_access
water	50:49	0:0	4	p_access
arg	50:59	50:85	3	SOUT_CFG_PREFIX"key-uri"
water	50:59	0:0	4	SOUT_CFG_PREFIX
water	50:75	0:0	4	"key-uri"
water	50:86	0:0	2	;
water	51:4	0:0	2	p_access
op	51:12	0:0	2	->
water	51:14	0:0	2	p_sys
op	51:20	0:0	2	=
water	51:22	0:0	2	p_sys
water	51:27	0:0	2	;
if	52:4	59:4	2	(p_sys -> psz_keyfile && (LoadCryptFile (p_access ) < 0 ))
cond	52:8	52:62	3	p_sys -> psz_keyfile && (LoadCryptFile (p_access ) < 0 )
water	52:8	0:0	4	p_sys
op	52:13	0:0	4	->
water	52:15	0:0	4	psz_keyfile
op	52:27	0:0	4	&&
water	52:30	0:0	4	(
call	52:32	52:56	4	LoadCryptFile
arg	52:47	52:56	5	p_access
water	52:47	0:0	6	p_access
op	52:58	0:0	4	<
water	52:60	0:0	4	0
water	52:62	0:0	4	)
stmts	53:4	59:4	3	
water	53:4	0:0	4	{
call	54:8	54:34	4	free
arg	54:14	54:34	5	p_sys->psz_indexUrl
water	54:14	0:0	6	p_sys
op	54:19	0:0	6	->
water	54:21	0:0	6	psz_indexUrl
water	54:35	0:0	4	;
call	55:8	55:35	4	free
arg	55:14	55:35	5	p_sys->psz_indexPath
water	55:14	0:0	6	p_sys
op	55:19	0:0	6	->
water	55:21	0:0	6	psz_indexPath
water	55:36	0:0	4	;
call	56:8	56:20	4	free
arg	56:14	56:20	5	p_sys
water	56:14	0:0	6	p_sys
water	56:21	0:0	4	;
call	57:8	57:52	4	msg_Err
arg	57:17	57:25	5	p_access
water	57:17	0:0	6	p_access
arg	57:27	57:52	5	"Encryption init failed"
water	57:27	0:0	6	"Encryption init failed"
water	57:53	0:0	4	;
return	58:8	58:27	4	VLC_EGENERIC
water	58:15	0:0	5	VLC_EGENERIC
water	59:4	0:0	4	}
else	60:4	67:4	2
stmts	60:9	67:4	3	
if	60:9	67:4	4	(! p_sys -> psz_keyfile && (CryptSetup (p_access ,NULL ) < 0 ))
cond	60:13	60:71	5	! p_sys -> psz_keyfile && (CryptSetup (p_access ,NULL ) < 0 )
op	60:13	0:0	6	!
water	60:14	0:0	6	p_sys
op	60:19	0:0	6	->
water	60:21	0:0	6	psz_keyfile
op	60:33	0:0	6	&&
water	60:36	0:0	6	(
call	60:38	60:65	6	CryptSetup
arg	60:50	60:58	7	p_access
water	60:50	0:0	8	p_access
arg	60:60	60:65	7	NULL
water	60:60	0:0	8	NULL
op	60:67	0:0	6	<
water	60:69	0:0	6	0
water	60:71	0:0	6	)
stmts	61:4	67:4	5	
water	61:4	0:0	6	{
call	62:8	62:34	6	free
arg	62:14	62:34	7	p_sys->psz_indexUrl
water	62:14	0:0	8	p_sys
op	62:19	0:0	8	->
water	62:21	0:0	8	psz_indexUrl
water	62:35	0:0	6	;
call	63:8	63:35	6	free
arg	63:14	63:35	7	p_sys->psz_indexPath
water	63:14	0:0	8	p_sys
op	63:19	0:0	8	->
water	63:21	0:0	8	psz_indexPath
water	63:36	0:0	6	;
call	64:8	64:20	6	free
arg	64:14	64:20	7	p_sys
water	64:14	0:0	8	p_sys
water	64:21	0:0	6	;
call	65:8	65:52	6	msg_Err
arg	65:17	65:25	7	p_access
water	65:17	0:0	8	p_access
arg	65:27	65:52	7	"Encryption init failed"
water	65:27	0:0	8	"Encryption init failed"
water	65:53	0:0	6	;
return	66:8	66:27	6	VLC_EGENERIC
water	66:15	0:0	7	VLC_EGENERIC
water	67:4	0:0	6	}
water	68:4	0:0	2	p_sys
op	68:9	0:0	2	->
water	68:11	0:0	2	i_handle
op	68:20	0:0	2	=
op	68:22	0:0	2	-
water	68:23	0:0	2	1
water	68:24	0:0	2	;
water	69:4	0:0	2	p_sys
op	69:9	0:0	2	->
water	69:11	0:0	2	i_segment
op	69:21	0:0	2	=
water	69:23	0:0	2	p_sys
op	69:28	0:0	2	->
water	69:30	0:0	2	i_initial_segment
op	69:48	0:0	2	>
water	69:50	0:0	2	0
water	69:52	0:0	2	?
water	69:54	0:0	2	p_sys
op	69:59	0:0	2	->
water	69:61	0:0	2	i_initial_segment
op	69:79	0:0	2	-
water	69:80	0:0	2	1
water	69:82	0:0	2	:
water	69:84	0:0	2	0
water	69:85	0:0	2	;
water	70:4	0:0	2	p_sys
op	70:9	0:0	2	->
water	70:11	0:0	2	psz_cursegPath
op	70:26	0:0	2	=
water	70:28	0:0	2	NULL
water	70:32	0:0	2	;
water	71:4	0:0	2	p_access
op	71:12	0:0	2	->
water	71:14	0:0	2	pf_write
op	71:23	0:0	2	=
water	71:25	0:0	2	Write
water	71:30	0:0	2	;
water	72:4	0:0	2	p_access
op	72:12	0:0	2	->
water	72:14	0:0	2	pf_seek
op	72:23	0:0	2	=
water	72:25	0:0	2	Seek
water	72:29	0:0	2	;
water	73:4	0:0	2	p_access
op	73:12	0:0	2	->
water	73:14	0:0	2	pf_control
op	73:25	0:0	2	=
water	73:27	0:0	2	Control
water	73:34	0:0	2	;
return	74:4	74:22	2	VLC_SUCCESS
water	74:11	0:0	3	VLC_SUCCESS
