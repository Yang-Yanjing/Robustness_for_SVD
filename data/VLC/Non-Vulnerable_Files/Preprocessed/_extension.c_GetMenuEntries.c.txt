func	2:0	85:0	0	static int	GetMenuEntries
params	2:25	0:0	1	
param	2:27	2:54	2	extensions_manager_t *	p_mgr
param	2:56	2:74	2	extension_t *	p_ext
param	3:20	3:40	2	char * * *	pppsz_titles
param	3:42	3:61	2	uint16_t * *	ppi_ids
stmnts	5:4	84:16	1	
call	5:4	5:34	2	assert
arg	5:12	5:34	3	*pppsz_titles==NULL
op	5:12	0:0	4	*
water	5:13	0:0	4	pppsz_titles
op	5:26	0:0	4	==
water	5:29	0:0	4	NULL
water	5:35	0:0	2	;
call	6:4	6:29	2	assert
arg	6:12	6:29	3	*ppi_ids==NULL
op	6:12	0:0	4	*
water	6:13	0:0	4	ppi_ids
op	6:21	0:0	4	==
water	6:24	0:0	4	NULL
water	6:30	0:0	2	;
if	7:4	11:4	2	(!IsActivated (p_mgr ,p_ext ))
cond	7:8	7:35	3	!IsActivated (p_mgr ,p_ext )
op	7:8	0:0	4	!
call	7:9	7:35	4	IsActivated
arg	7:22	7:27	5	p_mgr
water	7:22	0:0	6	p_mgr
arg	7:29	7:35	5	p_ext
water	7:29	0:0	6	p_ext
stmts	8:4	11:4	3	
water	8:4	0:0	4	{
call	9:8	9:74	4	msg_Dbg
arg	9:17	9:22	5	p_mgr
water	9:17	0:0	6	p_mgr
arg	9:24	9:74	5	"Can't get menu before activating the extension!"
water	9:24	0:0	6	"Can't get menu before activating the extension!"
water	9:75	0:0	4	;
return	10:8	10:27	4	VLC_EGENERIC
water	10:15	0:0	5	VLC_EGENERIC
water	11:4	0:0	4	}
if	12:4	16:4	2	(!LockExtension (p_ext ))
cond	12:8	12:30	3	!LockExtension (p_ext )
op	12:8	0:0	4	!
call	12:9	12:30	4	LockExtension
arg	12:24	12:30	5	p_ext
water	12:24	0:0	6	p_ext
stmts	13:4	16:4	3	
water	13:4	0:0	4	{
return	15:8	15:27	4	VLC_EGENERIC
water	15:15	0:0	5	VLC_EGENERIC
water	16:4	0:0	4	}
decl	17:4	17:28	2	int	i_ret
op	17:14	0:0	2	=
water	17:16	0:0	2	VLC_EGENERIC
decl	18:4	18:46	2	lua_State	*L
op	18:17	0:0	2	=
call	18:19	18:45	3	GetLuaState
arg	18:32	18:37	4	p_mgr
water	18:32	0:0	5	p_mgr
arg	18:39	18:45	4	p_ext
water	18:39	0:0	5	p_ext
if	19:4	23:4	2	(( p_ext -> p_sys -> i_capabilities & EXT_HAS_MENU ) == 0)
cond	19:8	19:59	3	( p_ext -> p_sys -> i_capabilities & EXT_HAS_MENU ) == 0
water	19:8	0:0	4	(
water	19:10	0:0	4	p_ext
op	19:15	0:0	4	->
water	19:17	0:0	4	p_sys
op	19:22	0:0	4	->
water	19:24	0:0	4	i_capabilities
op	19:39	0:0	4	&
water	19:41	0:0	4	EXT_HAS_MENU
water	19:54	0:0	4	)
op	19:56	0:0	4	==
water	19:59	0:0	4	0
stmts	20:4	23:4	3	
water	20:4	0:0	4	{
call	21:8	21:75	4	msg_Dbg
arg	21:17	21:22	5	p_mgr
water	21:17	0:0	6	p_mgr
arg	21:24	21:75	5	"can't get a menu from an extension without menu!"
water	21:24	0:0	6	"can't get a menu from an extension without menu!"
water	21:76	0:0	4	;
goto	22:8	22:17	4	exit
water	22:13	0:0	5	exit
water	23:4	0:0	4	}
call	24:4	24:29	2	lua_getglobal
arg	24:19	24:20	3	L
water	24:19	0:0	4	L
arg	24:22	24:29	3	"menu"
water	24:22	0:0	4	"menu"
water	24:30	0:0	2	;
if	25:4	30:4	2	(!lua_isfunction (L ,- 1 ))
cond	25:8	25:31	3	!lua_isfunction (L ,- 1 )
op	25:8	0:0	4	!
call	25:9	25:31	4	lua_isfunction
arg	25:25	25:26	5	L
water	25:25	0:0	6	L
arg	25:28	25:31	5	-1
op	25:28	0:0	6	-
water	25:29	0:0	6	1
stmts	26:4	30:4	3	
water	26:4	0:0	4	{
call	27:8	28:63	4	msg_Warn
arg	27:18	27:23	5	p_mgr
water	27:18	0:0	6	p_mgr
arg	27:25	28:45	5	"Error while running script %s, ""function menu() not found"
water	27:25	0:0	6	"Error while running script %s, "
water	28:18	0:0	6	"function menu() not found"
arg	28:47	28:63	5	p_ext->psz_name
water	28:47	0:0	6	p_ext
op	28:52	0:0	6	->
water	28:54	0:0	6	psz_name
water	28:64	0:0	4	;
goto	29:8	29:17	4	exit
water	29:13	0:0	5	exit
water	30:4	0:0	4	}
if	31:4	37:4	2	(lua_pcall (L ,0 ,1 ,0 ))
cond	31:8	31:30	3	lua_pcall (L ,0 ,1 ,0 )
call	31:8	31:30	4	lua_pcall
arg	31:19	31:20	5	L
water	31:19	0:0	6	L
arg	31:22	31:23	5	0
water	31:22	0:0	6	0
arg	31:25	31:26	5	1
water	31:25	0:0	6	1
arg	31:28	31:30	5	0
water	31:28	0:0	6	0
stmts	32:4	37:4	3	
water	32:4	0:0	4	{
call	33:8	35:53	4	msg_Warn
arg	33:18	33:23	5	p_mgr
water	33:18	0:0	6	p_mgr
arg	33:25	34:39	5	"Error while running script %s, ""function menu(): %s"
water	33:25	0:0	6	"Error while running script %s, "
water	34:18	0:0	6	"function menu(): %s"
arg	34:41	34:56	5	p_ext->psz_name
water	34:41	0:0	6	p_ext
op	34:46	0:0	6	->
water	34:48	0:0	6	psz_name
arg	35:18	35:53	5	lua_tostring(L,lua_gettop(L))
call	35:18	35:51	6	lua_tostring
arg	35:32	35:33	7	L
water	35:32	0:0	8	L
arg	35:35	35:51	7	lua_gettop(L)
call	35:35	35:49	8	lua_gettop
arg	35:47	35:49	9	L
water	35:47	0:0	10	L
water	35:54	0:0	4	;
goto	36:8	36:17	4	exit
water	36:13	0:0	5	exit
water	37:4	0:0	4	}
if	38:4	70:4	2	(lua_gettop (L ))
cond	38:8	38:22	3	lua_gettop (L )
call	38:8	38:22	4	lua_gettop
arg	38:20	38:22	5	L
water	38:20	0:0	6	L
stmts	39:4	70:4	3	
water	39:4	0:0	4	{
if	40:8	63:8	4	(lua_istable (L ,- 1 ))
cond	40:12	40:31	5	lua_istable (L ,- 1 )
call	40:12	40:31	6	lua_istable
arg	40:25	40:26	7	L
water	40:25	0:0	8	L
arg	40:28	40:31	7	-1
op	40:28	0:0	8	-
water	40:29	0:0	8	1
stmts	41:8	63:8	5	
water	41:8	0:0	6	{
decl	43:12	43:47	6	size_t	i_size
op	43:26	0:0	6	=
call	43:28	43:46	7	lua_objlen
arg	43:40	43:41	8	L
water	43:40	0:0	9	L
arg	43:43	43:46	8	-1
op	43:43	0:0	9	-
water	43:44	0:0	9	1
op	44:12	0:0	6	*
water	44:13	0:0	6	pppsz_titles
op	44:26	0:0	6	=
water	44:28	0:0	6	(
water	44:30	0:0	6	char
op	44:34	0:0	6	*
op	44:35	0:0	6	*
water	44:37	0:0	6	)
call	44:39	44:73	6	calloc
arg	44:47	44:55	7	i_size+1
water	44:47	0:0	8	i_size
op	44:53	0:0	8	+
water	44:54	0:0	8	1
arg	44:57	44:73	7	sizeof(char*)
op	44:57	0:0	8	sizeof
water	44:63	0:0	8	(
water	44:65	0:0	8	char
op	44:69	0:0	8	*
water	44:71	0:0	8	)
water	44:74	0:0	6	;
op	45:12	0:0	6	*
water	45:13	0:0	6	ppi_ids
op	45:21	0:0	6	=
water	45:23	0:0	6	(
water	45:25	0:0	6	uint16_t
op	45:33	0:0	6	*
water	45:35	0:0	6	)
call	45:37	45:74	6	calloc
arg	45:45	45:53	7	i_size+1
water	45:45	0:0	8	i_size
op	45:51	0:0	8	+
water	45:52	0:0	8	1
arg	45:55	45:74	7	sizeof(uint16_t)
op	45:55	0:0	8	sizeof
water	45:61	0:0	8	(
water	45:63	0:0	8	uint16_t
water	45:72	0:0	8	)
water	45:75	0:0	6	;
decl	47:12	47:28	6	size_t	i_idx
op	47:25	0:0	6	=
water	47:27	0:0	6	0
call	48:12	48:27	6	lua_pushnil
arg	48:25	48:27	7	L
water	48:25	0:0	8	L
water	48:28	0:0	6	;
while	49:12	62:12	6	(lua_next (L ,- 2 ) != 0)
cond	49:19	49:40	7	lua_next (L ,- 2 ) != 0
call	49:19	49:35	8	lua_next
arg	49:29	49:30	9	L
water	49:29	0:0	10	L
arg	49:32	49:35	9	-2
op	49:32	0:0	10	-
water	49:33	0:0	10	2
op	49:37	0:0	8	!=
water	49:40	0:0	8	0
stmts	50:12	62:12	7	
water	50:12	0:0	8	{
call	51:16	51:39	8	assert
arg	51:24	51:39	9	i_idx<i_size
water	51:24	0:0	10	i_idx
op	51:30	0:0	10	<
water	51:32	0:0	10	i_size
water	51:40	0:0	8	;
if	52:16	57:16	8	(( !lua_isstring (L ,- 1 ) ) || ( !lua_isnumber (L ,- 2 ) ))
cond	52:20	52:71	9	( !lua_isstring (L ,- 1 ) ) || ( !lua_isnumber (L ,- 2 ) )
water	52:20	0:0	10	(
op	52:21	0:0	10	!
call	52:22	52:42	10	lua_isstring
arg	52:36	52:37	11	L
water	52:36	0:0	12	L
arg	52:39	52:42	11	-1
op	52:39	0:0	12	-
water	52:40	0:0	12	1
water	52:43	0:0	10	)
op	52:45	0:0	10	||
water	52:48	0:0	10	(
op	52:49	0:0	10	!
call	52:50	52:70	10	lua_isnumber
arg	52:64	52:65	11	L
water	52:64	0:0	12	L
arg	52:67	52:70	11	-2
op	52:67	0:0	12	-
water	52:68	0:0	12	2
water	52:71	0:0	10	)
stmts	53:16	57:16	9	
water	53:16	0:0	10	{
call	54:20	55:76	10	msg_Warn
arg	54:30	54:35	11	p_mgr
water	54:30	0:0	12	p_mgr
arg	54:37	55:58	11	"In script %s, an entry in ""the menu table is invalid!"
water	54:37	0:0	12	"In script %s, an entry in "
water	55:30	0:0	12	"the menu table is invalid!"
arg	55:60	55:76	11	p_ext->psz_name
water	55:60	0:0	12	p_ext
op	55:65	0:0	12	->
water	55:67	0:0	12	psz_name
water	55:77	0:0	10	;
goto	56:20	56:29	10	exit
water	56:25	0:0	11	exit
water	57:16	0:0	10	}
water	58:16	0:0	8	(
op	58:17	0:0	8	*
water	58:18	0:0	8	pppsz_titles
water	58:30	0:0	8	)
op	58:31	0:0	8	[
water	58:33	0:0	8	i_idx
op	58:39	0:0	8	]
op	58:41	0:0	8	=
call	58:43	58:77	8	strdup
arg	58:51	58:77	9	luaL_checkstring(L,-1)
call	58:51	58:75	10	luaL_checkstring
arg	58:69	58:70	11	L
water	58:69	0:0	12	L
arg	58:72	58:75	11	-1
op	58:72	0:0	12	-
water	58:73	0:0	12	1
water	58:78	0:0	8	;
water	59:16	0:0	8	(
op	59:17	0:0	8	*
water	59:18	0:0	8	ppi_ids
water	59:25	0:0	8	)
op	59:26	0:0	8	[
water	59:28	0:0	8	i_idx
op	59:34	0:0	8	]
op	59:36	0:0	8	=
call	59:38	59:87	8	(uint16_t)
arg	59:51	59:87	9	luaL_checkinteger(L,-2)&0xFFFF
call	59:51	59:76	10	luaL_checkinteger
arg	59:70	59:71	11	L
water	59:70	0:0	12	L
arg	59:73	59:76	11	-2
op	59:73	0:0	12	-
water	59:74	0:0	12	2
op	59:78	0:0	10	&
water	59:80	0:0	10	0
water	59:81	0:0	10	xFFFF
water	59:88	0:0	8	;
water	60:16	0:0	8	i_idx
op	60:21	0:0	8	++
water	60:23	0:0	8	;
call	61:16	61:30	8	lua_pop
arg	61:25	61:26	9	L
water	61:25	0:0	10	L
arg	61:28	61:30	9	1
water	61:28	0:0	10	1
water	61:31	0:0	8	;
water	62:12	0:0	8	}
water	63:8	0:0	6	}
else	64:8	69:8	4
stmts	65:8	69:8	5	
water	65:8	0:0	6	{
call	66:12	67:64	6	msg_Warn
arg	66:22	66:27	7	p_mgr
water	66:22	0:0	8	p_mgr
arg	66:29	67:46	7	"Function menu() in script %s ""did not return a table"
water	66:29	0:0	8	"Function menu() in script %s "
water	67:22	0:0	8	"did not return a table"
arg	67:48	67:64	7	p_ext->psz_name
water	67:48	0:0	8	p_ext
op	67:53	0:0	8	->
water	67:55	0:0	8	psz_name
water	67:65	0:0	6	;
goto	68:12	68:21	6	exit
water	68:17	0:0	7	exit
water	69:8	0:0	6	}
water	70:4	0:0	4	}
else	71:4	75:4	2
stmts	72:4	75:4	3	
water	72:4	0:0	4	{
call	73:8	73:77	4	msg_Warn
arg	73:18	73:23	5	p_mgr
water	73:18	0:0	6	p_mgr
arg	73:25	73:59	5	"Script %s went completely foobar"
water	73:25	0:0	6	"Script %s went completely foobar"
arg	73:61	73:77	5	p_ext->psz_name
water	73:61	0:0	6	p_ext
op	73:66	0:0	6	->
water	73:68	0:0	6	psz_name
water	73:78	0:0	4	;
goto	74:8	74:17	4	exit
water	74:13	0:0	5	exit
water	75:4	0:0	4	}
water	76:4	0:0	2	i_ret
op	76:10	0:0	2	=
water	76:12	0:0	2	VLC_SUCCESS
water	76:23	0:0	2	;
label	77:0	77:4	2	exit :
call	78:4	78:27	2	UnlockExtension
arg	78:21	78:27	3	p_ext
water	78:21	0:0	4	p_ext
water	78:28	0:0	2	;
if	79:4	83:4	2	(i_ret != VLC_SUCCESS)
cond	79:8	79:17	3	i_ret != VLC_SUCCESS
water	79:8	0:0	4	i_ret
op	79:14	0:0	4	!=
water	79:17	0:0	4	VLC_SUCCESS
stmts	80:4	83:4	3	
water	80:4	0:0	4	{
call	81:8	82:46	4	msg_Dbg
arg	81:17	81:22	5	p_mgr
water	81:17	0:0	6	p_mgr
arg	81:24	81:60	5	"Something went wrong in %s (%s:%d)"
water	81:24	0:0	6	"Something went wrong in %s (%s:%d)"
arg	82:17	82:25	5	__func__
water	82:17	0:0	6	__func__
arg	82:27	82:35	5	__FILE__
water	82:27	0:0	6	__FILE__
arg	82:37	82:46	5	__LINE__
water	82:37	0:0	6	__LINE__
water	82:47	0:0	4	;
water	83:4	0:0	4	}
return	84:4	84:16	2	i_ret
water	84:11	0:0	3	i_ret
