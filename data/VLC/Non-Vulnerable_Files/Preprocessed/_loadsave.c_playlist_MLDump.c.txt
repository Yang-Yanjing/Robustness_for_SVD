func	2:0	38:0	0	int	playlist_MLDump
params	2:19	0:0	1	
param	2:21	2:44	2	playlist_t *	p_playlist
stmnts	0:0	37:22	1	
decl	4:4	4:18	2	char	*psz_temp
water	5:4	0:0	2	psz_temp
op	5:13	0:0	2	=
call	5:15	5:47	2	config_GetUserDir
arg	5:34	5:47	3	VLC_DATA_DIR
water	5:34	0:0	4	VLC_DATA_DIR
water	5:48	0:0	2	;
if	6:4	10:4	2	(! psz_temp)
cond	6:8	6:9	3	! psz_temp
op	6:8	0:0	4	!
water	6:9	0:0	4	psz_temp
stmts	7:4	10:4	3	
water	7:4	0:0	4	{
call	8:8	8:75	4	msg_Err
arg	8:17	8:27	5	p_playlist
water	8:17	0:0	6	p_playlist
arg	8:29	8:75	5	"no data directory, cannot save media library"
water	8:29	0:0	6	"no data directory, cannot save media library"
water	8:77	0:0	4	;
return	9:8	9:27	4	VLC_EGENERIC
water	9:15	0:0	5	VLC_EGENERIC
water	10:4	0:0	4	}
decl	11:4	11:70	2	char	psz_dirname[strlen(psz_temp)+sizeof(DIR_SEP"ml.xspf")]
call	12:4	12:34	2	strcpy
arg	12:12	12:23	3	psz_dirname
water	12:12	0:0	4	psz_dirname
arg	12:25	12:34	3	psz_temp
water	12:25	0:0	4	psz_temp
water	12:35	0:0	2	;
call	13:4	13:19	2	free
arg	13:10	13:19	3	psz_temp
water	13:10	0:0	4	psz_temp
water	13:20	0:0	2	;
if	14:4	17:4	2	(config_CreateDir (( vlc_object_t * ) p_playlist ,psz_dirname ))
cond	14:8	14:66	3	config_CreateDir (( vlc_object_t * ) p_playlist ,psz_dirname )
call	14:8	14:66	4	config_CreateDir
arg	14:26	14:52	5	(vlc_object_t*)p_playlist
water	14:26	0:0	6	(
water	14:27	0:0	6	vlc_object_t
op	14:40	0:0	6	*
water	14:41	0:0	6	)
water	14:42	0:0	6	p_playlist
arg	14:54	14:66	5	psz_dirname
water	14:54	0:0	6	psz_dirname
stmts	15:4	17:4	3	
water	15:4	0:0	4	{
return	16:8	16:27	4	VLC_EGENERIC
water	16:15	0:0	5	VLC_EGENERIC
water	17:4	0:0	4	}
call	18:4	18:43	2	strcat
arg	18:12	18:23	3	psz_dirname
water	18:12	0:0	4	psz_dirname
arg	18:25	18:43	3	DIR_SEP"ml.xspf"
water	18:25	0:0	4	DIR_SEP
water	18:33	0:0	4	"ml.xspf"
water	18:44	0:0	2	;
if	19:4	20:27	2	(asprintf (& psz_temp ,"%s.tmp%" PRIu32 ,psz_dirname ,( uint32_t )getpid ( ) ) < 1)
cond	19:9	19:83	3	asprintf (& psz_temp ,"%s.tmp%" PRIu32 ,psz_dirname ,( uint32_t )getpid ( ) ) < 1
call	19:9	19:79	4	asprintf
arg	19:19	19:28	5	&psz_temp
op	19:19	0:0	6	&
water	19:20	0:0	6	psz_temp
arg	19:30	19:45	5	"%s.tmp%"PRIu32
water	19:30	0:0	6	"%s.tmp%"
water	19:39	0:0	6	PRIu32
arg	19:47	19:58	5	psz_dirname
water	19:47	0:0	6	psz_dirname
arg	19:60	19:79	5	(uint32_t)getpid()
water	19:60	0:0	6	(
water	19:61	0:0	6	uint32_t
water	19:69	0:0	6	)
call	19:70	19:77	6	getpid
op	19:81	0:0	4	<
water	19:83	0:0	4	1
stmts	20:8	20:27	3	
return	20:8	20:27	4	VLC_EGENERIC
water	20:15	0:0	5	VLC_EGENERIC
decl	21:4	22:36	2	int	i_ret
op	21:14	0:0	2	=
call	21:16	22:35	3	playlist_Export
arg	21:33	21:43	4	p_playlist
water	21:33	0:0	5	p_playlist
arg	21:45	21:53	4	psz_temp
water	21:45	0:0	5	psz_temp
arg	21:55	21:82	4	p_playlist->p_media_library
water	21:55	0:0	5	p_playlist
op	21:65	0:0	5	->
water	21:67	0:0	5	p_media_library
arg	22:21	22:35	4	"export-xspf"
water	22:21	0:0	5	"export-xspf"
if	23:4	28:4	2	(i_ret != VLC_SUCCESS)
cond	23:9	23:18	3	i_ret != VLC_SUCCESS
water	23:9	0:0	4	i_ret
op	23:15	0:0	4	!=
water	23:18	0:0	4	VLC_SUCCESS
stmts	24:4	28:4	3	
water	24:4	0:0	4	{
call	25:8	25:29	4	vlc_unlink
arg	25:20	25:29	5	psz_temp
water	25:20	0:0	6	psz_temp
water	25:30	0:0	4	;
call	26:8	26:23	4	free
arg	26:14	26:23	5	psz_temp
water	26:14	0:0	6	psz_temp
water	26:24	0:0	4	;
return	27:8	27:20	4	i_ret
water	27:15	0:0	5	i_ret
water	28:4	0:0	4	}
water	29:4	0:0	2	i_ret
op	29:10	0:0	2	=
call	29:12	29:46	2	vlc_rename
arg	29:24	29:32	3	psz_temp
water	29:24	0:0	4	psz_temp
arg	29:34	29:46	3	psz_dirname
water	29:34	0:0	4	psz_dirname
water	29:47	0:0	2	;
call	30:4	30:19	2	free
arg	30:10	30:19	3	psz_temp
water	30:10	0:0	4	psz_temp
water	30:20	0:0	2	;
if	31:4	36:4	2	(i_ret == - 1)
cond	31:8	31:18	3	i_ret == - 1
water	31:8	0:0	4	i_ret
op	31:14	0:0	4	==
op	31:17	0:0	4	-
water	31:18	0:0	4	1
stmts	32:4	36:4	3	
water	32:4	0:0	4	{
call	33:8	34:52	4	msg_Err
arg	33:17	33:27	5	p_playlist
water	33:17	0:0	6	p_playlist
arg	33:29	33:58	5	"could not rename %s.tmp: %s"
water	33:29	0:0	6	"could not rename %s.tmp: %s"
arg	34:17	34:28	5	psz_dirname
water	34:17	0:0	6	psz_dirname
arg	34:30	34:52	5	vlc_strerror_c(errno)
call	34:30	34:50	6	vlc_strerror_c
arg	34:45	34:50	7	errno
water	34:45	0:0	8	errno
water	34:53	0:0	4	;
return	35:8	35:27	4	VLC_EGENERIC
water	35:15	0:0	5	VLC_EGENERIC
water	36:4	0:0	4	}
return	37:4	37:22	2	VLC_SUCCESS
water	37:11	0:0	3	VLC_SUCCESS
