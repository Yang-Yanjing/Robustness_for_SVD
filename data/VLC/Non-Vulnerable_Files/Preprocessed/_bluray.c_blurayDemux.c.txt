func	2:0	48:0	0	static int	blurayDemux
params	2:22	0:0	1	
param	2:23	2:39	2	demux_t *	p_demux
stmnts	0:0	47:12	1	
decl	4:4	4:39	2	demux_sys_t	*p_sys
op	4:23	0:0	2	=
water	4:25	0:0	2	p_demux
op	4:32	0:0	2	->
water	4:34	0:0	2	p_sys
decl	5:4	5:14	2	BD_EVENT	e
decl	6:4	6:78	2	block_t	*p_block
op	6:21	0:0	2	=
call	6:23	6:77	3	block_Alloc
arg	6:35	6:77	4	NB_TS_PACKETS*(int64_t)BD_TS_PACKET_SIZE
water	6:35	0:0	5	NB_TS_PACKETS
op	6:49	0:0	5	*
water	6:51	0:0	5	(
water	6:52	0:0	5	int64_t
water	6:59	0:0	5	)
water	6:60	0:0	5	BD_TS_PACKET_SIZE
if	7:4	8:17	2	(! p_block)
cond	7:8	7:9	3	! p_block
op	7:8	0:0	4	!
water	7:9	0:0	4	p_block
stmts	8:8	8:17	3	
return	8:8	8:17	4	-1
op	8:15	0:0	5	-
water	8:16	0:0	5	1
decl	9:4	9:13	2	int	nread
if	10:4	15:4	2	(p_sys -> b_menu == false)
cond	10:8	10:25	3	p_sys -> b_menu == false
water	10:8	0:0	4	p_sys
op	10:13	0:0	4	->
water	10:15	0:0	4	b_menu
op	10:22	0:0	4	==
water	10:25	0:0	4	false
stmts	10:32	15:4	3	
water	10:32	0:0	4	{
while	11:8	12:42	4	(bd_get_event (p_sys -> bluray ,& e ))
cond	11:15	11:45	5	bd_get_event (p_sys -> bluray ,& e )
call	11:15	11:45	6	bd_get_event
arg	11:28	11:41	7	p_sys->bluray
water	11:28	0:0	8	p_sys
op	11:33	0:0	8	->
water	11:35	0:0	8	bluray
arg	11:43	11:45	7	&e
op	11:43	0:0	8	&
water	11:44	0:0	8	e
stmts	12:12	12:42	5	
call	12:12	12:41	6	blurayHandleEvent
arg	12:30	12:37	7	p_demux
water	12:30	0:0	8	p_demux
arg	12:39	12:41	7	&e
op	12:39	0:0	8	&
water	12:40	0:0	8	e
water	12:42	0:0	6	;
water	13:8	0:0	4	nread
op	13:14	0:0	4	=
call	13:16	14:57	4	bd_read
arg	13:24	13:37	5	p_sys->bluray
water	13:24	0:0	6	p_sys
op	13:29	0:0	6	->
water	13:31	0:0	6	bluray
arg	13:39	13:56	5	p_block->p_buffer
water	13:39	0:0	6	p_block
op	13:46	0:0	6	->
water	13:48	0:0	6	p_buffer
arg	14:24	14:57	5	NB_TS_PACKETS*BD_TS_PACKET_SIZE
water	14:24	0:0	6	NB_TS_PACKETS
op	14:38	0:0	6	*
water	14:40	0:0	6	BD_TS_PACKET_SIZE
water	14:58	0:0	4	;
water	15:4	0:0	4	}
else	15:6	22:4	2
stmts	15:11	22:4	3	
water	15:11	0:0	4	{
water	16:8	0:0	4	nread
op	16:14	0:0	4	=
call	16:16	17:65	4	bd_read_ext
arg	16:28	16:41	5	p_sys->bluray
water	16:28	0:0	6	p_sys
op	16:33	0:0	6	->
water	16:35	0:0	6	bluray
arg	16:43	16:60	5	p_block->p_buffer
water	16:43	0:0	6	p_block
op	16:50	0:0	6	->
water	16:52	0:0	6	p_buffer
arg	17:28	17:61	5	NB_TS_PACKETS*BD_TS_PACKET_SIZE
water	17:28	0:0	6	NB_TS_PACKETS
op	17:42	0:0	6	*
water	17:44	0:0	6	BD_TS_PACKET_SIZE
arg	17:63	17:65	5	&e
op	17:63	0:0	6	&
water	17:64	0:0	6	e
water	17:66	0:0	4	;
while	18:8	21:8	4	(e . event != BD_EVENT_NONE)
cond	18:15	18:26	5	e . event != BD_EVENT_NONE
water	18:15	0:0	6	e
op	18:16	0:0	6	.
water	18:17	0:0	6	event
op	18:23	0:0	6	!=
water	18:26	0:0	6	BD_EVENT_NONE
stmts	18:41	21:8	5	
water	18:41	0:0	6	{
call	19:12	19:41	6	blurayHandleEvent
arg	19:30	19:37	7	p_demux
water	19:30	0:0	8	p_demux
arg	19:39	19:41	7	&e
op	19:39	0:0	8	&
water	19:40	0:0	8	e
water	19:42	0:0	6	;
call	20:12	20:42	6	bd_get_event
arg	20:25	20:38	7	p_sys->bluray
water	20:25	0:0	8	p_sys
op	20:30	0:0	8	->
water	20:32	0:0	8	bluray
arg	20:40	20:42	7	&e
op	20:40	0:0	8	&
water	20:41	0:0	8	e
water	20:43	0:0	6	;
water	21:8	0:0	6	}
water	22:4	0:0	4	}
if	23:4	37:4	2	(p_sys -> current_overlay != - 1)
cond	23:8	23:35	3	p_sys -> current_overlay != - 1
water	23:8	0:0	4	p_sys
op	23:13	0:0	4	->
water	23:15	0:0	4	current_overlay
op	23:31	0:0	4	!=
op	23:34	0:0	4	-
water	23:35	0:0	4	1
stmts	23:38	37:4	3	
water	23:38	0:0	4	{
decl	24:8	24:72	4	bluray_overlay_t	*ov
op	24:29	0:0	4	=
water	24:31	0:0	4	p_sys
op	24:36	0:0	4	->
water	24:38	0:0	4	p_overlays
op	24:48	0:0	4	[
water	24:49	0:0	4	p_sys
op	24:54	0:0	4	->
water	24:56	0:0	4	current_overlay
op	24:71	0:0	4	]
call	25:8	25:32	4	vlc_mutex_lock
arg	25:23	25:32	5	&ov->lock
op	25:23	0:0	6	&
water	25:24	0:0	6	ov
op	25:26	0:0	6	->
water	25:28	0:0	6	lock
water	25:33	0:0	4	;
decl	26:8	26:46	4	bool	display
op	26:21	0:0	4	=
water	26:23	0:0	4	ov
op	26:25	0:0	4	->
water	26:27	0:0	4	status
op	26:34	0:0	4	==
water	26:37	0:0	4	ToDisplay
call	27:8	27:34	4	vlc_mutex_unlock
arg	27:25	27:34	5	&ov->lock
op	27:25	0:0	6	&
water	27:26	0:0	6	ov
op	27:28	0:0	6	->
water	27:30	0:0	6	lock
water	27:35	0:0	4	;
if	28:8	36:8	4	(display)
cond	28:12	28:12	5	display
water	28:12	0:0	6	display
stmts	28:21	36:8	5	
water	28:21	0:0	6	{
if	29:12	30:61	6	(p_sys -> p_vout == NULL)
cond	29:16	29:33	7	p_sys -> p_vout == NULL
water	29:16	0:0	8	p_sys
op	29:21	0:0	8	->
water	29:23	0:0	8	p_vout
op	29:30	0:0	8	==
water	29:33	0:0	8	NULL
stmts	30:16	30:61	7	
water	30:16	0:0	8	p_sys
op	30:21	0:0	8	->
water	30:23	0:0	8	p_vout
op	30:30	0:0	8	=
call	30:32	30:60	8	input_GetVout
arg	30:46	30:60	9	p_sys->p_input
water	30:46	0:0	10	p_sys
op	30:51	0:0	10	->
water	30:53	0:0	10	p_input
water	30:61	0:0	8	;
if	31:12	35:12	6	(p_sys -> p_vout != NULL)
cond	31:16	31:33	7	p_sys -> p_vout != NULL
water	31:16	0:0	8	p_sys
op	31:21	0:0	8	->
water	31:23	0:0	8	p_vout
op	31:30	0:0	8	!=
water	31:33	0:0	8	NULL
stmts	31:39	35:12	7	
water	31:39	0:0	8	{
call	32:16	32:83	8	var_AddCallback
arg	32:32	32:45	9	p_sys->p_vout
water	32:32	0:0	10	p_sys
op	32:37	0:0	10	->
water	32:39	0:0	10	p_vout
arg	32:47	32:60	9	"mouse-moved"
water	32:47	0:0	10	"mouse-moved"
arg	32:62	32:74	9	onMouseEvent
water	32:62	0:0	10	onMouseEvent
arg	32:76	32:83	9	p_demux
water	32:76	0:0	10	p_demux
water	32:84	0:0	8	;
call	33:16	33:85	8	var_AddCallback
arg	33:32	33:45	9	p_sys->p_vout
water	33:32	0:0	10	p_sys
op	33:37	0:0	10	->
water	33:39	0:0	10	p_vout
arg	33:47	33:62	9	"mouse-clicked"
water	33:47	0:0	10	"mouse-clicked"
arg	33:64	33:76	9	onMouseEvent
water	33:64	0:0	10	onMouseEvent
arg	33:78	33:85	9	p_demux
water	33:78	0:0	10	p_demux
water	33:86	0:0	8	;
call	34:16	34:47	8	bluraySendOverlayToVout
arg	34:40	34:47	9	p_demux
water	34:40	0:0	10	p_demux
water	34:48	0:0	8	;
water	35:12	0:0	8	}
water	36:8	0:0	6	}
water	37:4	0:0	4	}
if	38:4	43:4	2	(nread <= 0)
cond	38:8	38:17	3	nread <= 0
water	38:8	0:0	4	nread
op	38:14	0:0	4	<=
water	38:17	0:0	4	0
stmts	38:20	43:4	3	
water	38:20	0:0	4	{
call	39:8	39:29	4	block_Release
arg	39:22	39:29	5	p_block
water	39:22	0:0	6	p_block
water	39:30	0:0	4	;
if	40:8	41:21	4	(nread < 0)
cond	40:12	40:20	5	nread < 0
water	40:12	0:0	6	nread
op	40:18	0:0	6	<
water	40:20	0:0	6	0
stmts	41:12	41:21	5	
return	41:12	41:21	6	-1
op	41:19	0:0	7	-
water	41:20	0:0	7	1
return	42:8	42:16	4	1
water	42:15	0:0	5	1
water	43:4	0:0	4	}
water	44:4	0:0	2	p_block
op	44:11	0:0	2	->
water	44:13	0:0	2	i_buffer
op	44:22	0:0	2	=
water	44:24	0:0	2	nread
water	44:29	0:0	2	;
call	45:4	45:45	2	stream_DemuxSend
arg	45:21	45:36	3	p_sys->p_parser
water	45:21	0:0	4	p_sys
op	45:26	0:0	4	->
water	45:28	0:0	4	p_parser
arg	45:38	45:45	3	p_block
water	45:38	0:0	4	p_block
water	45:46	0:0	2	;
water	46:4	0:0	2	p_sys
op	46:9	0:0	2	->
water	46:11	0:0	2	b_flushed
op	46:21	0:0	2	=
water	46:23	0:0	2	false
water	46:28	0:0	2	;
return	47:4	47:12	2	1
water	47:11	0:0	3	1
