func	2:0	75:0	0	static int	DirectXOpenDDraw
params	2:27	0:0	1	
param	2:28	2:46	2	vout_display_t *	vd
stmnts	0:0	74:22	1	
decl	4:4	4:37	2	vout_display_sys_t	*sys
op	4:28	0:0	2	=
water	4:30	0:0	2	vd
op	4:32	0:0	2	->
water	4:34	0:0	2	sys
decl	5:4	5:14	2	HRESULT	hr
call	7:4	7:40	2	HRESULT
arg	7:13	7:40	3	WINAPI*OurDirectDrawCreate
water	7:13	0:0	4	WINAPI
op	7:20	0:0	4	*
water	7:21	0:0	4	OurDirectDrawCreate
water	7:41	0:0	2	(
water	7:42	0:0	2	GUID
op	7:47	0:0	2	*
water	7:48	0:0	2	,
water	7:49	0:0	2	LPDIRECTDRAW
op	7:62	0:0	2	*
water	7:63	0:0	2	,
water	7:64	0:0	2	IUnknown
op	7:73	0:0	2	*
water	7:74	0:0	2	)
water	7:75	0:0	2	;
water	8:4	0:0	2	OurDirectDrawCreate
op	8:24	0:0	2	=
water	9:8	0:0	2	(
water	9:9	0:0	2	void
op	9:14	0:0	2	*
water	9:15	0:0	2	)
call	9:16	9:66	2	GetProcAddress
arg	9:31	9:46	3	sys->hddraw_dll
water	9:31	0:0	4	sys
op	9:34	0:0	4	->
water	9:36	0:0	4	hddraw_dll
arg	9:48	9:66	3	"DirectDrawCreate"
water	9:48	0:0	4	"DirectDrawCreate"
water	9:67	0:0	2	;
if	10:4	13:4	2	(! OurDirectDrawCreate)
cond	10:8	10:9	3	! OurDirectDrawCreate
op	10:8	0:0	4	!
water	10:9	0:0	4	OurDirectDrawCreate
stmts	10:30	13:4	3	
water	10:30	0:0	4	{
call	11:8	11:60	4	msg_Err
arg	11:16	11:18	5	vd
water	11:16	0:0	6	vd
arg	11:20	11:60	5	"DirectXInitDDraw failed GetProcAddress"
water	11:20	0:0	6	"DirectXInitDDraw failed GetProcAddress"
water	11:61	0:0	4	;
return	12:8	12:27	4	VLC_EGENERIC
water	12:15	0:0	5	VLC_EGENERIC
water	13:4	0:0	4	}
call	15:4	15:45	2	HRESULT
arg	15:13	15:45	3	WINAPI*OurDirectDrawEnumerateEx
water	15:13	0:0	4	WINAPI
op	15:20	0:0	4	*
water	15:21	0:0	4	OurDirectDrawEnumerateEx
water	15:46	0:0	2	(
water	15:47	0:0	2	LPDDENUMCALLBACKEXA
water	15:66	0:0	2	,
water	15:68	0:0	2	LPVOID
water	15:74	0:0	2	,
water	15:76	0:0	2	DWORD
water	15:81	0:0	2	)
water	15:82	0:0	2	;
water	16:4	0:0	2	OurDirectDrawEnumerateEx
op	16:29	0:0	2	=
water	17:6	0:0	2	(
water	17:7	0:0	2	void
op	17:12	0:0	2	*
water	17:13	0:0	2	)
call	17:14	17:72	2	GetProcAddress
arg	17:29	17:44	3	sys->hddraw_dll
water	17:29	0:0	4	sys
op	17:32	0:0	4	->
water	17:34	0:0	4	hddraw_dll
arg	17:46	17:72	3	DIRECTDRAWENUMERATEEX_NAME
water	17:46	0:0	4	DIRECTDRAWENUMERATEEX_NAME
water	17:73	0:0	2	;
if	18:4	28:4	2	(OurDirectDrawEnumerateEx)
cond	18:8	18:8	3	OurDirectDrawEnumerateEx
water	18:8	0:0	4	OurDirectDrawEnumerateEx
stmts	18:34	28:4	3	
water	18:34	0:0	4	{
decl	19:8	19:58	4	char	*device
op	19:21	0:0	4	=
call	19:23	19:57	5	var_GetString
arg	19:37	19:39	6	vd
water	19:37	0:0	7	vd
arg	19:41	19:57	6	"directx-device"
water	19:41	0:0	7	"directx-device"
if	20:8	23:8	4	(device)
cond	20:12	20:12	5	device
water	20:12	0:0	6	device
stmts	20:20	23:8	5	
water	20:20	0:0	6	{
call	21:12	21:52	6	msg_Dbg
arg	21:20	21:22	7	vd
water	21:20	0:0	8	vd
arg	21:24	21:44	7	"directx-device: %s"
water	21:24	0:0	8	"directx-device: %s"
arg	21:46	21:52	7	device
water	21:46	0:0	8	device
water	21:53	0:0	6	;
call	22:12	22:23	6	free
arg	22:17	22:23	7	device
water	22:17	0:0	8	device
water	22:24	0:0	6	;
water	23:8	0:0	6	}
water	24:8	0:0	4	sys
op	24:11	0:0	4	->
water	24:13	0:0	4	hmonitor
op	24:22	0:0	4	=
call	24:24	24:77	4	MonitorFromWindow
arg	24:42	24:51	5	sys->hwnd
water	24:42	0:0	6	sys
op	24:45	0:0	6	->
water	24:47	0:0	6	hwnd
arg	24:53	24:77	5	MONITOR_DEFAULTTONEAREST
water	24:53	0:0	6	MONITOR_DEFAULTTONEAREST
water	24:78	0:0	4	;
call	26:8	27:68	4	OurDirectDrawEnumerateEx
arg	26:33	26:57	5	DirectXOpenDDrawCallback
water	26:33	0:0	6	DirectXOpenDDrawCallback
arg	27:33	27:35	5	vd
water	27:33	0:0	6	vd
arg	27:37	27:68	5	DDENUM_ATTACHEDSECONDARYDEVICES
water	27:37	0:0	6	DDENUM_ATTACHEDSECONDARYDEVICES
water	27:69	0:0	4	;
water	28:4	0:0	4	}
decl	30:4	30:25	2	LPDIRECTDRAW	ddobject
water	31:4	0:0	2	hr
op	31:7	0:0	2	=
call	31:9	31:65	2	OurDirectDrawCreate
arg	31:29	31:48	3	sys->display_driver
water	31:29	0:0	4	sys
op	31:32	0:0	4	->
water	31:34	0:0	4	display_driver
arg	31:50	31:59	3	&ddobject
op	31:50	0:0	4	&
water	31:51	0:0	4	ddobject
arg	31:61	31:65	3	NULL
water	31:61	0:0	4	NULL
water	31:66	0:0	2	;
if	32:4	35:4	2	(hr != DD_OK)
cond	32:8	32:14	3	hr != DD_OK
water	32:8	0:0	4	hr
op	32:11	0:0	4	!=
water	32:14	0:0	4	DD_OK
stmts	32:21	35:4	3	
water	32:21	0:0	4	{
call	33:8	33:62	4	msg_Err
arg	33:16	33:18	5	vd
water	33:16	0:0	6	vd
arg	33:20	33:62	5	"DirectXInitDDraw cannot initialize DDraw"
water	33:20	0:0	6	"DirectXInitDDraw cannot initialize DDraw"
water	33:63	0:0	4	;
return	34:8	34:27	4	VLC_EGENERIC
water	34:15	0:0	5	VLC_EGENERIC
water	35:4	0:0	4	}
decl	37:4	37:13	2	void	*ptr
water	38:4	0:0	2	hr
op	38:7	0:0	2	=
call	38:9	39:40	2	IDirectDraw_QueryInterface
arg	38:36	38:44	3	ddobject
water	38:36	0:0	4	ddobject
arg	38:46	38:63	3	&IID_IDirectDraw2
op	38:46	0:0	4	&
water	38:47	0:0	4	IID_IDirectDraw2
arg	39:36	39:40	3	&ptr
op	39:36	0:0	4	&
water	39:37	0:0	4	ptr
water	39:41	0:0	2	;
call	41:4	41:32	2	IDirectDraw_Release
arg	41:24	41:32	3	ddobject
water	41:24	0:0	4	ddobject
water	41:33	0:0	2	;
if	42:4	46:4	2	(hr != DD_OK)
cond	42:8	42:14	3	hr != DD_OK
water	42:8	0:0	4	hr
op	42:11	0:0	4	!=
water	42:14	0:0	4	DD_OK
stmts	42:21	46:4	3	
water	42:21	0:0	4	{
call	43:8	43:55	4	msg_Err
arg	43:16	43:18	5	vd
water	43:16	0:0	6	vd
arg	43:20	43:55	5	"cannot get IDirectDraw2 interface"
water	43:20	0:0	6	"cannot get IDirectDraw2 interface"
water	43:56	0:0	4	;
water	44:8	0:0	4	sys
op	44:11	0:0	4	->
water	44:13	0:0	4	ddobject
op	44:22	0:0	4	=
water	44:24	0:0	4	NULL
water	44:28	0:0	4	;
return	45:8	45:27	4	VLC_EGENERIC
water	45:15	0:0	5	VLC_EGENERIC
water	46:4	0:0	4	}
water	47:4	0:0	2	sys
op	47:7	0:0	2	->
water	47:9	0:0	2	ddobject
op	47:18	0:0	2	=
water	47:20	0:0	2	ptr
water	47:23	0:0	2	;
water	50:4	0:0	2	hr
op	50:7	0:0	2	=
call	50:9	50:75	2	IDirectDraw2_SetCooperativeLevel
arg	50:42	50:55	3	sys->ddobject
water	50:42	0:0	4	sys
op	50:45	0:0	4	->
water	50:47	0:0	4	ddobject
arg	50:57	50:61	3	NULL
water	50:57	0:0	4	NULL
arg	50:63	50:75	3	DDSCL_NORMAL
water	50:63	0:0	4	DDSCL_NORMAL
water	50:76	0:0	2	;
if	51:4	54:4	2	(hr != DD_OK)
cond	51:8	51:14	3	hr != DD_OK
water	51:8	0:0	4	hr
op	51:11	0:0	4	!=
water	51:14	0:0	4	DD_OK
stmts	51:21	54:4	3	
water	51:21	0:0	4	{
call	52:8	52:62	4	msg_Err
arg	52:16	52:18	5	vd
water	52:16	0:0	6	vd
arg	52:20	52:62	5	"cannot set direct draw cooperative level"
water	52:20	0:0	6	"cannot set direct draw cooperative level"
water	52:63	0:0	4	;
return	53:8	53:27	4	VLC_EGENERIC
water	53:15	0:0	5	VLC_EGENERIC
water	54:4	0:0	4	}
if	56:4	61:4	2	(sys -> hmonitor)
cond	56:8	56:13	3	sys -> hmonitor
water	56:8	0:0	4	sys
op	56:11	0:0	4	->
water	56:13	0:0	4	hmonitor
stmts	56:23	61:4	3	
water	56:23	0:0	4	{
decl	57:8	57:32	4	MONITORINFO	monitor_info
water	58:8	0:0	4	monitor_info
op	58:20	0:0	4	.
water	58:21	0:0	4	cbSize
op	58:28	0:0	4	=
op	58:30	0:0	4	sizeof
water	58:36	0:0	4	(
water	58:37	0:0	4	MONITORINFO
water	58:48	0:0	4	)
water	58:49	0:0	4	;
call	59:8	59:56	4	GetMonitorInfoA
arg	59:24	59:41	5	vd->sys->hmonitor
water	59:24	0:0	6	vd
op	59:26	0:0	6	->
water	59:28	0:0	6	sys
op	59:31	0:0	6	->
water	59:33	0:0	6	hmonitor
arg	59:43	59:56	5	&monitor_info
op	59:43	0:0	6	&
water	59:44	0:0	6	monitor_info
water	59:57	0:0	4	;
water	60:8	0:0	4	sys
op	60:11	0:0	4	->
water	60:13	0:0	4	rect_display
op	60:26	0:0	4	=
water	60:28	0:0	4	monitor_info
op	60:40	0:0	4	.
water	60:41	0:0	4	rcMonitor
water	60:50	0:0	4	;
water	61:4	0:0	4	}
else	61:6	66:4	2
stmts	61:11	66:4	3	
water	61:11	0:0	4	{
water	62:8	0:0	4	sys
op	62:11	0:0	4	->
water	62:13	0:0	4	rect_display
op	62:25	0:0	4	.
water	62:26	0:0	4	left
op	62:33	0:0	4	=
water	62:35	0:0	4	0
water	62:36	0:0	4	;
water	63:8	0:0	4	sys
op	63:11	0:0	4	->
water	63:13	0:0	4	rect_display
op	63:25	0:0	4	.
water	63:26	0:0	4	top
op	63:33	0:0	4	=
water	63:35	0:0	4	0
water	63:36	0:0	4	;
water	64:8	0:0	4	sys
op	64:11	0:0	4	->
water	64:13	0:0	4	rect_display
op	64:25	0:0	4	.
water	64:26	0:0	4	right
op	64:33	0:0	4	=
call	64:35	64:63	4	GetSystemMetrics
arg	64:52	64:63	5	SM_CXSCREEN
water	64:52	0:0	6	SM_CXSCREEN
water	64:64	0:0	4	;
water	65:8	0:0	4	sys
op	65:11	0:0	4	->
water	65:13	0:0	4	rect_display
op	65:25	0:0	4	.
water	65:26	0:0	4	bottom
op	65:33	0:0	4	=
call	65:35	65:63	4	GetSystemMetrics
arg	65:52	65:63	5	SM_CYSCREEN
water	65:52	0:0	6	SM_CYSCREEN
water	65:64	0:0	4	;
water	66:4	0:0	4	}
call	67:4	71:36	2	msg_Dbg
arg	67:12	67:14	3	vd
water	67:12	0:0	4	vd
arg	67:16	67:53	3	"screen dimensions (%lix%li,%lix%li)"
water	67:16	0:0	4	"screen dimensions (%lix%li,%lix%li)"
arg	68:12	68:34	3	sys->rect_display.left
water	68:12	0:0	4	sys
op	68:15	0:0	4	->
water	68:17	0:0	4	rect_display
op	68:29	0:0	4	.
water	68:30	0:0	4	left
arg	69:12	69:33	3	sys->rect_display.top
water	69:12	0:0	4	sys
op	69:15	0:0	4	->
water	69:17	0:0	4	rect_display
op	69:29	0:0	4	.
water	69:30	0:0	4	top
arg	70:12	70:35	3	sys->rect_display.right
water	70:12	0:0	4	sys
op	70:15	0:0	4	->
water	70:17	0:0	4	rect_display
op	70:29	0:0	4	.
water	70:30	0:0	4	right
arg	71:12	71:36	3	sys->rect_display.bottom
water	71:12	0:0	4	sys
op	71:15	0:0	4	->
water	71:17	0:0	4	rect_display
op	71:29	0:0	4	.
water	71:30	0:0	4	bottom
water	71:37	0:0	2	;
call	73:4	73:26	2	DirectXGetDDrawCaps
arg	73:24	73:26	3	vd
water	73:24	0:0	4	vd
water	73:27	0:0	2	;
return	74:4	74:22	2	VLC_SUCCESS
water	74:11	0:0	3	VLC_SUCCESS
