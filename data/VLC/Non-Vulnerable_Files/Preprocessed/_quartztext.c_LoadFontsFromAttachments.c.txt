func	2:0	37:0	0	static int	LoadFontsFromAttachments
params	2:35	0:0	1	
param	2:36	2:54	2	filter_t *	p_filter
stmnts	5:4	35:22	1	
call	5:4	5:23	2	VLC_UNUSED
arg	5:15	5:23	3	p_filter
water	5:15	0:0	4	p_filter
water	5:24	0:0	2	;
return	6:4	6:22	2	VLC_SUCCESS
water	6:11	0:0	3	VLC_SUCCESS
decl	8:4	8:49	2	filter_sys_t	*p_sys
op	8:32	0:0	2	=
water	8:34	0:0	2	p_filter
op	8:42	0:0	2	->
water	8:44	0:0	2	p_sys
decl	9:4	9:40	2	input_attachment_t	**pp_attachments
decl	10:4	10:43	2	int	i_attachments_cnt
if	11:4	12:27	2	(filter_GetInputAttachments (p_filter ,& pp_attachments ,& i_attachments_cnt ))
cond	11:8	11:80	3	filter_GetInputAttachments (p_filter ,& pp_attachments ,& i_attachments_cnt )
call	11:8	11:80	4	filter_GetInputAttachments
arg	11:35	11:43	5	p_filter
water	11:35	0:0	6	p_filter
arg	11:45	11:60	5	&pp_attachments
op	11:45	0:0	6	&
water	11:46	0:0	6	pp_attachments
arg	11:62	11:80	5	&i_attachments_cnt
op	11:62	0:0	6	&
water	11:63	0:0	6	i_attachments_cnt
stmts	12:8	12:27	3	
return	12:8	12:27	4	VLC_EGENERIC
water	12:15	0:0	5	VLC_EGENERIC
water	13:4	0:0	2	p_sys
op	13:9	0:0	2	->
water	13:11	0:0	2	i_fonts
op	13:19	0:0	2	=
water	13:21	0:0	2	0
water	13:22	0:0	2	;
water	14:4	0:0	2	p_sys
op	14:9	0:0	2	->
water	14:11	0:0	2	p_fonts
op	14:19	0:0	2	=
call	14:21	14:75	2	malloc
arg	14:28	14:75	3	i_attachments_cnt*sizeof(ATSFontContainerRef)
water	14:28	0:0	4	i_attachments_cnt
op	14:46	0:0	4	*
op	14:48	0:0	4	sizeof
water	14:54	0:0	4	(
water	14:55	0:0	4	ATSFontContainerRef
water	14:74	0:0	4	)
water	14:76	0:0	2	;
if	15:4	16:25	2	(! p_sys -> p_fonts)
cond	15:8	15:17	3	! p_sys -> p_fonts
op	15:8	0:0	4	!
water	15:10	0:0	4	p_sys
op	15:15	0:0	4	->
water	15:17	0:0	4	p_fonts
stmts	16:8	16:25	3	
return	16:8	16:25	4	VLC_ENOMEM
water	16:15	0:0	5	VLC_ENOMEM
for	17:4	33:4	2	( int k = 0 ;k < i_attachments_cnt;k ++)
forinit	0:0	17:18	3	 int k = 0 ;
decl	17:9	17:18	4	int	k
op	17:15	0:0	4	=
water	17:17	0:0	4	0
cond	17:20	17:24	3	k < i_attachments_cnt
water	17:20	0:0	4	k
op	17:22	0:0	4	<
water	17:24	0:0	4	i_attachments_cnt
forexpr	17:43	17:44	3	k ++
water	17:43	0:0	4	k
op	17:44	0:0	4	++
stmts	17:48	33:4	3	
water	17:48	0:0	4	{
decl	18:8	18:56	4	input_attachment_t	*p_attach
op	18:37	0:0	4	=
water	18:39	0:0	4	pp_attachments
op	18:53	0:0	4	[
water	18:54	0:0	4	k
op	18:55	0:0	4	]
if	19:8	31:8	4	(( !strcmp (p_attach -> psz_mime ,"application/x-truetype-font" ) || !strcmp (p_attach -> psz_mime ,"application/x-font-otf" ) ) && p_attach -> i_data > 0 && p_attach -> p_data)
cond	19:12	21:46	5	( !strcmp (p_attach -> psz_mime ,"application/x-truetype-font" ) || !strcmp (p_attach -> psz_mime ,"application/x-font-otf" ) ) && p_attach -> i_data > 0 && p_attach -> p_data
water	19:12	0:0	6	(
op	19:13	0:0	6	!
call	19:14	19:70	6	strcmp
arg	19:21	19:39	7	p_attach->psz_mime
water	19:21	0:0	8	p_attach
op	19:29	0:0	8	->
water	19:31	0:0	8	psz_mime
arg	19:41	19:70	7	"application/x-truetype-font"
water	19:41	0:0	8	"application/x-truetype-font"
op	19:72	0:0	6	||
op	20:14	0:0	6	!
call	20:15	20:66	6	strcmp
arg	20:22	20:40	7	p_attach->psz_mime
water	20:22	0:0	8	p_attach
op	20:30	0:0	8	->
water	20:32	0:0	8	psz_mime
arg	20:42	20:66	7	"application/x-font-otf"
water	20:42	0:0	8	"application/x-font-otf"
water	20:67	0:0	6	)
op	20:69	0:0	6	&&
water	21:12	0:0	6	p_attach
op	21:20	0:0	6	->
water	21:22	0:0	6	i_data
op	21:29	0:0	6	>
water	21:31	0:0	6	0
op	21:33	0:0	6	&&
water	21:36	0:0	6	p_attach
op	21:44	0:0	6	->
water	21:46	0:0	6	p_data
stmts	21:54	31:8	5	
water	21:54	0:0	6	{
decl	22:12	22:42	6	ATSFontContainerRef	container
if	23:12	30:62	6	(noErr ==ATSFontActivateFromMemory (p_attach -> p_data ,p_attach -> i_data ,kATSFontContextLocal ,kATSFontFormatUnspecified ,NULL ,kATSOptionFlagsDefault ,& container ))
cond	23:16	29:62	7	noErr ==ATSFontActivateFromMemory (p_attach -> p_data ,p_attach -> i_data ,kATSFontContextLocal ,kATSFontFormatUnspecified ,NULL ,kATSOptionFlagsDefault ,& container )
water	23:16	0:0	8	noErr
op	23:22	0:0	8	==
call	23:25	29:62	8	ATSFontActivateFromMemory
arg	23:51	23:67	9	p_attach->p_data
water	23:51	0:0	10	p_attach
op	23:59	0:0	10	->
water	23:61	0:0	10	p_data
arg	24:52	24:68	9	p_attach->i_data
water	24:52	0:0	10	p_attach
op	24:60	0:0	10	->
water	24:62	0:0	10	i_data
arg	25:52	25:72	9	kATSFontContextLocal
water	25:52	0:0	10	kATSFontContextLocal
arg	26:52	26:77	9	kATSFontFormatUnspecified
water	26:52	0:0	10	kATSFontFormatUnspecified
arg	27:52	27:56	9	NULL
water	27:52	0:0	10	NULL
arg	28:52	28:74	9	kATSOptionFlagsDefault
water	28:52	0:0	10	kATSOptionFlagsDefault
arg	29:52	29:62	9	&container
op	29:52	0:0	10	&
water	29:53	0:0	10	container
stmts	30:16	30:62	7	
water	30:16	0:0	8	p_sys
op	30:21	0:0	8	->
water	30:23	0:0	8	p_fonts
op	30:30	0:0	8	[
water	30:32	0:0	8	p_sys
op	30:37	0:0	8	->
water	30:39	0:0	8	i_fonts
op	30:46	0:0	8	++
op	30:49	0:0	8	]
op	30:51	0:0	8	=
water	30:53	0:0	8	container
water	30:62	0:0	8	;
water	31:8	0:0	6	}
call	32:8	32:44	4	vlc_input_attachment_Delete
arg	32:36	32:44	5	p_attach
water	32:36	0:0	6	p_attach
water	32:45	0:0	4	;
water	33:4	0:0	4	}
call	34:4	34:23	2	free
arg	34:9	34:23	3	pp_attachments
water	34:9	0:0	4	pp_attachments
water	34:24	0:0	2	;
return	35:4	35:22	2	VLC_SUCCESS
water	35:11	0:0	3	VLC_SUCCESS
