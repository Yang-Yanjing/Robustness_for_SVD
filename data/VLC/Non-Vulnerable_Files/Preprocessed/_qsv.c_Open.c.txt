func	2:0	161:0	0	static int	Open
params	2:15	0:0	1	
param	2:16	2:34	2	vlc_object_t *	this
stmnts	0:0	160:21	1	
decl	4:4	4:38	2	encoder_t	*enc
op	4:19	0:0	2	=
water	4:21	0:0	2	(
water	4:22	0:0	2	encoder_t
op	4:32	0:0	2	*
water	4:33	0:0	2	)
water	4:34	0:0	2	this
decl	5:4	5:29	2	encoder_sys_t	*sys
op	5:23	0:0	2	=
water	5:25	0:0	2	NULL
decl	6:4	6:32	2	mfxStatus	sts
op	6:18	0:0	2	=
water	6:20	0:0	2	MFX_ERR_NONE
decl	7:4	7:38	2	mfxFrameAllocRequest	alloc_request
decl	8:4	8:36	2	mfxExtCodingOptionSPSPPS	headers
decl	9:4	9:65	2	mfxExtBuffer	*extended_params[1]
op	9:37	0:0	2	=
water	9:39	0:0	2	{
water	9:40	0:0	2	(
water	9:41	0:0	2	mfxExtBuffer
op	9:54	0:0	2	*
water	9:55	0:0	2	)
op	9:56	0:0	2	&
water	9:57	0:0	2	headers
water	9:64	0:0	2	}
decl	10:4	10:20	2	uint8_t	*p_extra
decl	11:4	11:18	2	size_t	i_extra
decl	12:4	12:21	2	uint8_t	nals[128]
if	13:4	15:27	2	(enc -> fmt_out . i_codec != VLC_CODEC_H264 && enc -> fmt_out . i_codec != VLC_CODEC_MPGV && ! enc -> b_force)
cond	13:8	14:56	3	enc -> fmt_out . i_codec != VLC_CODEC_H264 && enc -> fmt_out . i_codec != VLC_CODEC_MPGV && ! enc -> b_force
water	13:8	0:0	4	enc
op	13:11	0:0	4	->
water	13:13	0:0	4	fmt_out
op	13:20	0:0	4	.
water	13:21	0:0	4	i_codec
op	13:29	0:0	4	!=
water	13:32	0:0	4	VLC_CODEC_H264
op	13:47	0:0	4	&&
water	14:8	0:0	4	enc
op	14:11	0:0	4	->
water	14:13	0:0	4	fmt_out
op	14:20	0:0	4	.
water	14:21	0:0	4	i_codec
op	14:29	0:0	4	!=
water	14:32	0:0	4	VLC_CODEC_MPGV
op	14:47	0:0	4	&&
op	14:50	0:0	4	!
water	14:51	0:0	4	enc
op	14:54	0:0	4	->
water	14:56	0:0	4	b_force
stmts	15:8	15:27	3	
return	15:8	15:27	4	VLC_EGENERIC
water	15:15	0:0	5	VLC_EGENERIC
if	16:4	20:4	2	(! enc -> fmt_in . video . i_visible_height || ! enc -> fmt_in . video . i_visible_width || ! enc -> fmt_in . video . i_frame_rate || ! enc -> fmt_in . video . i_frame_rate_base)
cond	16:8	17:62	3	! enc -> fmt_in . video . i_visible_height || ! enc -> fmt_in . video . i_visible_width || ! enc -> fmt_in . video . i_frame_rate || ! enc -> fmt_in . video . i_frame_rate_base
op	16:8	0:0	4	!
water	16:9	0:0	4	enc
op	16:12	0:0	4	->
water	16:14	0:0	4	fmt_in
op	16:20	0:0	4	.
water	16:21	0:0	4	video
op	16:26	0:0	4	.
water	16:27	0:0	4	i_visible_height
op	16:44	0:0	4	||
op	16:47	0:0	4	!
water	16:48	0:0	4	enc
op	16:51	0:0	4	->
water	16:53	0:0	4	fmt_in
op	16:59	0:0	4	.
water	16:60	0:0	4	video
op	16:65	0:0	4	.
water	16:66	0:0	4	i_visible_width
op	16:82	0:0	4	||
op	17:8	0:0	4	!
water	17:9	0:0	4	enc
op	17:12	0:0	4	->
water	17:14	0:0	4	fmt_in
op	17:20	0:0	4	.
water	17:21	0:0	4	video
op	17:26	0:0	4	.
water	17:27	0:0	4	i_frame_rate
op	17:40	0:0	4	||
op	17:43	0:0	4	!
water	17:44	0:0	4	enc
op	17:47	0:0	4	->
water	17:49	0:0	4	fmt_in
op	17:55	0:0	4	.
water	17:56	0:0	4	video
op	17:61	0:0	4	.
water	17:62	0:0	4	i_frame_rate_base
stmts	17:81	20:4	3	
water	17:81	0:0	4	{
call	18:8	18:72	4	msg_Err
arg	18:16	18:19	5	enc
water	18:16	0:0	6	enc
arg	18:21	18:72	5	"Framerate and picture dimensions must be non-zero"
water	18:21	0:0	6	"Framerate and picture dimensions must be non-zero"
water	18:73	0:0	4	;
return	19:8	19:27	4	VLC_EGENERIC
water	19:15	0:0	5	VLC_EGENERIC
water	20:4	0:0	4	}
water	22:4	0:0	2	sys
op	22:8	0:0	2	=
call	22:10	22:41	2	calloc
arg	22:17	22:18	3	1
water	22:17	0:0	4	1
arg	22:20	22:41	3	sizeof(encoder_sys_t)
op	22:20	0:0	4	sizeof
water	22:26	0:0	4	(
water	22:27	0:0	4	encoder_sys_t
water	22:40	0:0	4	)
water	22:42	0:0	2	;
if	23:4	24:25	2	(unlikely (! sys ))
cond	23:8	23:21	3	unlikely (! sys )
call	23:8	23:21	4	unlikely
arg	23:17	23:21	5	!sys
op	23:17	0:0	6	!
water	23:18	0:0	6	sys
stmts	24:8	24:25	3	
return	24:8	24:25	4	VLC_ENOMEM
water	24:15	0:0	5	VLC_ENOMEM
water	26:4	0:0	2	sts
op	26:8	0:0	2	=
call	26:10	26:49	2	MFXInit
arg	26:18	26:31	3	MFX_IMPL_AUTO
water	26:18	0:0	4	MFX_IMPL_AUTO
arg	26:33	26:34	3	0
water	26:33	0:0	4	0
arg	26:36	26:49	3	&sys->session
op	26:36	0:0	4	&
water	26:37	0:0	4	sys
op	26:40	0:0	4	->
water	26:42	0:0	4	session
water	26:50	0:0	2	;
if	27:4	31:4	2	(sts != MFX_ERR_NONE)
cond	27:8	27:15	3	sts != MFX_ERR_NONE
water	27:8	0:0	4	sts
op	27:12	0:0	4	!=
water	27:15	0:0	4	MFX_ERR_NONE
stmts	27:29	31:4	3	
water	27:29	0:0	4	{
call	28:8	28:72	4	msg_Err
arg	28:16	28:19	5	enc
water	28:16	0:0	6	enc
arg	28:21	28:72	5	"Unable to find an Intel Media SDK implementation."
water	28:21	0:0	6	"Unable to find an Intel Media SDK implementation."
water	28:73	0:0	4	;
call	29:8	29:16	4	free
arg	29:13	29:16	5	sys
water	29:13	0:0	6	sys
water	29:17	0:0	4	;
return	30:8	30:27	4	VLC_EGENERIC
water	30:15	0:0	5	VLC_EGENERIC
water	31:4	0:0	4	}
call	32:4	32:68	2	config_ChainParse
arg	32:22	32:25	3	enc
water	32:22	0:0	4	enc
arg	32:27	32:42	3	SOUT_CFG_PREFIX
water	32:27	0:0	4	SOUT_CFG_PREFIX
arg	32:44	32:56	3	sout_options
water	32:44	0:0	4	sout_options
arg	32:58	32:68	3	enc->p_cfg
water	32:58	0:0	4	enc
op	32:61	0:0	4	->
water	32:63	0:0	4	p_cfg
water	32:69	0:0	2	;
call	34:4	34:41	2	MFXQueryIMPL
arg	34:17	34:29	3	sys->session
water	34:17	0:0	4	sys
op	34:20	0:0	4	->
water	34:22	0:0	4	session
arg	34:31	34:41	3	&sys->impl
op	34:31	0:0	4	&
water	34:32	0:0	4	sys
op	34:35	0:0	4	->
water	34:37	0:0	4	impl
water	34:42	0:0	2	;
if	35:4	39:4	2	(!var_InheritBool (enc ,SOUT_CFG_PREFIX "software" ) && ( sys -> impl & MFX_IMPL_SOFTWARE ))
cond	35:8	35:91	3	!var_InheritBool (enc ,SOUT_CFG_PREFIX "software" ) && ( sys -> impl & MFX_IMPL_SOFTWARE )
op	35:8	0:0	4	!
call	35:9	35:56	4	var_InheritBool
arg	35:25	35:28	5	enc
water	35:25	0:0	6	enc
arg	35:30	35:56	5	SOUT_CFG_PREFIX"software"
water	35:30	0:0	6	SOUT_CFG_PREFIX
water	35:46	0:0	6	"software"
op	35:58	0:0	4	&&
water	35:61	0:0	4	(
water	35:62	0:0	4	sys
op	35:65	0:0	4	->
water	35:67	0:0	4	impl
op	35:72	0:0	4	&
water	35:74	0:0	4	MFX_IMPL_SOFTWARE
water	35:91	0:0	4	)
stmts	35:94	39:4	3	
water	35:94	0:0	4	{
call	36:8	36:82	4	msg_Err
arg	36:16	36:19	5	enc
water	36:16	0:0	6	enc
arg	36:21	36:82	5	"No hardware implementation found and software mode disabled"
water	36:21	0:0	6	"No hardware implementation found and software mode disabled"
water	36:83	0:0	4	;
call	37:8	37:16	4	free
arg	37:13	37:16	5	sys
water	37:13	0:0	6	sys
water	37:17	0:0	4	;
return	38:8	38:27	4	VLC_EGENERIC
water	38:15	0:0	5	VLC_EGENERIC
water	39:4	0:0	4	}
call	40:4	41:63	2	msg_Dbg
arg	40:12	40:15	3	enc
water	40:12	0:0	4	enc
arg	40:17	40:64	3	"Using Intel QuickSync Video %s implementation"
water	40:17	0:0	4	"Using Intel QuickSync Video %s implementation"
arg	41:8	41:63	3	sys->impl&MFX_IMPL_HARDWARE?"hardware":"software"
water	41:8	0:0	4	sys
op	41:11	0:0	4	->
water	41:13	0:0	4	impl
op	41:18	0:0	4	&
water	41:20	0:0	4	MFX_IMPL_HARDWARE
water	41:38	0:0	4	?
water	41:40	0:0	4	"hardware"
water	41:51	0:0	4	:
water	41:53	0:0	4	"software"
water	41:64	0:0	2	;
water	43:4	0:0	2	enc
op	43:7	0:0	2	->
water	43:9	0:0	2	p_sys
op	43:39	0:0	2	=
water	43:41	0:0	2	sys
water	43:44	0:0	2	;
water	44:4	0:0	2	enc
op	44:7	0:0	2	->
water	44:9	0:0	2	fmt_in
op	44:15	0:0	2	.
water	44:16	0:0	2	i_codec
op	44:39	0:0	2	=
water	44:41	0:0	2	VLC_CODEC_NV12
water	44:55	0:0	2	;
water	45:4	0:0	2	enc
op	45:7	0:0	2	->
water	45:9	0:0	2	fmt_in
op	45:15	0:0	2	.
water	45:16	0:0	2	video
op	45:21	0:0	2	.
water	45:22	0:0	2	i_bits_per_pixel
op	45:39	0:0	2	=
water	45:41	0:0	2	12
water	45:43	0:0	2	;
water	47:4	0:0	2	sys
op	47:7	0:0	2	->
water	47:9	0:0	2	params
op	47:15	0:0	2	.
water	47:16	0:0	2	mfx
op	47:19	0:0	2	.
water	47:20	0:0	2	FrameInfo
op	47:29	0:0	2	.
water	47:30	0:0	2	FrameRateExtN
op	47:44	0:0	2	=
water	47:46	0:0	2	enc
op	47:49	0:0	2	->
water	47:51	0:0	2	fmt_in
op	47:57	0:0	2	.
water	47:58	0:0	2	video
op	47:63	0:0	2	.
water	47:64	0:0	2	i_frame_rate
water	47:76	0:0	2	;
water	48:4	0:0	2	sys
op	48:7	0:0	2	->
water	48:9	0:0	2	params
op	48:15	0:0	2	.
water	48:16	0:0	2	mfx
op	48:19	0:0	2	.
water	48:20	0:0	2	FrameInfo
op	48:29	0:0	2	.
water	48:30	0:0	2	FrameRateExtD
op	48:44	0:0	2	=
water	48:46	0:0	2	enc
op	48:49	0:0	2	->
water	48:51	0:0	2	fmt_in
op	48:57	0:0	2	.
water	48:58	0:0	2	video
op	48:63	0:0	2	.
water	48:64	0:0	2	i_frame_rate_base
water	48:81	0:0	2	;
water	49:4	0:0	2	sys
op	49:7	0:0	2	->
water	49:9	0:0	2	params
op	49:15	0:0	2	.
water	49:16	0:0	2	mfx
op	49:19	0:0	2	.
water	49:20	0:0	2	FrameInfo
op	49:29	0:0	2	.
water	49:30	0:0	2	FourCC
op	49:44	0:0	2	=
water	49:46	0:0	2	MFX_FOURCC_NV12
water	49:61	0:0	2	;
water	50:4	0:0	2	sys
op	50:7	0:0	2	->
water	50:9	0:0	2	params
op	50:15	0:0	2	.
water	50:16	0:0	2	mfx
op	50:19	0:0	2	.
water	50:20	0:0	2	FrameInfo
op	50:29	0:0	2	.
water	50:30	0:0	2	ChromaFormat
op	50:44	0:0	2	=
water	50:46	0:0	2	MFX_CHROMAFORMAT_YUV420
water	50:69	0:0	2	;
water	51:4	0:0	2	sys
op	51:7	0:0	2	->
water	51:9	0:0	2	params
op	51:15	0:0	2	.
water	51:16	0:0	2	mfx
op	51:19	0:0	2	.
water	51:20	0:0	2	FrameInfo
op	51:29	0:0	2	.
water	51:30	0:0	2	Width
op	51:44	0:0	2	=
call	51:46	51:85	2	QSV_ALIGN
arg	51:56	51:58	3	16
water	51:56	0:0	4	16
arg	51:60	51:85	3	enc->fmt_in.video.i_width
water	51:60	0:0	4	enc
op	51:63	0:0	4	->
water	51:65	0:0	4	fmt_in
op	51:71	0:0	4	.
water	51:72	0:0	4	video
op	51:77	0:0	4	.
water	51:78	0:0	4	i_width
water	51:86	0:0	2	;
water	52:4	0:0	2	sys
op	52:7	0:0	2	->
water	52:9	0:0	2	params
op	52:15	0:0	2	.
water	52:16	0:0	2	mfx
op	52:19	0:0	2	.
water	52:20	0:0	2	FrameInfo
op	52:29	0:0	2	.
water	52:30	0:0	2	Height
op	52:44	0:0	2	=
call	52:46	52:86	2	QSV_ALIGN
arg	52:56	52:58	3	32
water	52:56	0:0	4	32
arg	52:60	52:86	3	enc->fmt_in.video.i_height
water	52:60	0:0	4	enc
op	52:63	0:0	4	->
water	52:65	0:0	4	fmt_in
op	52:71	0:0	4	.
water	52:72	0:0	4	video
op	52:77	0:0	4	.
water	52:78	0:0	4	i_height
water	52:87	0:0	2	;
water	53:4	0:0	2	sys
op	53:7	0:0	2	->
water	53:9	0:0	2	params
op	53:15	0:0	2	.
water	53:16	0:0	2	mfx
op	53:19	0:0	2	.
water	53:20	0:0	2	FrameInfo
op	53:29	0:0	2	.
water	53:30	0:0	2	CropW
op	53:44	0:0	2	=
water	53:46	0:0	2	enc
op	53:49	0:0	2	->
water	53:51	0:0	2	fmt_in
op	53:57	0:0	2	.
water	53:58	0:0	2	video
op	53:63	0:0	2	.
water	53:64	0:0	2	i_visible_width
water	53:79	0:0	2	;
water	54:4	0:0	2	sys
op	54:7	0:0	2	->
water	54:9	0:0	2	params
op	54:15	0:0	2	.
water	54:16	0:0	2	mfx
op	54:19	0:0	2	.
water	54:20	0:0	2	FrameInfo
op	54:29	0:0	2	.
water	54:30	0:0	2	CropH
op	54:44	0:0	2	=
water	54:46	0:0	2	enc
op	54:49	0:0	2	->
water	54:51	0:0	2	fmt_in
op	54:57	0:0	2	.
water	54:58	0:0	2	video
op	54:63	0:0	2	.
water	54:64	0:0	2	i_visible_height
water	54:80	0:0	2	;
water	55:4	0:0	2	sys
op	55:7	0:0	2	->
water	55:9	0:0	2	params
op	55:15	0:0	2	.
water	55:16	0:0	2	mfx
op	55:19	0:0	2	.
water	55:20	0:0	2	FrameInfo
op	55:29	0:0	2	.
water	55:30	0:0	2	PicStruct
op	55:44	0:0	2	=
water	55:46	0:0	2	MFX_PICSTRUCT_UNKNOWN
water	55:67	0:0	2	;
water	57:4	0:0	2	sys
op	57:7	0:0	2	->
water	57:9	0:0	2	params
op	57:15	0:0	2	.
water	57:16	0:0	2	IOPattern
op	57:32	0:0	2	=
water	57:34	0:0	2	MFX_IOPATTERN_IN_SYSTEM_MEMORY
water	57:64	0:0	2	;
water	58:4	0:0	2	sys
op	58:7	0:0	2	->
water	58:9	0:0	2	params
op	58:15	0:0	2	.
water	58:16	0:0	2	AsyncDepth
op	58:32	0:0	2	=
call	58:34	58:87	2	var_InheritInteger
arg	58:53	58:56	3	enc
water	58:53	0:0	4	enc
arg	58:58	58:87	3	SOUT_CFG_PREFIX"async-depth"
water	58:58	0:0	4	SOUT_CFG_PREFIX
water	58:74	0:0	4	"async-depth"
water	58:88	0:0	2	;
water	59:4	0:0	2	sys
op	59:7	0:0	2	->
water	59:9	0:0	2	params
op	59:15	0:0	2	.
water	59:16	0:0	2	mfx
op	59:19	0:0	2	.
water	59:20	0:0	2	GopPicSize
op	59:32	0:0	2	=
call	59:34	59:84	2	var_InheritInteger
arg	59:53	59:56	3	enc
water	59:53	0:0	4	enc
arg	59:58	59:84	3	SOUT_CFG_PREFIX"gop-size"
water	59:58	0:0	4	SOUT_CFG_PREFIX
water	59:74	0:0	4	"gop-size"
water	59:85	0:0	2	;
water	60:4	0:0	2	sys
op	60:7	0:0	2	->
water	60:9	0:0	2	params
op	60:15	0:0	2	.
water	60:16	0:0	2	mfx
op	60:19	0:0	2	.
water	60:20	0:0	2	GopRefDist
op	60:32	0:0	2	=
call	60:34	60:87	2	var_InheritInteger
arg	60:53	60:56	3	enc
water	60:53	0:0	4	enc
arg	60:58	60:87	3	SOUT_CFG_PREFIX"gop-refdist"
water	60:58	0:0	4	SOUT_CFG_PREFIX
water	60:74	0:0	4	"gop-refdist"
water	60:88	0:0	2	;
water	61:4	0:0	2	sys
op	61:7	0:0	2	->
water	61:9	0:0	2	params
op	61:15	0:0	2	.
water	61:16	0:0	2	mfx
op	61:19	0:0	2	.
water	61:20	0:0	2	IdrInterval
op	61:32	0:0	2	=
call	61:34	61:88	2	var_InheritInteger
arg	61:53	61:56	3	enc
water	61:53	0:0	4	enc
arg	61:58	61:88	3	SOUT_CFG_PREFIX"idr-interval"
water	61:58	0:0	4	SOUT_CFG_PREFIX
water	61:74	0:0	4	"idr-interval"
water	61:89	0:0	2	;
water	62:4	0:0	2	sys
op	62:7	0:0	2	->
water	62:9	0:0	2	params
op	62:15	0:0	2	.
water	62:16	0:0	2	mfx
op	62:19	0:0	2	.
water	62:20	0:0	2	NumSlice
op	62:32	0:0	2	=
call	62:34	62:85	2	var_InheritInteger
arg	62:53	62:56	3	enc
water	62:53	0:0	4	enc
arg	62:58	62:85	3	SOUT_CFG_PREFIX"num-slice"
water	62:58	0:0	4	SOUT_CFG_PREFIX
water	62:74	0:0	4	"num-slice"
water	62:86	0:0	2	;
water	63:4	0:0	2	sys
op	63:7	0:0	2	->
water	63:9	0:0	2	params
op	63:15	0:0	2	.
water	63:16	0:0	2	mfx
op	63:19	0:0	2	.
water	63:20	0:0	2	NumRefFrame
op	63:32	0:0	2	=
call	63:34	63:89	2	var_InheritInteger
arg	63:53	63:56	3	enc
water	63:53	0:0	4	enc
arg	63:58	63:89	3	SOUT_CFG_PREFIX"num-ref-frame"
water	63:58	0:0	4	SOUT_CFG_PREFIX
water	63:74	0:0	4	"num-ref-frame"
water	63:90	0:0	2	;
water	64:4	0:0	2	sys
op	64:7	0:0	2	->
water	64:9	0:0	2	params
op	64:15	0:0	2	.
water	64:16	0:0	2	mfx
op	64:19	0:0	2	.
water	64:20	0:0	2	TargetUsage
op	64:32	0:0	2	=
call	64:34	66:62	2	qsv_params_get_value
arg	64:55	64:72	3	target_usage_text
water	64:55	0:0	4	target_usage_text
arg	65:8	65:25	3	target_usage_list
water	65:8	0:0	4	target_usage_list
arg	65:27	65:52	3	sizeof(target_usage_list)
op	65:27	0:0	4	sizeof
water	65:33	0:0	4	(
water	65:34	0:0	4	target_usage_list
water	65:51	0:0	4	)
arg	66:8	66:62	3	var_InheritString(enc,SOUT_CFG_PREFIX"target-usage")
call	66:8	66:61	4	var_InheritString
arg	66:26	66:29	5	enc
water	66:26	0:0	6	enc
arg	66:31	66:61	5	SOUT_CFG_PREFIX"target-usage"
water	66:31	0:0	6	SOUT_CFG_PREFIX
water	66:47	0:0	6	"target-usage"
water	66:63	0:0	2	;
if	67:4	77:4	2	(enc -> fmt_out . i_codec == VLC_CODEC_H264)
cond	67:8	67:32	3	enc -> fmt_out . i_codec == VLC_CODEC_H264
water	67:8	0:0	4	enc
op	67:11	0:0	4	->
water	67:13	0:0	4	fmt_out
op	67:20	0:0	4	.
water	67:21	0:0	4	i_codec
op	67:29	0:0	4	==
water	67:32	0:0	4	VLC_CODEC_H264
stmts	67:48	77:4	3	
water	67:48	0:0	4	{
water	68:8	0:0	4	sys
op	68:11	0:0	4	->
water	68:13	0:0	4	params
op	68:19	0:0	4	.
water	68:20	0:0	4	mfx
op	68:23	0:0	4	.
water	68:24	0:0	4	CodecId
op	68:32	0:0	4	=
water	68:34	0:0	4	MFX_CODEC_AVC
water	68:47	0:0	4	;
water	69:8	0:0	4	sys
op	69:11	0:0	4	->
water	69:13	0:0	4	params
op	69:19	0:0	4	.
water	69:20	0:0	4	mfx
op	69:23	0:0	4	.
water	69:24	0:0	4	CodecProfile
op	69:37	0:0	4	=
call	69:39	71:66	4	qsv_params_get_value
arg	69:60	69:77	5	profile_h264_text
water	69:60	0:0	6	profile_h264_text
arg	70:12	70:29	5	profile_h264_list
water	70:12	0:0	6	profile_h264_list
arg	70:31	70:56	5	sizeof(profile_h264_list)
op	70:31	0:0	6	sizeof
water	70:37	0:0	6	(
water	70:38	0:0	6	profile_h264_list
water	70:55	0:0	6	)
arg	71:12	71:66	5	var_InheritString(enc,SOUT_CFG_PREFIX"h264-profile")
call	71:12	71:65	6	var_InheritString
arg	71:30	71:33	7	enc
water	71:30	0:0	8	enc
arg	71:35	71:65	7	SOUT_CFG_PREFIX"h264-profile"
water	71:35	0:0	8	SOUT_CFG_PREFIX
water	71:51	0:0	8	"h264-profile"
water	71:67	0:0	4	;
water	72:8	0:0	4	sys
op	72:11	0:0	4	->
water	72:13	0:0	4	params
op	72:19	0:0	4	.
water	72:20	0:0	4	mfx
op	72:23	0:0	4	.
water	72:24	0:0	4	CodecLevel
op	72:35	0:0	4	=
call	72:37	74:64	4	qsv_params_get_value
arg	72:58	72:73	5	level_h264_text
water	72:58	0:0	6	level_h264_text
arg	73:12	73:27	5	level_h264_list
water	73:12	0:0	6	level_h264_list
arg	73:29	73:52	5	sizeof(level_h264_list)
op	73:29	0:0	6	sizeof
water	73:35	0:0	6	(
water	73:36	0:0	6	level_h264_list
water	73:51	0:0	6	)
arg	74:12	74:64	5	var_InheritString(enc,SOUT_CFG_PREFIX"h264-level")
call	74:12	74:63	6	var_InheritString
arg	74:30	74:33	7	enc
water	74:30	0:0	8	enc
arg	74:35	74:63	7	SOUT_CFG_PREFIX"h264-level"
water	74:35	0:0	8	SOUT_CFG_PREFIX
water	74:51	0:0	8	"h264-level"
water	74:65	0:0	4	;
call	75:8	76:68	4	msg_Dbg
arg	75:16	75:19	5	enc
water	75:16	0:0	6	enc
arg	75:21	75:73	5	"Encoder in H264 mode, with profile %d and level %d"
water	75:21	0:0	6	"Encoder in H264 mode, with profile %d and level %d"
arg	76:12	76:40	5	sys->params.mfx.CodecProfile
water	76:12	0:0	6	sys
op	76:15	0:0	6	->
water	76:17	0:0	6	params
op	76:23	0:0	6	.
water	76:24	0:0	6	mfx
op	76:27	0:0	6	.
water	76:28	0:0	6	CodecProfile
arg	76:42	76:68	5	sys->params.mfx.CodecLevel
water	76:42	0:0	6	sys
op	76:45	0:0	6	->
water	76:47	0:0	6	params
op	76:53	0:0	6	.
water	76:54	0:0	6	mfx
op	76:57	0:0	6	.
water	76:58	0:0	6	CodecLevel
water	76:69	0:0	4	;
water	77:4	0:0	4	}
else	77:6	87:4	2
stmts	77:11	87:4	3	
water	77:11	0:0	4	{
water	78:8	0:0	4	sys
op	78:11	0:0	4	->
water	78:13	0:0	4	params
op	78:19	0:0	4	.
water	78:20	0:0	4	mfx
op	78:23	0:0	4	.
water	78:24	0:0	4	CodecId
op	78:32	0:0	4	=
water	78:34	0:0	4	MFX_CODEC_MPEG2
water	78:49	0:0	4	;
water	79:8	0:0	4	sys
op	79:11	0:0	4	->
water	79:13	0:0	4	params
op	79:19	0:0	4	.
water	79:20	0:0	4	mfx
op	79:23	0:0	4	.
water	79:24	0:0	4	CodecProfile
op	79:37	0:0	4	=
call	79:39	81:67	4	qsv_params_get_value
arg	79:60	79:78	5	profile_mpeg2_text
water	79:60	0:0	6	profile_mpeg2_text
arg	80:12	80:30	5	profile_mpeg2_list
water	80:12	0:0	6	profile_mpeg2_list
arg	80:32	80:58	5	sizeof(profile_mpeg2_list)
op	80:32	0:0	6	sizeof
water	80:38	0:0	6	(
water	80:39	0:0	6	profile_mpeg2_list
water	80:57	0:0	6	)
arg	81:12	81:67	5	var_InheritString(enc,SOUT_CFG_PREFIX"mpeg2-profile")
call	81:12	81:66	6	var_InheritString
arg	81:30	81:33	7	enc
water	81:30	0:0	8	enc
arg	81:35	81:66	7	SOUT_CFG_PREFIX"mpeg2-profile"
water	81:35	0:0	8	SOUT_CFG_PREFIX
water	81:51	0:0	8	"mpeg2-profile"
water	81:68	0:0	4	;
water	82:8	0:0	4	sys
op	82:11	0:0	4	->
water	82:13	0:0	4	params
op	82:19	0:0	4	.
water	82:20	0:0	4	mfx
op	82:23	0:0	4	.
water	82:24	0:0	4	CodecLevel
op	82:35	0:0	4	=
call	82:37	84:65	4	qsv_params_get_value
arg	82:58	82:74	5	level_mpeg2_text
water	82:58	0:0	6	level_mpeg2_text
arg	83:12	83:28	5	level_mpeg2_list
water	83:12	0:0	6	level_mpeg2_list
arg	83:30	83:54	5	sizeof(level_mpeg2_list)
op	83:30	0:0	6	sizeof
water	83:36	0:0	6	(
water	83:37	0:0	6	level_mpeg2_list
water	83:53	0:0	6	)
arg	84:12	84:65	5	var_InheritString(enc,SOUT_CFG_PREFIX"mpeg2-level")
call	84:12	84:64	6	var_InheritString
arg	84:30	84:33	7	enc
water	84:30	0:0	8	enc
arg	84:35	84:64	7	SOUT_CFG_PREFIX"mpeg2-level"
water	84:35	0:0	8	SOUT_CFG_PREFIX
water	84:51	0:0	8	"mpeg2-level"
water	84:66	0:0	4	;
call	85:8	86:68	4	msg_Dbg
arg	85:16	85:19	5	enc
water	85:16	0:0	6	enc
arg	85:21	85:74	5	"Encoder in MPEG2 mode, with profile %d and level %d"
water	85:21	0:0	6	"Encoder in MPEG2 mode, with profile %d and level %d"
arg	86:12	86:40	5	sys->params.mfx.CodecProfile
water	86:12	0:0	6	sys
op	86:15	0:0	6	->
water	86:17	0:0	6	params
op	86:23	0:0	6	.
water	86:24	0:0	6	mfx
op	86:27	0:0	6	.
water	86:28	0:0	6	CodecProfile
arg	86:42	86:68	5	sys->params.mfx.CodecLevel
water	86:42	0:0	6	sys
op	86:45	0:0	6	->
water	86:47	0:0	6	params
op	86:53	0:0	6	.
water	86:54	0:0	6	mfx
op	86:57	0:0	6	.
water	86:58	0:0	6	CodecLevel
water	86:69	0:0	4	;
water	87:4	0:0	4	}
water	88:4	0:0	2	sys
op	88:7	0:0	2	->
water	88:9	0:0	2	params
op	88:15	0:0	2	.
water	88:16	0:0	2	mfx
op	88:19	0:0	2	.
water	88:20	0:0	2	RateControlMethod
op	88:38	0:0	2	=
call	88:40	90:59	2	qsv_params_get_value
arg	88:61	88:75	3	rc_method_text
water	88:61	0:0	4	rc_method_text
arg	89:8	89:22	3	rc_method_list
water	89:8	0:0	4	rc_method_list
arg	89:24	89:46	3	sizeof(rc_method_list)
op	89:24	0:0	4	sizeof
water	89:30	0:0	4	(
water	89:31	0:0	4	rc_method_list
water	89:45	0:0	4	)
arg	90:8	90:59	3	var_InheritString(enc,SOUT_CFG_PREFIX"rc-method")
call	90:8	90:58	4	var_InheritString
arg	90:26	90:29	5	enc
water	90:26	0:0	6	enc
arg	90:31	90:58	5	SOUT_CFG_PREFIX"rc-method"
water	90:31	0:0	6	SOUT_CFG_PREFIX
water	90:47	0:0	6	"rc-method"
water	90:60	0:0	2	;
call	91:4	92:59	2	msg_Dbg
arg	91:12	91:15	3	enc
water	91:12	0:0	4	enc
arg	91:17	91:57	3	"Encoder using '%s' Rate Control method"
water	91:17	0:0	4	"Encoder using '%s' Rate Control method"
arg	92:8	92:59	3	var_InheritString(enc,SOUT_CFG_PREFIX"rc-method")
call	92:8	92:58	4	var_InheritString
arg	92:26	92:29	5	enc
water	92:26	0:0	6	enc
arg	92:31	92:58	5	SOUT_CFG_PREFIX"rc-method"
water	92:31	0:0	6	SOUT_CFG_PREFIX
water	92:47	0:0	6	"rc-method"
water	92:60	0:0	2	;
if	93:4	99:4	2	(sys -> params . mfx . RateControlMethod == MFX_RATECONTROL_CQP)
cond	93:8	93:45	3	sys -> params . mfx . RateControlMethod == MFX_RATECONTROL_CQP
water	93:8	0:0	4	sys
op	93:11	0:0	4	->
water	93:13	0:0	4	params
op	93:19	0:0	4	.
water	93:20	0:0	4	mfx
op	93:23	0:0	4	.
water	93:24	0:0	4	RateControlMethod
op	93:42	0:0	4	==
water	93:45	0:0	4	MFX_RATECONTROL_CQP
stmts	93:66	99:4	3	
water	93:66	0:0	4	{
water	94:8	0:0	4	sys
op	94:11	0:0	4	->
water	94:13	0:0	4	params
op	94:19	0:0	4	.
water	94:20	0:0	4	mfx
op	94:23	0:0	4	.
water	94:24	0:0	4	QPI
op	94:28	0:0	4	=
water	94:30	0:0	4	sys
op	94:33	0:0	4	->
water	94:35	0:0	4	params
op	94:41	0:0	4	.
water	94:42	0:0	4	mfx
op	94:45	0:0	4	.
water	94:46	0:0	4	QPB
op	94:50	0:0	4	=
water	94:52	0:0	4	sys
op	94:55	0:0	4	->
water	94:57	0:0	4	params
op	94:63	0:0	4	.
water	94:64	0:0	4	mfx
op	94:67	0:0	4	.
water	94:68	0:0	4	QPP
op	94:72	0:0	4	=
call	95:12	95:56	4	var_InheritInteger
arg	95:31	95:34	5	enc
water	95:31	0:0	6	enc
arg	95:36	95:56	5	SOUT_CFG_PREFIX"qp"
water	95:36	0:0	6	SOUT_CFG_PREFIX
water	95:52	0:0	6	"qp"
water	95:57	0:0	4	;
water	96:8	0:0	4	sys
op	96:11	0:0	4	->
water	96:13	0:0	4	params
op	96:19	0:0	4	.
water	96:20	0:0	4	mfx
op	96:23	0:0	4	.
water	96:24	0:0	4	QPI
op	96:28	0:0	4	=
call	96:30	96:75	4	var_InheritInteger
arg	96:49	96:52	5	enc
water	96:49	0:0	6	enc
arg	96:54	96:75	5	SOUT_CFG_PREFIX"qpi"
water	96:54	0:0	6	SOUT_CFG_PREFIX
water	96:70	0:0	6	"qpi"
water	96:76	0:0	4	;
water	97:8	0:0	4	sys
op	97:11	0:0	4	->
water	97:13	0:0	4	params
op	97:19	0:0	4	.
water	97:20	0:0	4	mfx
op	97:23	0:0	4	.
water	97:24	0:0	4	QPB
op	97:28	0:0	4	=
call	97:30	97:75	4	var_InheritInteger
arg	97:49	97:52	5	enc
water	97:49	0:0	6	enc
arg	97:54	97:75	5	SOUT_CFG_PREFIX"qpb"
water	97:54	0:0	6	SOUT_CFG_PREFIX
water	97:70	0:0	6	"qpb"
water	97:76	0:0	4	;
water	98:8	0:0	4	sys
op	98:11	0:0	4	->
water	98:13	0:0	4	params
op	98:19	0:0	4	.
water	98:20	0:0	4	mfx
op	98:23	0:0	4	.
water	98:24	0:0	4	QPP
op	98:28	0:0	4	=
call	98:30	98:75	4	var_InheritInteger
arg	98:49	98:52	5	enc
water	98:49	0:0	6	enc
arg	98:54	98:75	5	SOUT_CFG_PREFIX"qpp"
water	98:54	0:0	6	SOUT_CFG_PREFIX
water	98:70	0:0	6	"qpp"
water	98:76	0:0	4	;
water	99:4	0:0	4	}
else	99:6	111:4	2
stmts	99:11	111:4	3	
water	99:11	0:0	4	{
if	100:8	104:8	4	(! enc -> fmt_out . i_bitrate)
cond	100:12	100:26	5	! enc -> fmt_out . i_bitrate
op	100:12	0:0	6	!
water	100:13	0:0	6	enc
op	100:16	0:0	6	->
water	100:18	0:0	6	fmt_out
op	100:25	0:0	6	.
water	100:26	0:0	6	i_bitrate
stmts	100:37	104:8	5	
water	100:37	0:0	6	{
call	101:12	102:35	6	msg_Warn
arg	101:21	101:24	7	enc
water	101:21	0:0	8	enc
arg	101:26	101:66	7	"No bitrate specified, using default %d"
water	101:26	0:0	8	"No bitrate specified, using default %d"
arg	102:16	102:35	7	QSV_BITRATE_DEFAULT
water	102:16	0:0	8	QSV_BITRATE_DEFAULT
water	102:36	0:0	6	;
water	103:12	0:0	6	sys
op	103:15	0:0	6	->
water	103:17	0:0	6	params
op	103:23	0:0	6	.
water	103:24	0:0	6	mfx
op	103:27	0:0	6	.
water	103:28	0:0	6	TargetKbps
op	103:39	0:0	6	=
water	103:41	0:0	6	QSV_BITRATE_DEFAULT
water	103:60	0:0	6	;
water	104:8	0:0	6	}
else	104:10	105:70	4
stmts	105:12	105:70	5	
water	105:12	0:0	6	sys
op	105:15	0:0	6	->
water	105:17	0:0	6	params
op	105:23	0:0	6	.
water	105:24	0:0	6	mfx
op	105:27	0:0	6	.
water	105:28	0:0	6	TargetKbps
op	105:39	0:0	6	=
water	105:41	0:0	6	enc
op	105:44	0:0	6	->
water	105:46	0:0	6	fmt_out
op	105:53	0:0	6	.
water	105:54	0:0	6	i_bitrate
op	105:64	0:0	6	/
water	105:66	0:0	6	1000
water	105:70	0:0	6	;
if	106:8	109:8	4	(sys -> params . mfx . RateControlMethod == MFX_RATECONTROL_AVBR)
cond	106:12	106:49	5	sys -> params . mfx . RateControlMethod == MFX_RATECONTROL_AVBR
water	106:12	0:0	6	sys
op	106:15	0:0	6	->
water	106:17	0:0	6	params
op	106:23	0:0	6	.
water	106:24	0:0	6	mfx
op	106:27	0:0	6	.
water	106:28	0:0	6	RateControlMethod
op	106:46	0:0	6	==
water	106:49	0:0	6	MFX_RATECONTROL_AVBR
stmts	106:71	109:8	5	
water	106:71	0:0	6	{
water	107:12	0:0	6	sys
op	107:15	0:0	6	->
water	107:17	0:0	6	params
op	107:23	0:0	6	.
water	107:24	0:0	6	mfx
op	107:27	0:0	6	.
water	107:28	0:0	6	Accuracy
op	107:37	0:0	6	=
call	107:39	107:89	6	var_InheritInteger
arg	107:58	107:61	7	enc
water	107:58	0:0	8	enc
arg	107:63	107:89	7	SOUT_CFG_PREFIX"accuracy"
water	107:63	0:0	8	SOUT_CFG_PREFIX
water	107:79	0:0	8	"accuracy"
water	107:90	0:0	6	;
water	108:12	0:0	6	sys
op	108:15	0:0	6	->
water	108:17	0:0	6	params
op	108:23	0:0	6	.
water	108:24	0:0	6	mfx
op	108:27	0:0	6	.
water	108:28	0:0	6	Convergence
op	108:40	0:0	6	=
call	108:42	108:95	6	var_InheritInteger
arg	108:61	108:64	7	enc
water	108:61	0:0	8	enc
arg	108:66	108:95	7	SOUT_CFG_PREFIX"convergence"
water	108:66	0:0	8	SOUT_CFG_PREFIX
water	108:82	0:0	8	"convergence"
water	108:96	0:0	6	;
water	109:8	0:0	6	}
else	109:10	110:92	4
stmts	109:15	110:92	5	
if	109:15	110:92	6	(sys -> params . mfx . RateControlMethod == MFX_RATECONTROL_VBR)
cond	109:19	109:56	7	sys -> params . mfx . RateControlMethod == MFX_RATECONTROL_VBR
water	109:19	0:0	8	sys
op	109:22	0:0	8	->
water	109:24	0:0	8	params
op	109:30	0:0	8	.
water	109:31	0:0	8	mfx
op	109:34	0:0	8	.
water	109:35	0:0	8	RateControlMethod
op	109:53	0:0	8	==
water	109:56	0:0	8	MFX_RATECONTROL_VBR
stmts	110:12	110:92	7	
water	110:12	0:0	8	sys
op	110:15	0:0	8	->
water	110:17	0:0	8	params
op	110:23	0:0	8	.
water	110:24	0:0	8	mfx
op	110:27	0:0	8	.
water	110:28	0:0	8	MaxKbps
op	110:36	0:0	8	=
call	110:38	110:91	8	var_InheritInteger
arg	110:57	110:60	9	enc
water	110:57	0:0	10	enc
arg	110:62	110:91	9	SOUT_CFG_PREFIX"bitrate-max"
water	110:62	0:0	10	SOUT_CFG_PREFIX
water	110:78	0:0	10	"bitrate-max"
water	110:92	0:0	8	;
water	111:4	0:0	4	}
water	113:4	0:0	2	sts
op	113:8	0:0	2	=
call	113:10	113:56	2	MFXVideoENCODE_Init
arg	113:30	113:42	3	sys->session
water	113:30	0:0	4	sys
op	113:33	0:0	4	->
water	113:35	0:0	4	session
arg	113:44	113:56	3	&sys->params
op	113:44	0:0	4	&
water	113:45	0:0	4	sys
op	113:48	0:0	4	->
water	113:50	0:0	4	params
water	113:57	0:0	2	;
if	114:4	115:61	2	(sts == MFX_ERR_NONE)
cond	114:8	114:15	3	sts == MFX_ERR_NONE
water	114:8	0:0	4	sts
op	114:12	0:0	4	==
water	114:15	0:0	4	MFX_ERR_NONE
stmts	115:8	115:61	3	
call	115:8	115:60	4	msg_Dbg
arg	115:16	115:19	5	enc
water	115:16	0:0	6	enc
arg	115:21	115:60	5	"Successfuly initialized video encoder"
water	115:21	0:0	6	"Successfuly initialized video encoder"
water	115:61	0:0	4	;
else	116:4	120:4	2
stmts	116:9	120:4	3	
if	116:9	120:4	4	(sts < MFX_ERR_NONE)
cond	116:13	116:19	5	sts < MFX_ERR_NONE
water	116:13	0:0	6	sts
op	116:17	0:0	6	<
water	116:19	0:0	6	MFX_ERR_NONE
stmts	116:33	120:4	5	
water	116:33	0:0	6	{
call	117:8	118:71	6	msg_Err
arg	117:16	117:19	7	enc
water	117:16	0:0	8	enc
arg	117:21	118:66	7	"Unable to initialize video encoder error (%d). "" Most likely because of provided encoding parameters"
water	117:21	0:0	8	"Unable to initialize video encoder error (%d). "
water	118:12	0:0	8	" Most likely because of provided encoding parameters"
arg	118:68	118:71	7	sts
water	118:68	0:0	8	sts
water	118:72	0:0	6	;
goto	119:8	119:18	6	error
water	119:13	0:0	7	error
water	120:4	0:0	6	}
else	120:6	121:102	2
stmts	121:8	121:102	3	
call	121:8	121:101	4	msg_Warn
arg	121:17	121:20	5	enc
water	121:17	0:0	6	enc
arg	121:22	121:96	5	"Video encoder initialization : %d. The stream might be corrupted/invalid"
water	121:22	0:0	6	"Video encoder initialization : %d. The stream might be corrupted/invalid"
arg	121:98	121:101	5	sts
water	121:98	0:0	6	sts
water	121:102	0:0	4	;
call	123:4	123:39	2	memset
arg	123:11	123:19	3	&headers
op	123:11	0:0	4	&
water	123:12	0:0	4	headers
arg	123:21	123:22	3	0
water	123:21	0:0	4	0
arg	123:24	123:39	3	sizeof(headers)
op	123:24	0:0	4	sizeof
water	123:30	0:0	4	(
water	123:31	0:0	4	headers
water	123:38	0:0	4	)
water	123:40	0:0	2	;
call	124:4	124:33	2	memset
arg	124:11	124:16	3	&nals
op	124:11	0:0	4	&
water	124:12	0:0	4	nals
arg	124:18	124:19	3	0
water	124:18	0:0	4	0
arg	124:21	124:33	3	sizeof(nals)
op	124:21	0:0	4	sizeof
water	124:27	0:0	4	(
water	124:28	0:0	4	nals
water	124:32	0:0	4	)
water	124:34	0:0	2	;
water	125:4	0:0	2	headers
op	125:11	0:0	2	.
water	125:12	0:0	2	Header
op	125:18	0:0	2	.
water	125:19	0:0	2	BufferId
op	125:28	0:0	2	=
water	125:30	0:0	2	MFX_EXTBUFF_CODING_OPTION_SPSPPS
water	125:62	0:0	2	;
water	126:4	0:0	2	headers
op	126:11	0:0	2	.
water	126:12	0:0	2	Header
op	126:18	0:0	2	.
water	126:19	0:0	2	BufferSz
op	126:28	0:0	2	=
op	126:30	0:0	2	sizeof
water	126:36	0:0	2	(
water	126:37	0:0	2	headers
water	126:44	0:0	2	)
water	126:45	0:0	2	;
water	127:4	0:0	2	headers
op	127:11	0:0	2	.
water	127:12	0:0	2	SPSBufSize
op	127:28	0:0	2	=
water	127:30	0:0	2	headers
op	127:37	0:0	2	.
water	127:38	0:0	2	PPSBufSize
op	127:49	0:0	2	=
water	127:51	0:0	2	64
water	127:53	0:0	2	;
water	128:4	0:0	2	headers
op	128:11	0:0	2	.
water	128:12	0:0	2	SPSBuffer
op	128:28	0:0	2	=
water	128:30	0:0	2	nals
water	128:34	0:0	2	;
water	129:4	0:0	2	headers
op	129:11	0:0	2	.
water	129:12	0:0	2	PPSBuffer
op	129:28	0:0	2	=
water	129:30	0:0	2	nals
op	129:35	0:0	2	+
water	129:37	0:0	2	64
water	129:39	0:0	2	;
water	130:4	0:0	2	sys
op	130:7	0:0	2	->
water	130:9	0:0	2	params
op	130:15	0:0	2	.
water	130:16	0:0	2	ExtParam
op	130:28	0:0	2	=
water	130:30	0:0	2	(
water	130:31	0:0	2	mfxExtBuffer
op	130:44	0:0	2	*
op	130:45	0:0	2	*
water	130:46	0:0	2	)
op	130:47	0:0	2	&
water	130:48	0:0	2	extended_params
water	130:63	0:0	2	;
water	131:4	0:0	2	sys
op	131:7	0:0	2	->
water	131:9	0:0	2	params
op	131:15	0:0	2	.
water	131:16	0:0	2	NumExtParam
op	131:28	0:0	2	=
water	131:30	0:0	2	1
water	131:31	0:0	2	;
call	132:4	132:59	2	MFXVideoENCODE_GetVideoParam
arg	132:33	132:45	3	sys->session
water	132:33	0:0	4	sys
op	132:36	0:0	4	->
water	132:38	0:0	4	session
arg	132:47	132:59	3	&sys->params
op	132:47	0:0	4	&
water	132:48	0:0	4	sys
op	132:51	0:0	4	->
water	132:53	0:0	4	params
water	132:60	0:0	2	;
water	133:4	0:0	2	sys
op	133:7	0:0	2	->
water	133:9	0:0	2	params
op	133:15	0:0	2	.
water	133:16	0:0	2	NumExtParam
op	133:28	0:0	2	=
water	133:30	0:0	2	0
water	133:31	0:0	2	;
water	134:4	0:0	2	sys
op	134:7	0:0	2	->
water	134:9	0:0	2	params
op	134:15	0:0	2	.
water	134:16	0:0	2	ExtParam
op	134:25	0:0	2	=
water	134:27	0:0	2	NULL
water	134:31	0:0	2	;
water	135:4	0:0	2	i_extra
op	135:12	0:0	2	=
water	135:14	0:0	2	headers
op	135:21	0:0	2	.
water	135:22	0:0	2	SPSBufSize
op	135:33	0:0	2	+
water	135:35	0:0	2	headers
op	135:42	0:0	2	.
water	135:43	0:0	2	PPSBufSize
water	135:53	0:0	2	;
water	136:4	0:0	2	p_extra
op	136:12	0:0	2	=
call	136:14	136:28	2	malloc
arg	136:21	136:28	3	i_extra
water	136:21	0:0	4	i_extra
water	136:29	0:0	2	;
if	137:4	138:18	2	(unlikely (! p_extra ))
cond	137:8	137:25	3	unlikely (! p_extra )
call	137:8	137:25	4	unlikely
arg	137:17	137:25	5	!p_extra
op	137:17	0:0	6	!
water	137:18	0:0	6	p_extra
stmts	138:8	138:18	3	
goto	138:8	138:18	4	nomem
water	138:13	0:0	5	nomem
call	139:4	139:57	2	memcpy
arg	139:11	139:18	3	p_extra
water	139:11	0:0	4	p_extra
arg	139:20	139:37	3	headers.SPSBuffer
water	139:20	0:0	4	headers
op	139:27	0:0	4	.
water	139:28	0:0	4	SPSBuffer
arg	139:39	139:57	3	headers.SPSBufSize
water	139:39	0:0	4	headers
op	139:46	0:0	4	.
water	139:47	0:0	4	SPSBufSize
water	139:58	0:0	2	;
call	140:4	140:78	2	memcpy
arg	140:11	140:39	3	p_extra+headers.SPSBufSize
water	140:11	0:0	4	p_extra
op	140:19	0:0	4	+
water	140:21	0:0	4	headers
op	140:28	0:0	4	.
water	140:29	0:0	4	SPSBufSize
arg	140:41	140:58	3	headers.PPSBuffer
water	140:41	0:0	4	headers
op	140:48	0:0	4	.
water	140:49	0:0	4	PPSBuffer
arg	140:60	140:78	3	headers.PPSBufSize
water	140:60	0:0	4	headers
op	140:67	0:0	4	.
water	140:68	0:0	4	PPSBufSize
water	140:79	0:0	2	;
water	141:4	0:0	2	enc
op	141:7	0:0	2	->
water	141:9	0:0	2	fmt_out
op	141:16	0:0	2	.
water	141:17	0:0	2	p_extra
op	141:25	0:0	2	=
water	141:27	0:0	2	p_extra
water	141:34	0:0	2	;
water	142:4	0:0	2	enc
op	142:7	0:0	2	->
water	142:9	0:0	2	fmt_out
op	142:16	0:0	2	.
water	142:17	0:0	2	i_extra
op	142:25	0:0	2	=
water	142:27	0:0	2	i_extra
water	142:34	0:0	2	;
water	143:4	0:0	2	sys
op	143:7	0:0	2	->
water	143:9	0:0	2	async_depth
op	143:21	0:0	2	=
water	143:23	0:0	2	sys
op	143:26	0:0	2	->
water	143:28	0:0	2	params
op	143:34	0:0	2	.
water	143:35	0:0	2	AsyncDepth
water	143:45	0:0	2	;
water	144:4	0:0	2	sys
op	144:7	0:0	2	->
water	144:9	0:0	2	tasks
op	144:15	0:0	2	=
call	144:17	144:62	2	calloc
arg	144:24	144:40	3	sys->async_depth
water	144:24	0:0	4	sys
op	144:27	0:0	4	->
water	144:29	0:0	4	async_depth
arg	144:42	144:62	3	sizeof(async_task_t)
op	144:42	0:0	4	sizeof
water	144:48	0:0	4	(
water	144:49	0:0	4	async_task_t
water	144:61	0:0	4	)
water	144:63	0:0	2	;
if	145:4	146:18	2	(unlikely (! sys -> tasks ))
cond	145:8	145:28	3	unlikely (! sys -> tasks )
call	145:8	145:28	4	unlikely
arg	145:17	145:28	5	!sys->tasks
op	145:17	0:0	6	!
water	145:18	0:0	6	sys
op	145:21	0:0	6	->
water	145:23	0:0	6	tasks
stmts	146:8	146:18	3	
goto	146:8	146:18	4	nomem
water	146:13	0:0	5	nomem
if	148:4	149:18	2	(MFXVideoENCODE_QueryIOSurf (sys -> session ,& sys -> params ,& alloc_request ) != MFX_ERR_NONE)
cond	148:8	148:81	3	MFXVideoENCODE_QueryIOSurf (sys -> session ,& sys -> params ,& alloc_request ) != MFX_ERR_NONE
call	148:8	148:77	4	MFXVideoENCODE_QueryIOSurf
arg	148:35	148:47	5	sys->session
water	148:35	0:0	6	sys
op	148:38	0:0	6	->
water	148:40	0:0	6	session
arg	148:49	148:61	5	&sys->params
op	148:49	0:0	6	&
water	148:50	0:0	6	sys
op	148:53	0:0	6	->
water	148:55	0:0	6	params
arg	148:63	148:77	5	&alloc_request
op	148:63	0:0	6	&
water	148:64	0:0	6	alloc_request
op	148:78	0:0	4	!=
water	148:81	0:0	4	MFX_ERR_NONE
stmts	149:8	149:18	3	
goto	149:8	149:18	4	error
water	149:13	0:0	5	error
if	150:4	151:18	2	(qsv_frame_pool_Init (& sys -> frames ,& alloc_request ,sys -> async_depth ) != VLC_SUCCESS)
cond	150:8	150:79	3	qsv_frame_pool_Init (& sys -> frames ,& alloc_request ,sys -> async_depth ) != VLC_SUCCESS
call	150:8	150:74	4	qsv_frame_pool_Init
arg	150:28	150:40	5	&sys->frames
op	150:28	0:0	6	&
water	150:29	0:0	6	sys
op	150:32	0:0	6	->
water	150:34	0:0	6	frames
arg	150:42	150:56	5	&alloc_request
op	150:42	0:0	6	&
water	150:43	0:0	6	alloc_request
arg	150:58	150:74	5	sys->async_depth
water	150:58	0:0	6	sys
op	150:61	0:0	6	->
water	150:63	0:0	6	async_depth
op	150:76	0:0	4	!=
water	150:79	0:0	4	VLC_SUCCESS
stmts	151:8	151:18	3	
goto	151:8	151:18	4	nomem
water	151:13	0:0	5	nomem
call	152:4	152:82	2	msg_Dbg
arg	152:12	152:15	3	enc
water	152:12	0:0	4	enc
arg	152:17	152:49	3	"Requested %d surfaces for work"
water	152:17	0:0	4	"Requested %d surfaces for work"
arg	152:51	152:82	3	alloc_request.NumFrameSuggested
water	152:51	0:0	4	alloc_request
op	152:64	0:0	4	.
water	152:65	0:0	4	NumFrameSuggested
water	152:83	0:0	2	;
water	153:4	0:0	2	enc
op	153:7	0:0	2	->
water	153:9	0:0	2	pf_encode_video
op	153:25	0:0	2	=
water	153:27	0:0	2	Encode
water	153:33	0:0	2	;
return	154:4	154:22	2	VLC_SUCCESS
water	154:11	0:0	3	VLC_SUCCESS
label	155:1	155:6	2	error :
call	156:4	156:14	2	Close
arg	156:10	156:14	3	this
water	156:10	0:0	4	this
water	156:15	0:0	2	;
return	157:4	157:23	2	VLC_EGENERIC
water	157:11	0:0	3	VLC_EGENERIC
label	158:1	158:6	2	nomem :
call	159:4	159:14	2	Close
arg	159:10	159:14	3	this
water	159:10	0:0	4	this
water	159:15	0:0	2	;
return	160:4	160:21	2	VLC_ENOMEM
water	160:11	0:0	3	VLC_ENOMEM
