func	2:0	32:0	0	static int	sms_Download
params	2:23	0:0	1	
param	2:25	2:36	2	stream_t *	s
param	2:38	2:52	2	chunk_t *	chunk
param	2:54	2:64	2	char *	url
stmnts	0:0	31:22	1	
decl	4:4	4:34	2	stream_sys_t	*p_sys
op	4:24	0:0	2	=
water	4:26	0:0	2	s
op	4:27	0:0	2	->
water	4:29	0:0	2	p_sys
decl	5:4	5:44	2	stream_t	*p_ts
op	5:19	0:0	2	=
call	5:21	5:43	3	stream_UrlNew
arg	5:36	5:37	4	s
water	5:36	0:0	5	s
arg	5:39	5:43	4	url
water	5:39	0:0	5	url
call	6:4	6:14	2	free
arg	6:10	6:14	3	url
water	6:10	0:0	4	url
water	6:15	0:0	2	;
if	7:4	8:27	2	(p_ts == NULL)
cond	7:8	7:16	3	p_ts == NULL
water	7:8	0:0	4	p_ts
op	7:13	0:0	4	==
water	7:16	0:0	4	NULL
stmts	8:8	8:27	3	
return	8:8	8:27	4	VLC_EGENERIC
water	8:15	0:0	5	VLC_EGENERIC
decl	9:4	9:38	2	int64_t	size
op	9:17	0:0	2	=
call	9:19	9:37	3	stream_Size
arg	9:32	9:37	4	p_ts
water	9:32	0:0	5	p_ts
water	10:4	0:0	2	chunk
op	10:9	0:0	2	->
water	10:11	0:0	2	size
op	10:16	0:0	2	=
water	10:18	0:0	2	size
water	10:22	0:0	2	;
water	11:4	0:0	2	chunk
op	11:9	0:0	2	->
water	11:11	0:0	2	offset
op	11:18	0:0	2	=
water	11:20	0:0	2	p_sys
op	11:25	0:0	2	->
water	11:27	0:0	2	download
op	11:35	0:0	2	.
water	11:36	0:0	2	next_chunk_offset
water	11:53	0:0	2	;
water	12:4	0:0	2	p_sys
op	12:9	0:0	2	->
water	12:11	0:0	2	download
op	12:19	0:0	2	.
water	12:20	0:0	2	next_chunk_offset
op	12:38	0:0	2	+=
water	12:41	0:0	2	chunk
op	12:46	0:0	2	->
water	12:48	0:0	2	size
water	12:52	0:0	2	;
water	13:4	0:0	2	chunk
op	13:9	0:0	2	->
water	13:11	0:0	2	data
op	13:16	0:0	2	=
call	13:18	13:31	2	malloc
arg	13:26	13:31	3	size
water	13:26	0:0	4	size
water	13:32	0:0	2	;
if	14:4	18:4	2	(chunk -> data == NULL)
cond	14:8	14:23	3	chunk -> data == NULL
water	14:8	0:0	4	chunk
op	14:13	0:0	4	->
water	14:15	0:0	4	data
op	14:20	0:0	4	==
water	14:23	0:0	4	NULL
stmts	15:4	18:4	3	
water	15:4	0:0	4	{
call	16:8	16:28	4	stream_Delete
arg	16:23	16:28	5	p_ts
water	16:23	0:0	6	p_ts
water	16:29	0:0	4	;
return	17:8	17:25	4	VLC_ENOMEM
water	17:15	0:0	5	VLC_ENOMEM
water	18:4	0:0	4	}
decl	19:4	19:53	2	int	read
op	19:13	0:0	2	=
call	19:15	19:52	3	stream_Read
arg	19:28	19:32	4	p_ts
water	19:28	0:0	5	p_ts
arg	19:34	19:45	4	chunk->data
water	19:34	0:0	5	chunk
op	19:39	0:0	5	->
water	19:41	0:0	5	data
arg	19:47	19:52	4	size
water	19:47	0:0	5	size
if	20:4	25:4	2	(read < size)
cond	20:8	20:15	3	read < size
water	20:8	0:0	4	read
op	20:13	0:0	4	<
water	20:15	0:0	4	size
stmts	21:4	25:4	3	
water	21:4	0:0	4	{
call	22:8	23:48	4	msg_Warn
arg	22:18	22:19	5	s
water	22:18	0:0	6	s
arg	22:21	23:35	5	"sms_Download: I requested %"PRIi64" bytes, ""but I got only %i"
water	22:21	0:0	6	"sms_Download: I requested %"
water	22:50	0:0	6	PRIi64
water	22:56	0:0	6	" bytes, "
water	23:16	0:0	6	"but I got only %i"
arg	23:37	23:41	5	size
water	23:37	0:0	6	size
arg	23:43	23:48	5	read
water	23:43	0:0	6	read
water	23:49	0:0	4	;
water	24:8	0:0	4	chunk
op	24:13	0:0	4	->
water	24:15	0:0	4	data
op	24:20	0:0	4	=
call	24:22	24:49	4	realloc
arg	24:31	24:42	5	chunk->data
water	24:31	0:0	6	chunk
op	24:36	0:0	6	->
water	24:38	0:0	6	data
arg	24:44	24:49	5	read
water	24:44	0:0	6	read
water	24:50	0:0	4	;
water	25:4	0:0	4	}
call	26:4	26:24	2	stream_Delete
arg	26:19	26:24	3	p_ts
water	26:19	0:0	4	p_ts
water	26:25	0:0	2	;
call	27:4	27:47	2	vlc_mutex_lock
arg	27:20	27:47	3	&p_sys->download.lock_wait
op	27:20	0:0	4	&
water	27:21	0:0	4	p_sys
op	27:26	0:0	4	->
water	27:28	0:0	4	download
op	27:36	0:0	4	.
water	27:37	0:0	4	lock_wait
water	27:48	0:0	2	;
decl	28:4	28:46	2	int	index
op	28:14	0:0	2	=
call	28:16	28:45	3	es_cat_to_index
arg	28:33	28:45	4	chunk->type
water	28:33	0:0	5	chunk
op	28:38	0:0	5	->
water	28:40	0:0	5	type
water	29:4	0:0	2	p_sys
op	29:9	0:0	2	->
water	29:11	0:0	2	download
op	29:19	0:0	2	.
water	29:20	0:0	2	lead
op	29:24	0:0	2	[
water	29:25	0:0	2	index
op	29:30	0:0	2	]
op	29:32	0:0	2	+=
water	29:35	0:0	2	chunk
op	29:40	0:0	2	->
water	29:42	0:0	2	duration
water	29:50	0:0	2	;
call	30:4	30:49	2	vlc_mutex_unlock
arg	30:22	30:49	3	&p_sys->download.lock_wait
op	30:22	0:0	4	&
water	30:23	0:0	4	p_sys
op	30:28	0:0	4	->
water	30:30	0:0	4	download
op	30:38	0:0	4	.
water	30:39	0:0	4	lock_wait
water	30:50	0:0	2	;
return	31:4	31:22	2	VLC_SUCCESS
water	31:11	0:0	3	VLC_SUCCESS
