func	2:0	39:0	0	static int	vlclua_extension_require
params	2:35	0:0	1	
param	2:37	2:50	2	lua_State *	L
stmnts	0:0	38:12	1	
decl	4:4	4:53	2	const char	*psz_module
op	4:27	0:0	2	=
call	4:29	4:52	3	luaL_checkstring
arg	4:47	4:48	4	L
water	4:47	0:0	5	L
arg	4:50	4:52	4	1
water	4:50	0:0	5	1
decl	5:4	5:47	2	vlc_object_t	*p_this
op	5:25	0:0	2	=
call	5:27	5:46	3	vlclua_get_this
arg	5:44	5:46	4	L
water	5:44	0:0	5	L
decl	6:4	6:50	2	extension_t	*p_ext
op	6:23	0:0	2	=
call	6:25	6:49	3	vlclua_extension_get
arg	6:47	6:49	4	L
water	6:47	0:0	5	L
call	7:4	8:24	2	msg_Dbg
arg	7:13	7:19	3	p_this
water	7:13	0:0	4	p_this
arg	7:21	7:65	3	"loading module '%s' from extension package"
water	7:21	0:0	4	"loading module '%s' from extension package"
arg	8:13	8:24	3	psz_module
water	8:13	0:0	4	psz_module
water	8:25	0:0	2	;
decl	9:4	9:42	2	char	*psz_fullpath
water	9:22	0:0	2	,
decl	9:4	9:42	2	char	*psz_package
water	9:36	0:0	2	,
decl	9:4	9:42	2	char	*sep
water	10:4	0:0	2	psz_package
op	10:16	0:0	2	=
call	10:18	10:42	2	strdup
arg	10:26	10:42	3	p_ext->psz_name
water	10:26	0:0	4	p_ext
op	10:31	0:0	4	->
water	10:33	0:0	4	psz_name
water	10:43	0:0	2	;
water	11:4	0:0	2	sep
op	11:8	0:0	2	=
call	11:10	11:36	2	strrchr
arg	11:19	11:30	3	psz_package
water	11:19	0:0	4	psz_package
arg	11:32	11:36	3	'/'
water	11:32	0:0	4	'/'
water	11:37	0:0	2	;
if	12:4	16:4	2	(! sep)
cond	12:8	12:9	3	! sep
op	12:8	0:0	4	!
water	12:9	0:0	4	sep
stmts	13:4	16:4	3	
water	13:4	0:0	4	{
call	14:8	14:26	4	free
arg	14:14	14:26	5	psz_package
water	14:14	0:0	6	psz_package
water	14:27	0:0	4	;
return	15:8	15:61	4	luaL_error(L,"could not find package name")
call	15:15	15:60	5	luaL_error
arg	15:27	15:28	6	L
water	15:27	0:0	7	L
arg	15:30	15:60	6	"could not find package name"
water	15:30	0:0	7	"could not find package name"
water	16:4	0:0	4	}
op	17:4	0:0	2	*
water	17:5	0:0	2	sep
op	17:9	0:0	2	=
water	17:11	0:0	2	'\0'
water	17:15	0:0	2	;
if	18:4	23:4	2	(- 1 ==asprintf (& psz_fullpath ,"%s/modules/%s.luac" ,psz_package ,psz_module ))
cond	18:8	19:70	3	- 1 ==asprintf (& psz_fullpath ,"%s/modules/%s.luac" ,psz_package ,psz_module )
op	18:8	0:0	4	-
water	18:9	0:0	4	1
op	18:11	0:0	4	==
call	18:14	19:70	4	asprintf
arg	18:24	18:37	5	&psz_fullpath
op	18:24	0:0	6	&
water	18:25	0:0	6	psz_fullpath
arg	19:24	19:44	5	"%s/modules/%s.luac"
water	19:24	0:0	6	"%s/modules/%s.luac"
arg	19:46	19:57	5	psz_package
water	19:46	0:0	6	psz_package
arg	19:59	19:70	5	psz_module
water	19:59	0:0	6	psz_module
stmts	20:4	23:4	3	
water	20:4	0:0	4	{
call	21:8	21:26	4	free
arg	21:14	21:26	5	psz_package
water	21:14	0:0	6	psz_package
water	21:27	0:0	4	;
return	22:8	22:16	4	1
water	22:15	0:0	5	1
water	23:4	0:0	4	}
decl	24:4	24:56	2	int	i_ret
op	24:14	0:0	2	=
call	24:16	24:55	3	vlclua_dofile
arg	24:31	24:37	4	p_this
water	24:31	0:0	5	p_this
arg	24:39	24:40	4	L
water	24:39	0:0	5	L
arg	24:42	24:55	4	psz_fullpath
water	24:42	0:0	5	psz_fullpath
if	25:4	30:4	2	(i_ret != 0)
cond	25:8	25:17	3	i_ret != 0
water	25:8	0:0	4	i_ret
op	25:14	0:0	4	!=
water	25:17	0:0	4	0
stmts	26:4	30:4	3	
water	26:4	0:0	4	{
water	28:8	0:0	4	psz_fullpath
op	28:20	0:0	4	[
call	28:22	28:43	4	strlen
arg	28:30	28:43	5	psz_fullpath
water	28:30	0:0	6	psz_fullpath
op	28:45	0:0	4	-
water	28:47	0:0	4	1
op	28:49	0:0	4	]
op	28:51	0:0	4	=
water	28:53	0:0	4	'\0'
water	28:57	0:0	4	;
water	29:8	0:0	4	i_ret
op	29:14	0:0	4	=
call	29:16	29:55	4	vlclua_dofile
arg	29:31	29:37	5	p_this
water	29:31	0:0	6	p_this
arg	29:39	29:40	5	L
water	29:39	0:0	6	L
arg	29:42	29:55	5	psz_fullpath
water	29:42	0:0	6	psz_fullpath
water	29:56	0:0	4	;
water	30:4	0:0	4	}
call	31:4	31:23	2	free
arg	31:10	31:23	3	psz_fullpath
water	31:10	0:0	4	psz_fullpath
water	31:24	0:0	2	;
call	32:4	32:22	2	free
arg	32:10	32:22	3	psz_package
water	32:10	0:0	4	psz_package
water	32:23	0:0	2	;
if	33:4	37:4	2	(i_ret != 0)
cond	33:8	33:17	3	i_ret != 0
water	33:8	0:0	4	i_ret
op	33:14	0:0	4	!=
water	33:17	0:0	4	0
stmts	34:4	37:4	3	
water	34:4	0:0	4	{
return	35:8	36:39	4	luaL_error(L,"unable to load module '%s' from package",psz_module)
call	35:15	36:38	5	luaL_error
arg	35:27	35:28	6	L
water	35:27	0:0	7	L
arg	35:30	35:71	6	"unable to load module '%s' from package"
water	35:30	0:0	7	"unable to load module '%s' from package"
arg	36:27	36:38	6	psz_module
water	36:27	0:0	7	psz_module
water	37:4	0:0	4	}
return	38:4	38:12	2	0
water	38:11	0:0	3	0
