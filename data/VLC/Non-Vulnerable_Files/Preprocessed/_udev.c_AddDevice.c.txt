func	2:0	40:0	0	static int	AddDevice
params	2:21	0:0	1	
param	2:22	2:46	2	services_discovery_t *	sd
param	2:48	2:71	2	struct udev_device *	dev
stmnts	0:0	39:12	1	
decl	4:4	4:47	2	services_discovery_sys_t	*p_sys
op	4:36	0:0	2	=
water	4:38	0:0	2	sd
op	4:40	0:0	2	->
water	4:42	0:0	2	p_sys
decl	5:4	5:44	2	char	*mrl
op	5:14	0:0	2	=
call	5:16	5:43	3	p_sys->subsys->get_mrl
arg	5:40	5:43	4	dev
water	5:40	0:0	5	dev
if	6:4	7:16	2	(mrl == NULL)
cond	6:8	6:15	3	mrl == NULL
water	6:8	0:0	4	mrl
op	6:12	0:0	4	==
water	6:15	0:0	4	NULL
stmts	7:8	7:16	3	
return	7:8	7:16	4	0
water	7:15	0:0	5	0
decl	8:4	8:46	2	char	*name
op	8:15	0:0	2	=
call	8:17	8:45	3	p_sys->subsys->get_name
arg	8:42	8:45	4	dev
water	8:42	0:0	5	dev
decl	9:4	11:74	2	input_item_t	*item
op	9:23	0:0	2	=
call	9:25	11:73	3	input_item_NewWithType
arg	9:49	9:52	4	mrl
water	9:49	0:0	5	mrl
arg	9:54	9:71	4	name?name:mrl
water	9:54	0:0	5	name
water	9:59	0:0	5	?
water	9:61	0:0	5	name
water	9:66	0:0	5	:
water	9:68	0:0	5	mrl
arg	10:49	10:50	4	0
water	10:49	0:0	5	0
arg	10:52	10:56	4	NULL
water	10:52	0:0	5	NULL
arg	10:58	10:59	4	0
water	10:58	0:0	5	0
arg	10:61	10:63	4	-1
op	10:61	0:0	5	-
water	10:62	0:0	5	1
arg	11:49	11:73	4	p_sys->subsys->item_type
water	11:49	0:0	5	p_sys
op	11:54	0:0	5	->
water	11:56	0:0	5	subsys
op	11:62	0:0	5	->
water	11:64	0:0	5	item_type
call	12:4	12:44	2	msg_Dbg
arg	12:13	12:15	3	sd
water	12:13	0:0	4	sd
arg	12:17	12:33	3	"adding %s (%s)"
water	12:17	0:0	4	"adding %s (%s)"
arg	12:35	12:38	3	mrl
water	12:35	0:0	4	mrl
arg	12:40	12:44	3	name
water	12:40	0:0	4	name
water	12:45	0:0	2	;
call	13:4	13:14	2	free
arg	13:10	13:14	3	name
water	13:10	0:0	4	name
water	13:15	0:0	2	;
call	14:4	14:13	2	free
arg	14:10	14:13	3	mrl
water	14:10	0:0	4	mrl
water	14:14	0:0	2	;
if	15:4	16:17	2	(item == NULL)
cond	15:8	15:16	3	item == NULL
water	15:8	0:0	4	item
op	15:13	0:0	4	==
water	15:16	0:0	4	NULL
stmts	16:8	16:17	3	
return	16:8	16:17	4	-1
op	16:15	0:0	5	-
water	16:16	0:0	5	1
decl	17:4	17:43	2	struct device	*d
op	17:21	0:0	2	=
call	17:23	17:42	3	malloc
arg	17:31	17:42	4	sizeof(*d)
op	17:31	0:0	5	sizeof
water	17:38	0:0	5	(
op	17:39	0:0	5	*
water	17:40	0:0	5	d
water	17:41	0:0	5	)
if	18:4	22:4	2	(d == NULL)
cond	18:8	18:13	3	d == NULL
water	18:8	0:0	4	d
op	18:10	0:0	4	==
water	18:13	0:0	4	NULL
stmts	19:4	22:4	3	
water	19:4	0:0	4	{
call	20:8	20:27	4	vlc_gc_decref
arg	20:23	20:27	5	item
water	20:23	0:0	6	item
water	20:28	0:0	4	;
return	21:8	21:17	4	-1
op	21:15	0:0	5	-
water	21:16	0:0	5	1
water	22:4	0:0	4	}
water	23:4	0:0	2	d
op	23:5	0:0	2	->
water	23:7	0:0	2	devnum
op	23:14	0:0	2	=
call	23:16	23:43	2	udev_device_get_devnum
arg	23:40	23:43	3	dev
water	23:40	0:0	4	dev
water	23:44	0:0	2	;
water	24:4	0:0	2	d
op	24:5	0:0	2	->
water	24:7	0:0	2	item
op	24:12	0:0	2	=
water	24:14	0:0	2	item
water	24:18	0:0	2	;
water	25:4	0:0	2	d
op	25:5	0:0	2	->
water	25:7	0:0	2	sd
op	25:10	0:0	2	=
water	25:12	0:0	2	NULL
water	25:16	0:0	2	;
decl	26:4	26:58	2	struct device	**dp
op	26:23	0:0	2	=
call	26:25	26:57	3	tsearch
arg	26:34	26:35	4	d
water	26:34	0:0	5	d
arg	26:37	26:49	4	&p_sys->root
op	26:37	0:0	5	&
water	26:38	0:0	5	p_sys
op	26:43	0:0	5	->
water	26:45	0:0	5	root
arg	26:51	26:57	4	cmpdev
water	26:51	0:0	5	cmpdev
if	27:4	31:4	2	(dp == NULL)
cond	27:8	27:14	3	dp == NULL
water	27:8	0:0	4	dp
op	27:11	0:0	4	==
water	27:14	0:0	4	NULL
stmts	28:4	31:4	3	
water	28:4	0:0	4	{
call	29:8	29:24	4	DestroyDevice
arg	29:23	29:24	5	d
water	29:23	0:0	6	d
water	29:25	0:0	4	;
return	30:8	30:17	4	-1
op	30:15	0:0	5	-
water	30:16	0:0	5	1
water	31:4	0:0	4	}
if	32:4	36:4	2	(* dp != d)
cond	32:8	32:15	3	* dp != d
op	32:8	0:0	4	*
water	32:9	0:0	4	dp
op	32:12	0:0	4	!=
water	32:15	0:0	4	d
stmts	33:4	36:4	3	
water	33:4	0:0	4	{
call	34:8	34:26	4	DestroyDevice
arg	34:23	34:26	5	*dp
op	34:23	0:0	6	*
water	34:24	0:0	6	dp
water	34:27	0:0	4	;
op	35:8	0:0	4	*
water	35:9	0:0	4	dp
op	35:12	0:0	4	=
water	35:14	0:0	4	d
water	35:15	0:0	4	;
water	36:4	0:0	4	}
call	37:4	37:46	2	services_discovery_AddItem
arg	37:32	37:34	3	sd
water	37:32	0:0	4	sd
arg	37:36	37:40	3	item
water	37:36	0:0	4	item
arg	37:42	37:46	3	NULL
water	37:42	0:0	4	NULL
water	37:47	0:0	2	;
water	38:4	0:0	2	d
op	38:5	0:0	2	->
water	38:7	0:0	2	sd
op	38:10	0:0	2	=
water	38:12	0:0	2	sd
water	38:14	0:0	2	;
return	39:4	39:12	2	0
water	39:11	0:0	3	0
