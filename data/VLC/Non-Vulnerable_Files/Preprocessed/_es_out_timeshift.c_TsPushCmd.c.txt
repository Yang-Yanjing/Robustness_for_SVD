func	2:0	30:0	0	static void	TsPushCmd
params	2:21	0:0	1	
param	2:23	2:40	2	ts_thread_t *	p_ts
param	2:42	2:58	2	ts_cmd_t *	p_cmd
stmnts	4:4	29:35	1	
call	4:4	4:32	2	vlc_mutex_lock
arg	4:20	4:32	3	&p_ts->lock
op	4:20	0:0	4	&
water	4:21	0:0	4	p_ts
op	4:25	0:0	4	->
water	4:27	0:0	4	lock
water	4:33	0:0	2	;
if	5:4	25:4	2	(! p_ts -> p_storage_w ||TsStorageIsFull (p_ts -> p_storage_w ,p_cmd ))
cond	5:8	5:72	3	! p_ts -> p_storage_w ||TsStorageIsFull (p_ts -> p_storage_w ,p_cmd )
op	5:8	0:0	4	!
water	5:9	0:0	4	p_ts
op	5:13	0:0	4	->
water	5:15	0:0	4	p_storage_w
op	5:27	0:0	4	||
call	5:30	5:72	4	TsStorageIsFull
arg	5:47	5:64	5	p_ts->p_storage_w
water	5:47	0:0	6	p_ts
op	5:51	0:0	6	->
water	5:53	0:0	6	p_storage_w
arg	5:66	5:72	5	p_cmd
water	5:66	0:0	6	p_cmd
stmts	6:4	25:4	3	
water	6:4	0:0	4	{
decl	7:8	7:90	4	ts_storage_t	*p_storage
op	7:32	0:0	4	=
call	7:34	7:89	5	TsStorageNew
arg	7:48	7:66	6	p_ts->psz_tmp_path
water	7:48	0:0	7	p_ts
op	7:52	0:0	7	->
water	7:54	0:0	7	psz_tmp_path
arg	7:68	7:89	6	p_ts->i_tmp_size_max
water	7:68	0:0	7	p_ts
op	7:72	0:0	7	->
water	7:74	0:0	7	i_tmp_size_max
if	8:8	14:8	4	(! p_storage)
cond	8:12	8:13	5	! p_storage
op	8:12	0:0	6	!
water	8:13	0:0	6	p_storage
stmts	9:8	14:8	5	
water	9:8	0:0	6	{
call	10:12	10:28	6	CmdClean
arg	10:22	10:28	7	p_cmd
water	10:22	0:0	8	p_cmd
water	10:29	0:0	6	;
call	11:12	11:42	6	vlc_mutex_unlock
arg	11:30	11:42	7	&p_ts->lock
op	11:30	0:0	8	&
water	11:31	0:0	8	p_ts
op	11:35	0:0	8	->
water	11:37	0:0	8	lock
water	11:43	0:0	6	;
return	13:12	13:18	6	
water	14:8	0:0	6	}
if	15:8	18:8	4	(! p_ts -> p_storage_w)
cond	15:12	15:19	5	! p_ts -> p_storage_w
op	15:12	0:0	6	!
water	15:13	0:0	6	p_ts
op	15:17	0:0	6	->
water	15:19	0:0	6	p_storage_w
stmts	16:8	18:8	5	
water	16:8	0:0	6	{
water	17:12	0:0	6	p_ts
op	17:16	0:0	6	->
water	17:18	0:0	6	p_storage_r
op	17:30	0:0	6	=
water	17:32	0:0	6	p_ts
op	17:36	0:0	6	->
water	17:38	0:0	6	p_storage_w
op	17:50	0:0	6	=
water	17:52	0:0	6	p_storage
water	17:61	0:0	6	;
water	18:8	0:0	6	}
else	19:8	24:8	4
stmts	20:8	24:8	5	
water	20:8	0:0	6	{
call	21:12	21:45	6	TsStoragePack
arg	21:27	21:45	7	p_ts->p_storage_w
water	21:27	0:0	8	p_ts
op	21:31	0:0	8	->
water	21:33	0:0	8	p_storage_w
water	21:46	0:0	6	;
water	22:12	0:0	6	p_ts
op	22:16	0:0	6	->
water	22:18	0:0	6	p_storage_w
op	22:29	0:0	6	->
water	22:31	0:0	6	p_next
op	22:38	0:0	6	=
water	22:40	0:0	6	p_storage
water	22:49	0:0	6	;
water	23:12	0:0	6	p_ts
op	23:16	0:0	6	->
water	23:18	0:0	6	p_storage_w
op	23:30	0:0	6	=
water	23:32	0:0	6	p_storage
water	23:41	0:0	6	;
water	24:8	0:0	6	}
water	25:4	0:0	4	}
call	27:4	27:87	2	TsStoragePushCmd
arg	27:22	27:39	3	p_ts->p_storage_w
water	27:22	0:0	4	p_ts
op	27:26	0:0	4	->
water	27:28	0:0	4	p_storage_w
arg	27:41	27:46	3	p_cmd
water	27:41	0:0	4	p_cmd
arg	27:48	27:87	3	p_ts->p_storage_r==p_ts->p_storage_w
water	27:48	0:0	4	p_ts
op	27:52	0:0	4	->
water	27:54	0:0	4	p_storage_r
op	27:66	0:0	4	==
water	27:69	0:0	4	p_ts
op	27:73	0:0	4	->
water	27:75	0:0	4	p_storage_w
water	27:88	0:0	2	;
call	28:4	28:33	2	vlc_cond_signal
arg	28:21	28:33	3	&p_ts->wait
op	28:21	0:0	4	&
water	28:22	0:0	4	p_ts
op	28:26	0:0	4	->
water	28:28	0:0	4	wait
water	28:34	0:0	2	;
call	29:4	29:34	2	vlc_mutex_unlock
arg	29:22	29:34	3	&p_ts->lock
op	29:22	0:0	4	&
water	29:23	0:0	4	p_ts
op	29:27	0:0	4	->
water	29:29	0:0	4	lock
water	29:35	0:0	2	;
