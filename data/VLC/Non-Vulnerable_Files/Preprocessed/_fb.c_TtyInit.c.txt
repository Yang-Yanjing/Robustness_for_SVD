func	2:0	62:0	0	static int	TtyInit
params	2:18	0:0	1	
param	2:19	2:37	2	vout_display_t *	vd
stmnts	0:0	61:23	1	
decl	4:4	4:37	2	vout_display_sys_t	*sys
op	4:28	0:0	2	=
water	4:30	0:0	2	vd
op	4:32	0:0	2	->
water	4:34	0:0	2	sys
decl	5:4	5:30	2	struct termios	new_termios
call	6:4	6:20	2	GfxMode
arg	6:12	6:20	3	sys->tty
water	6:12	0:0	4	sys
op	6:15	0:0	4	->
water	6:17	0:0	4	tty
water	6:21	0:0	2	;
if	8:4	10:4	2	(tcgetattr (0 ,& sys -> old_termios ) == - 1)
cond	8:8	8:44	3	tcgetattr (0 ,& sys -> old_termios ) == - 1
call	8:8	8:38	4	tcgetattr
arg	8:18	8:19	5	0
water	8:18	0:0	6	0
arg	8:21	8:38	5	&sys->old_termios
op	8:21	0:0	6	&
water	8:22	0:0	6	sys
op	8:25	0:0	6	->
water	8:27	0:0	6	old_termios
op	8:40	0:0	4	==
op	8:43	0:0	4	-
water	8:44	0:0	4	1
stmts	8:47	10:4	3	
water	8:47	0:0	4	{
call	9:8	9:38	4	msg_Err
arg	9:16	9:18	5	vd
water	9:16	0:0	6	vd
arg	9:20	9:38	5	"tcgetattr failed"
water	9:20	0:0	6	"tcgetattr failed"
water	9:39	0:0	4	;
water	10:4	0:0	4	}
if	11:4	13:4	2	(tcgetattr (0 ,& new_termios ) == - 1)
cond	11:8	11:39	3	tcgetattr (0 ,& new_termios ) == - 1
call	11:8	11:33	4	tcgetattr
arg	11:18	11:19	5	0
water	11:18	0:0	6	0
arg	11:21	11:33	5	&new_termios
op	11:21	0:0	6	&
water	11:22	0:0	6	new_termios
op	11:35	0:0	4	==
op	11:38	0:0	4	-
water	11:39	0:0	4	1
stmts	11:42	13:4	3	
water	11:42	0:0	4	{
call	12:8	12:38	4	msg_Err
arg	12:16	12:18	5	vd
water	12:16	0:0	6	vd
arg	12:20	12:38	5	"tcgetattr failed"
water	12:20	0:0	6	"tcgetattr failed"
water	12:39	0:0	4	;
water	13:4	0:0	4	}
water	16:4	0:0	2	new_termios
op	16:15	0:0	2	.
water	16:16	0:0	2	c_lflag
op	16:24	0:0	2	&=
op	16:27	0:0	2	~
water	16:29	0:0	2	(
water	16:30	0:0	2	ICANON
water	16:36	0:0	2	)
water	16:37	0:0	2	;
water	17:4	0:0	2	new_termios
op	17:15	0:0	2	.
water	17:16	0:0	2	c_lflag
op	17:24	0:0	2	&=
op	17:27	0:0	2	~
water	17:28	0:0	2	(
water	17:29	0:0	2	ECHO
op	17:34	0:0	2	|
water	17:36	0:0	2	ECHOCTL
water	17:43	0:0	2	)
water	17:44	0:0	2	;
water	18:4	0:0	2	new_termios
op	18:15	0:0	2	.
water	18:16	0:0	2	c_iflag
op	18:24	0:0	2	=
water	18:26	0:0	2	0
water	18:27	0:0	2	;
water	19:4	0:0	2	new_termios
op	19:15	0:0	2	.
water	19:16	0:0	2	c_cc
op	19:20	0:0	2	[
water	19:21	0:0	2	VMIN
op	19:25	0:0	2	]
op	19:27	0:0	2	=
water	19:29	0:0	2	1
water	19:30	0:0	2	;
water	20:4	0:0	2	new_termios
op	20:15	0:0	2	.
water	20:16	0:0	2	c_cc
op	20:20	0:0	2	[
water	20:21	0:0	2	VTIME
op	20:26	0:0	2	]
op	20:28	0:0	2	=
water	20:30	0:0	2	0
water	20:31	0:0	2	;
if	21:4	23:4	2	(tcsetattr (0 ,TCSAFLUSH ,& new_termios ) == - 1)
cond	21:8	21:50	3	tcsetattr (0 ,TCSAFLUSH ,& new_termios ) == - 1
call	21:8	21:44	4	tcsetattr
arg	21:18	21:19	5	0
water	21:18	0:0	6	0
arg	21:21	21:30	5	TCSAFLUSH
water	21:21	0:0	6	TCSAFLUSH
arg	21:32	21:44	5	&new_termios
op	21:32	0:0	6	&
water	21:33	0:0	6	new_termios
op	21:46	0:0	4	==
op	21:49	0:0	4	-
water	21:50	0:0	4	1
stmts	21:53	23:4	3	
water	21:53	0:0	4	{
call	22:8	22:38	4	msg_Err
arg	22:16	22:18	5	vd
water	22:16	0:0	6	vd
arg	22:20	22:38	5	"tcsetattr failed"
water	22:20	0:0	6	"tcsetattr failed"
water	22:39	0:0	4	;
water	23:4	0:0	4	}
call	24:4	24:41	2	ioctl
arg	24:10	24:18	3	sys->tty
water	24:10	0:0	4	sys
op	24:13	0:0	4	->
water	24:15	0:0	4	tty
arg	24:20	24:30	3	VT_RELDISP
water	24:20	0:0	4	VT_RELDISP
arg	24:32	24:41	3	VT_ACKACQ
water	24:32	0:0	4	VT_ACKACQ
water	24:42	0:0	2	;
decl	27:4	27:28	2	struct sigaction	sig_tty
call	28:4	28:39	2	memset
arg	28:11	28:19	3	&sig_tty
op	28:11	0:0	4	&
water	28:12	0:0	4	sig_tty
arg	28:21	28:22	3	0
water	28:21	0:0	4	0
arg	28:24	28:39	3	sizeof(sig_tty)
op	28:24	0:0	4	sizeof
water	28:30	0:0	4	(
water	28:31	0:0	4	sig_tty
water	28:38	0:0	4	)
water	28:40	0:0	2	;
water	29:4	0:0	2	sig_tty
op	29:11	0:0	2	.
water	29:12	0:0	2	sa_handler
op	29:23	0:0	2	=
water	29:25	0:0	2	SwitchDisplay
water	29:38	0:0	2	;
call	30:4	30:32	2	sigemptyset
arg	30:16	30:32	3	&sig_tty.sa_mask
op	30:16	0:0	4	&
water	30:17	0:0	4	sig_tty
op	30:24	0:0	4	.
water	30:25	0:0	4	sa_mask
water	30:33	0:0	2	;
if	31:4	36:4	2	(sigaction (SIGUSR1 ,& sig_tty ,& sys -> sig_usr1 ) ||sigaction (SIGUSR2 ,& sig_tty ,& sys -> sig_usr2 ))
cond	31:8	32:51	3	sigaction (SIGUSR1 ,& sig_tty ,& sys -> sig_usr1 ) ||sigaction (SIGUSR2 ,& sig_tty ,& sys -> sig_usr2 )
call	31:8	31:51	4	sigaction
arg	31:18	31:25	5	SIGUSR1
water	31:18	0:0	6	SIGUSR1
arg	31:27	31:35	5	&sig_tty
op	31:27	0:0	6	&
water	31:28	0:0	6	sig_tty
arg	31:37	31:51	5	&sys->sig_usr1
op	31:37	0:0	6	&
water	31:38	0:0	6	sys
op	31:41	0:0	6	->
water	31:43	0:0	6	sig_usr1
op	31:53	0:0	4	||
call	32:8	32:51	4	sigaction
arg	32:18	32:25	5	SIGUSR2
water	32:18	0:0	6	SIGUSR2
arg	32:27	32:35	5	&sig_tty
op	32:27	0:0	6	&
water	32:28	0:0	6	sig_tty
arg	32:37	32:51	5	&sys->sig_usr2
op	32:37	0:0	6	&
water	32:38	0:0	6	sys
op	32:41	0:0	6	->
water	32:43	0:0	6	sig_usr2
stmts	32:54	36:4	3	
water	32:54	0:0	4	{
call	33:8	33:75	4	msg_Err
arg	33:16	33:18	5	vd
water	33:16	0:0	6	vd
arg	33:20	33:52	5	"cannot set signal handler (%s)"
water	33:20	0:0	6	"cannot set signal handler (%s)"
arg	33:54	33:75	5	vlc_strerror_c(errno)
call	33:54	33:74	6	vlc_strerror_c
arg	33:69	33:74	7	errno
water	33:69	0:0	8	errno
water	33:76	0:0	4	;
goto	35:8	35:25	4	error_signal
water	35:13	0:0	5	error_signal
water	36:4	0:0	4	}
if	39:4	42:4	2	(- 1 ==ioctl (sys -> tty ,VT_GETMODE ,& sys -> vt_mode ))
cond	39:8	39:55	3	- 1 ==ioctl (sys -> tty ,VT_GETMODE ,& sys -> vt_mode )
op	39:8	0:0	4	-
water	39:9	0:0	4	1
op	39:11	0:0	4	==
call	39:14	39:55	4	ioctl
arg	39:20	39:28	5	sys->tty
water	39:20	0:0	6	sys
op	39:23	0:0	6	->
water	39:25	0:0	6	tty
arg	39:30	39:40	5	VT_GETMODE
water	39:30	0:0	6	VT_GETMODE
arg	39:42	39:55	5	&sys->vt_mode
op	39:42	0:0	6	&
water	39:43	0:0	6	sys
op	39:46	0:0	6	->
water	39:48	0:0	6	vt_mode
stmts	39:58	42:4	3	
water	39:58	0:0	4	{
call	40:8	40:74	4	msg_Err
arg	40:16	40:18	5	vd
water	40:16	0:0	6	vd
arg	40:20	40:51	5	"cannot get terminal mode (%s)"
water	40:20	0:0	6	"cannot get terminal mode (%s)"
arg	40:53	40:74	5	vlc_strerror_c(errno)
call	40:53	40:73	6	vlc_strerror_c
arg	40:68	40:73	7	errno
water	40:68	0:0	8	errno
water	40:75	0:0	4	;
goto	41:8	41:18	4	error
water	41:13	0:0	5	error
water	42:4	0:0	4	}
decl	43:4	43:41	2	struct vt_mode	vt_mode
op	43:27	0:0	2	=
water	43:29	0:0	2	sys
op	43:32	0:0	2	->
water	43:34	0:0	2	vt_mode
water	44:4	0:0	2	vt_mode
op	44:11	0:0	2	.
water	44:12	0:0	2	mode
op	44:19	0:0	2	=
water	44:21	0:0	2	VT_PROCESS
water	44:31	0:0	2	;
water	45:4	0:0	2	vt_mode
op	45:11	0:0	2	.
water	45:12	0:0	2	waitv
op	45:19	0:0	2	=
water	45:21	0:0	2	0
water	45:22	0:0	2	;
water	46:4	0:0	2	vt_mode
op	46:11	0:0	2	.
water	46:12	0:0	2	relsig
op	46:19	0:0	2	=
water	46:21	0:0	2	SIGUSR1
water	46:28	0:0	2	;
water	47:4	0:0	2	vt_mode
op	47:11	0:0	2	.
water	47:12	0:0	2	acqsig
op	47:19	0:0	2	=
water	47:21	0:0	2	SIGUSR2
water	47:28	0:0	2	;
if	48:4	51:4	2	(- 1 ==ioctl (sys -> tty ,VT_SETMODE ,& vt_mode ))
cond	48:8	48:50	3	- 1 ==ioctl (sys -> tty ,VT_SETMODE ,& vt_mode )
op	48:8	0:0	4	-
water	48:9	0:0	4	1
op	48:11	0:0	4	==
call	48:14	48:50	4	ioctl
arg	48:20	48:28	5	sys->tty
water	48:20	0:0	6	sys
op	48:23	0:0	6	->
water	48:25	0:0	6	tty
arg	48:30	48:40	5	VT_SETMODE
water	48:30	0:0	6	VT_SETMODE
arg	48:42	48:50	5	&vt_mode
op	48:42	0:0	6	&
water	48:43	0:0	6	vt_mode
stmts	48:53	51:4	3	
water	48:53	0:0	4	{
call	49:8	49:74	4	msg_Err
arg	49:16	49:18	5	vd
water	49:16	0:0	6	vd
arg	49:20	49:51	5	"cannot set terminal mode (%s)"
water	49:20	0:0	6	"cannot set terminal mode (%s)"
arg	49:53	49:74	5	vlc_strerror_c(errno)
call	49:53	49:73	6	vlc_strerror_c
arg	49:68	49:73	7	errno
water	49:68	0:0	8	errno
water	49:75	0:0	4	;
goto	50:8	50:18	4	error
water	50:13	0:0	5	error
water	51:4	0:0	4	}
return	52:4	52:22	2	VLC_SUCCESS
water	52:11	0:0	3	VLC_SUCCESS
label	53:0	53:5	2	error :
call	55:4	55:43	2	sigaction
arg	55:14	55:21	3	SIGUSR1
water	55:14	0:0	4	SIGUSR1
arg	55:23	55:37	3	&sys->sig_usr1
op	55:23	0:0	4	&
water	55:24	0:0	4	sys
op	55:27	0:0	4	->
water	55:29	0:0	4	sig_usr1
arg	55:39	55:43	3	NULL
water	55:39	0:0	4	NULL
water	55:44	0:0	2	;
call	56:4	56:43	2	sigaction
arg	56:14	56:21	3	SIGUSR2
water	56:14	0:0	4	SIGUSR2
arg	56:23	56:37	3	&sys->sig_usr2
op	56:23	0:0	4	&
water	56:24	0:0	4	sys
op	56:27	0:0	4	->
water	56:29	0:0	4	sig_usr2
arg	56:39	56:43	3	NULL
water	56:39	0:0	4	NULL
water	56:44	0:0	2	;
label	57:0	57:12	2	error_signal :
call	59:4	59:37	2	tcsetattr
arg	59:14	59:15	3	0
water	59:14	0:0	4	0
arg	59:17	59:18	3	0
water	59:17	0:0	4	0
arg	59:20	59:37	3	&sys->old_termios
op	59:20	0:0	4	&
water	59:21	0:0	4	sys
op	59:24	0:0	4	->
water	59:26	0:0	4	old_termios
water	59:38	0:0	2	;
call	60:4	60:21	2	TextMode
arg	60:13	60:21	3	sys->tty
water	60:13	0:0	4	sys
op	60:16	0:0	4	->
water	60:18	0:0	4	tty
water	60:22	0:0	2	;
return	61:4	61:23	2	VLC_EGENERIC
water	61:11	0:0	3	VLC_EGENERIC
