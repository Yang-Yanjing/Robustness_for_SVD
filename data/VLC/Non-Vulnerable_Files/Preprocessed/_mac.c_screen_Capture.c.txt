func	2:0	72:0	0	block_t *	screen_Capture
params	2:23	0:0	1	
param	2:24	2:40	2	demux_t *	p_demux
stmnts	0:0	71:18	1	
decl	4:4	4:39	2	demux_sys_t	*p_sys
op	4:23	0:0	2	=
water	4:25	0:0	2	p_demux
op	4:32	0:0	2	->
water	4:34	0:0	2	p_sys
decl	5:4	5:58	2	screen_data_t	*p_data
op	5:26	0:0	2	=
water	5:28	0:0	2	(
water	5:29	0:0	2	screen_data_t
op	5:43	0:0	2	*
water	5:44	0:0	2	)
water	5:45	0:0	2	p_sys
op	5:50	0:0	2	->
water	5:52	0:0	2	p_data
decl	6:4	6:20	2	block_t	*p_block
decl	7:4	7:23	2	CGRect	capture_rect
decl	8:4	8:20	2	CGImageRef	image
decl	10:4	10:22	2	CGPoint	cursor_pos
decl	11:4	11:42	2	CGEventRef	event
op	11:21	0:0	2	=
call	11:23	11:41	3	CGEventCreate
arg	11:37	11:41	4	NULL
water	11:37	0:0	5	NULL
water	12:4	0:0	2	cursor_pos
op	12:15	0:0	2	=
call	12:17	12:41	2	CGEventGetLocation
arg	12:36	12:41	3	event
water	12:36	0:0	4	event
water	12:42	0:0	2	;
call	13:4	13:19	2	CFRelease
arg	13:14	13:19	3	event
water	13:14	0:0	4	event
water	13:20	0:0	2	;
water	14:4	0:0	2	cursor_pos
op	14:14	0:0	2	.
water	14:15	0:0	2	x
op	14:17	0:0	2	-=
water	14:20	0:0	2	p_data
op	14:26	0:0	2	->
water	14:28	0:0	2	screen_left
water	14:39	0:0	2	;
water	15:4	0:0	2	cursor_pos
op	15:14	0:0	2	.
water	15:15	0:0	2	y
op	15:17	0:0	2	-=
water	15:20	0:0	2	p_data
op	15:26	0:0	2	->
water	15:28	0:0	2	screen_top
water	15:38	0:0	2	;
if	16:4	17:54	2	(p_sys -> b_follow_mouse)
cond	16:8	16:15	3	p_sys -> b_follow_mouse
water	16:8	0:0	4	p_sys
op	16:13	0:0	4	->
water	16:15	0:0	4	b_follow_mouse
stmts	17:8	17:54	3	
call	17:8	17:53	4	FollowMouse
arg	17:20	17:25	5	p_sys
water	17:20	0:0	6	p_sys
arg	17:27	17:39	5	cursor_pos.x
water	17:27	0:0	6	cursor_pos
op	17:37	0:0	6	.
water	17:38	0:0	6	x
arg	17:41	17:53	5	cursor_pos.y
water	17:41	0:0	6	cursor_pos
op	17:51	0:0	6	.
water	17:52	0:0	6	y
water	17:54	0:0	4	;
water	18:4	0:0	2	capture_rect
op	18:16	0:0	2	.
water	18:17	0:0	2	origin
op	18:23	0:0	2	.
water	18:24	0:0	2	x
op	18:26	0:0	2	=
water	18:28	0:0	2	p_sys
op	18:33	0:0	2	->
water	18:35	0:0	2	i_left
water	18:41	0:0	2	;
water	19:4	0:0	2	capture_rect
op	19:16	0:0	2	.
water	19:17	0:0	2	origin
op	19:23	0:0	2	.
water	19:24	0:0	2	y
op	19:26	0:0	2	=
water	19:28	0:0	2	p_sys
op	19:33	0:0	2	->
water	19:35	0:0	2	i_top
water	19:40	0:0	2	;
water	20:4	0:0	2	capture_rect
op	20:16	0:0	2	.
water	20:17	0:0	2	size
op	20:21	0:0	2	.
water	20:22	0:0	2	width
op	20:28	0:0	2	=
water	20:30	0:0	2	p_data
op	20:36	0:0	2	->
water	20:38	0:0	2	width
water	20:43	0:0	2	;
water	21:4	0:0	2	capture_rect
op	21:16	0:0	2	.
water	21:17	0:0	2	size
op	21:21	0:0	2	.
water	21:22	0:0	2	height
op	21:29	0:0	2	=
water	21:31	0:0	2	p_data
op	21:37	0:0	2	->
water	21:39	0:0	2	height
water	21:45	0:0	2	;
water	23:4	0:0	2	image
op	23:10	0:0	2	=
call	23:12	23:72	2	CGDisplayCreateImageForRect
arg	23:40	23:58	3	p_data->display_id
water	23:40	0:0	4	p_data
op	23:46	0:0	4	->
water	23:48	0:0	4	display_id
arg	23:60	23:72	3	capture_rect
water	23:60	0:0	4	capture_rect
water	23:73	0:0	2	;
if	24:4	27:4	2	(! image)
cond	24:8	24:9	3	! image
op	24:8	0:0	4	!
water	24:9	0:0	4	image
stmts	24:16	27:4	3	
water	24:16	0:0	4	{
call	25:8	25:37	4	msg_Warn
arg	25:17	25:24	5	p_demux
water	25:17	0:0	6	p_demux
arg	25:26	25:37	5	"no image!"
water	25:26	0:0	6	"no image!"
water	25:38	0:0	4	;
return	26:8	26:19	4	NULL
water	26:15	0:0	5	NULL
water	27:4	0:0	4	}
if	29:4	47:4	2	(! p_data -> offscreen_context)
cond	29:8	29:17	3	! p_data -> offscreen_context
op	29:8	0:0	4	!
water	29:9	0:0	4	p_data
op	29:15	0:0	4	->
water	29:17	0:0	4	offscreen_context
stmts	29:36	47:4	3	
water	29:36	0:0	4	{
decl	30:8	30:34	4	CGColorSpaceRef	colorspace
water	31:8	0:0	4	colorspace
op	31:19	0:0	4	=
call	31:21	31:71	4	CGColorSpaceCreateWithName
arg	31:48	31:71	5	kCGColorSpaceGenericRGB
water	31:48	0:0	6	kCGColorSpaceGenericRGB
water	31:72	0:0	4	;
water	32:8	0:0	4	p_data
op	32:14	0:0	4	->
water	32:16	0:0	4	offscreen_bitmap_size
op	32:38	0:0	4	=
water	32:40	0:0	4	p_sys
op	32:45	0:0	4	->
water	32:47	0:0	4	fmt
op	32:50	0:0	4	.
water	32:51	0:0	4	video
op	32:56	0:0	4	.
water	32:57	0:0	4	i_width
op	32:65	0:0	4	*
water	32:67	0:0	4	p_sys
op	32:72	0:0	4	->
water	32:74	0:0	4	fmt
op	32:77	0:0	4	.
water	32:78	0:0	4	video
op	32:83	0:0	4	.
water	32:84	0:0	4	i_height
op	32:93	0:0	4	*
water	32:95	0:0	4	4
water	32:96	0:0	4	;
water	33:8	0:0	4	p_data
op	33:14	0:0	4	->
water	33:16	0:0	4	offscreen_bitmap
op	33:33	0:0	4	=
call	33:35	33:74	4	calloc
arg	33:42	33:43	5	1
water	33:42	0:0	6	1
arg	33:45	33:74	5	p_data->offscreen_bitmap_size
water	33:45	0:0	6	p_data
op	33:51	0:0	6	->
water	33:53	0:0	6	offscreen_bitmap_size
water	33:75	0:0	4	;
if	34:8	38:8	4	(p_data -> offscreen_bitmap == NULL)
cond	34:12	34:40	5	p_data -> offscreen_bitmap == NULL
water	34:12	0:0	6	p_data
op	34:18	0:0	6	->
water	34:20	0:0	6	offscreen_bitmap
op	34:37	0:0	6	==
water	34:40	0:0	6	NULL
stmts	34:46	38:8	5	
water	34:46	0:0	6	{
call	35:12	35:63	6	msg_Warn
arg	35:21	35:28	7	p_demux
water	35:21	0:0	8	p_demux
arg	35:30	35:63	7	"can't allocate offscreen bitmap"
water	35:30	0:0	8	"can't allocate offscreen bitmap"
water	35:64	0:0	6	;
call	36:12	36:27	6	CFRelease
arg	36:22	36:27	7	image
water	36:22	0:0	8	image
water	36:28	0:0	6	;
return	37:12	37:23	6	NULL
water	37:19	0:0	7	NULL
water	38:8	0:0	6	}
water	39:8	0:0	4	p_data
op	39:14	0:0	4	->
water	39:16	0:0	4	offscreen_context
op	39:34	0:0	4	=
call	39:36	39:242	4	CGBitmapContextCreate
arg	39:58	39:82	5	p_data->offscreen_bitmap
water	39:58	0:0	6	p_data
op	39:64	0:0	6	->
water	39:66	0:0	6	offscreen_bitmap
arg	39:84	39:108	5	p_sys->fmt.video.i_width
water	39:84	0:0	6	p_sys
op	39:89	0:0	6	->
water	39:91	0:0	6	fmt
op	39:94	0:0	6	.
water	39:95	0:0	6	video
op	39:100	0:0	6	.
water	39:101	0:0	6	i_width
arg	39:110	39:135	5	p_sys->fmt.video.i_height
water	39:110	0:0	6	p_sys
op	39:115	0:0	6	->
water	39:117	0:0	6	fmt
op	39:120	0:0	6	.
water	39:121	0:0	6	video
op	39:126	0:0	6	.
water	39:127	0:0	6	i_height
arg	39:137	39:138	5	8
water	39:137	0:0	6	8
arg	39:140	39:168	5	p_sys->fmt.video.i_width*4
water	39:140	0:0	6	p_sys
op	39:145	0:0	6	->
water	39:147	0:0	6	fmt
op	39:150	0:0	6	.
water	39:151	0:0	6	video
op	39:156	0:0	6	.
water	39:157	0:0	6	i_width
op	39:165	0:0	6	*
water	39:167	0:0	6	4
arg	39:170	39:180	5	colorspace
water	39:170	0:0	6	colorspace
arg	39:182	39:242	5	kCGImageAlphaPremultipliedFirst|kCGBitmapByteOrder32Little
water	39:182	0:0	6	kCGImageAlphaPremultipliedFirst
op	39:214	0:0	6	|
water	39:216	0:0	6	kCGBitmapByteOrder32Little
water	39:243	0:0	4	;
if	40:8	44:8	4	(! p_data -> offscreen_context)
cond	40:12	40:21	5	! p_data -> offscreen_context
op	40:12	0:0	6	!
water	40:13	0:0	6	p_data
op	40:19	0:0	6	->
water	40:21	0:0	6	offscreen_context
stmts	40:40	44:8	5	
water	40:40	0:0	6	{
call	41:12	41:69	6	msg_Warn
arg	41:21	41:28	7	p_demux
water	41:21	0:0	8	p_demux
arg	41:30	41:69	7	"can't create offscreen bitmap context"
water	41:30	0:0	8	"can't create offscreen bitmap context"
water	41:70	0:0	6	;
call	42:12	42:27	6	CFRelease
arg	42:22	42:27	7	image
water	42:22	0:0	8	image
water	42:28	0:0	6	;
return	43:12	43:23	6	NULL
water	43:19	0:0	7	NULL
water	44:8	0:0	6	}
call	45:8	45:38	4	CGColorSpaceRelease
arg	45:28	45:38	5	colorspace
water	45:28	0:0	6	colorspace
water	45:39	0:0	4	;
water	46:8	0:0	4	p_data
op	46:14	0:0	4	->
water	46:16	0:0	4	offscreen_rect
op	46:31	0:0	4	=
call	46:33	46:101	4	CGRectMake
arg	46:44	46:45	5	0
water	46:44	0:0	6	0
arg	46:47	46:48	5	0
water	46:47	0:0	6	0
arg	46:50	46:74	5	p_sys->fmt.video.i_width
water	46:50	0:0	6	p_sys
op	46:55	0:0	6	->
water	46:57	0:0	6	fmt
op	46:60	0:0	6	.
water	46:61	0:0	6	video
op	46:66	0:0	6	.
water	46:67	0:0	6	i_width
arg	46:76	46:101	5	p_sys->fmt.video.i_height
water	46:76	0:0	6	p_sys
op	46:81	0:0	6	->
water	46:83	0:0	6	fmt
op	46:86	0:0	6	.
water	46:87	0:0	6	video
op	46:92	0:0	6	.
water	46:93	0:0	6	i_height
water	46:102	0:0	4	;
water	47:4	0:0	4	}
decl	49:4	49:27	2	CGImageRef	cursor_image
decl	50:4	50:35	2	int	cid
op	50:12	0:0	2	=
call	50:14	50:34	3	CGSMainConnectionID
decl	51:4	51:22	2	CGPoint	outHotSpot
water	52:4	0:0	2	cursor_image
op	52:17	0:0	2	=
call	52:19	52:114	2	CGSCreateRegisteredCursorImage
arg	52:50	52:53	3	cid
water	52:50	0:0	4	cid
arg	52:55	52:101	3	(char*)"com.apple.coregraphics.GlobalCurrent"
water	52:55	0:0	4	(
water	52:56	0:0	4	char
op	52:61	0:0	4	*
water	52:62	0:0	4	)
water	52:63	0:0	4	"com.apple.coregraphics.GlobalCurrent"
arg	52:103	52:114	3	&outHotSpot
op	52:103	0:0	4	&
water	52:104	0:0	4	outHotSpot
water	52:115	0:0	2	;
decl	54:4	54:22	2	CGRect	cursor_rect
water	55:4	0:0	2	cursor_rect
op	55:15	0:0	2	.
water	55:16	0:0	2	size
op	55:20	0:0	2	.
water	55:21	0:0	2	width
op	55:27	0:0	2	=
call	55:29	55:57	2	CGImageGetWidth
arg	55:45	55:57	3	cursor_image
water	55:45	0:0	4	cursor_image
water	55:58	0:0	2	;
water	56:4	0:0	2	cursor_rect
op	56:15	0:0	2	.
water	56:16	0:0	2	size
op	56:20	0:0	2	.
water	56:21	0:0	2	height
op	56:28	0:0	2	=
call	56:30	56:59	2	CGImageGetHeight
arg	56:47	56:59	3	cursor_image
water	56:47	0:0	4	cursor_image
water	56:60	0:0	2	;
water	57:4	0:0	2	cursor_rect
op	57:15	0:0	2	.
water	57:16	0:0	2	origin
op	57:22	0:0	2	.
water	57:23	0:0	2	x
op	57:25	0:0	2	=
water	57:27	0:0	2	cursor_pos
op	57:37	0:0	2	.
water	57:38	0:0	2	x
op	57:40	0:0	2	-
water	57:42	0:0	2	p_sys
op	57:47	0:0	2	->
water	57:49	0:0	2	i_left
op	57:56	0:0	2	-
water	57:58	0:0	2	outHotSpot
op	57:68	0:0	2	.
water	57:69	0:0	2	x
water	57:70	0:0	2	;
water	58:4	0:0	2	cursor_rect
op	58:15	0:0	2	.
water	58:16	0:0	2	origin
op	58:22	0:0	2	.
water	58:23	0:0	2	y
op	58:25	0:0	2	=
water	58:27	0:0	2	p_data
op	58:33	0:0	2	->
water	58:35	0:0	2	offscreen_rect
op	58:49	0:0	2	.
water	58:50	0:0	2	size
op	58:54	0:0	2	.
water	58:55	0:0	2	height
op	59:8	0:0	2	-
water	59:10	0:0	2	(
water	59:11	0:0	2	cursor_pos
op	59:21	0:0	2	.
water	59:22	0:0	2	y
op	59:24	0:0	2	+
water	59:26	0:0	2	cursor_rect
op	59:37	0:0	2	.
water	59:38	0:0	2	size
op	59:42	0:0	2	.
water	59:43	0:0	2	height
op	59:50	0:0	2	-
water	59:52	0:0	2	p_sys
op	59:57	0:0	2	->
water	59:59	0:0	2	i_top
op	59:65	0:0	2	-
water	59:67	0:0	2	outHotSpot
op	59:77	0:0	2	.
water	59:78	0:0	2	y
water	59:79	0:0	2	)
water	59:80	0:0	2	;
call	60:4	60:79	2	CGContextDrawImage
arg	60:23	60:48	3	p_data->offscreen_context
water	60:23	0:0	4	p_data
op	60:29	0:0	4	->
water	60:31	0:0	4	offscreen_context
arg	60:50	60:72	3	p_data->offscreen_rect
water	60:50	0:0	4	p_data
op	60:56	0:0	4	->
water	60:58	0:0	4	offscreen_rect
arg	60:74	60:79	3	image
water	60:74	0:0	4	image
water	60:80	0:0	2	;
call	61:4	61:75	2	CGContextDrawImage
arg	61:23	61:48	3	p_data->offscreen_context
water	61:23	0:0	4	p_data
op	61:29	0:0	4	->
water	61:31	0:0	4	offscreen_context
arg	61:50	61:61	3	cursor_rect
water	61:50	0:0	4	cursor_rect
arg	61:63	61:75	3	cursor_image
water	61:63	0:0	4	cursor_image
water	61:76	0:0	2	;
water	63:4	0:0	2	p_block
op	63:12	0:0	2	=
call	63:14	63:55	2	block_Alloc
arg	63:26	63:55	3	p_data->offscreen_bitmap_size
water	63:26	0:0	4	p_data
op	63:32	0:0	4	->
water	63:34	0:0	4	offscreen_bitmap_size
water	63:56	0:0	2	;
if	64:4	68:4	2	(! p_block)
cond	64:8	64:9	3	! p_block
op	64:8	0:0	4	!
water	64:9	0:0	4	p_block
stmts	64:18	68:4	3	
water	64:18	0:0	4	{
call	65:8	65:43	4	msg_Warn
arg	65:17	65:24	5	p_demux
water	65:17	0:0	6	p_demux
arg	65:26	65:43	5	"can't get block"
water	65:26	0:0	6	"can't get block"
water	65:44	0:0	4	;
call	66:8	66:23	4	CFRelease
arg	66:18	66:23	5	image
water	66:18	0:0	6	image
water	66:24	0:0	4	;
return	67:8	67:19	4	NULL
water	67:15	0:0	5	NULL
water	68:4	0:0	4	}
call	69:4	69:86	2	memmove
arg	69:12	69:29	3	p_block->p_buffer
water	69:12	0:0	4	p_block
op	69:19	0:0	4	->
water	69:21	0:0	4	p_buffer
arg	69:31	69:55	3	p_data->offscreen_bitmap
water	69:31	0:0	4	p_data
op	69:37	0:0	4	->
water	69:39	0:0	4	offscreen_bitmap
arg	69:57	69:86	3	p_data->offscreen_bitmap_size
water	69:57	0:0	4	p_data
op	69:63	0:0	4	->
water	69:65	0:0	4	offscreen_bitmap_size
water	69:87	0:0	2	;
call	70:4	70:19	2	CFRelease
arg	70:14	70:19	3	image
water	70:14	0:0	4	image
water	70:20	0:0	2	;
return	71:4	71:18	2	p_block
water	71:11	0:0	3	p_block
