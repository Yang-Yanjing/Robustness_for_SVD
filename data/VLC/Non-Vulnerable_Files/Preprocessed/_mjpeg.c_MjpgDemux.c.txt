func	2:0	50:0	0	static int	MjpgDemux
params	2:20	0:0	1	
param	2:22	2:39	2	demux_t *	p_demux
stmnts	0:0	49:34	1	
decl	4:4	4:39	2	demux_sys_t	*p_sys
op	4:23	0:0	2	=
water	4:25	0:0	2	p_demux
op	4:32	0:0	2	->
water	4:34	0:0	2	p_sys
decl	5:4	5:9	2	int	i
if	6:4	12:4	2	(p_sys -> b_still && p_sys -> i_still_end)
cond	6:8	6:33	3	p_sys -> b_still && p_sys -> i_still_end
water	6:8	0:0	4	p_sys
op	6:13	0:0	4	->
water	6:15	0:0	4	b_still
op	6:23	0:0	4	&&
water	6:26	0:0	4	p_sys
op	6:31	0:0	4	->
water	6:33	0:0	4	i_still_end
stmts	7:4	12:4	3	
water	7:4	0:0	4	{
call	9:8	9:34	4	mwait
arg	9:15	9:34	5	p_sys->i_still_end
water	9:15	0:0	6	p_sys
op	9:20	0:0	6	->
water	9:22	0:0	6	i_still_end
water	9:35	0:0	4	;
water	10:8	0:0	4	p_sys
op	10:13	0:0	4	->
water	10:15	0:0	4	i_still_end
op	10:27	0:0	4	=
water	10:29	0:0	4	0
water	10:30	0:0	4	;
return	11:8	11:16	4	1
water	11:15	0:0	5	1
water	12:4	0:0	4	}
if	13:4	17:4	2	(!Peek (p_demux ,true ))
cond	13:8	13:29	3	!Peek (p_demux ,true )
op	13:8	0:0	4	!
call	13:9	13:29	4	Peek
arg	13:15	13:22	5	p_demux
water	13:15	0:0	6	p_demux
arg	13:24	13:29	5	true
water	13:24	0:0	6	true
stmts	14:4	17:4	3	
water	14:4	0:0	4	{
call	15:8	15:46	4	msg_Warn
arg	15:18	15:25	5	p_demux
water	15:18	0:0	6	p_demux
arg	15:27	15:46	5	"cannot peek data"
water	15:27	0:0	6	"cannot peek data"
water	15:47	0:0	4	;
return	16:8	16:16	4	0
water	16:15	0:0	5	0
water	17:4	0:0	4	}
if	18:4	22:4	2	(p_sys -> i_data_peeked < 4)
cond	18:8	18:31	3	p_sys -> i_data_peeked < 4
water	18:8	0:0	4	p_sys
op	18:13	0:0	4	->
water	18:15	0:0	4	i_data_peeked
op	18:29	0:0	4	<
water	18:31	0:0	4	4
stmts	19:4	22:4	3	
water	19:4	0:0	4	{
call	20:8	20:43	4	msg_Warn
arg	20:18	20:25	5	p_demux
water	20:18	0:0	6	p_demux
arg	20:27	20:43	5	"data shortage"
water	20:27	0:0	6	"data shortage"
water	20:44	0:0	4	;
return	21:8	21:16	4	0
water	21:15	0:0	5	0
water	22:4	0:0	4	}
water	23:4	0:0	2	i
op	23:6	0:0	2	=
water	23:8	0:0	2	3
water	23:9	0:0	2	;
label	24:0	24:13	2	FIND_NEXT_EOI :
while	25:4	43:4	2	(! ( p_sys -> p_peek [ i - 1 ] == 0 xFF && p_sys -> p_peek [ i ] == 0 xD9 ))
cond	25:11	25:69	3	! ( p_sys -> p_peek [ i - 1 ] == 0 xFF && p_sys -> p_peek [ i ] == 0 xD9 )
op	25:11	0:0	4	!
water	25:12	0:0	4	(
water	25:14	0:0	4	p_sys
op	25:19	0:0	4	->
water	25:21	0:0	4	p_peek
op	25:27	0:0	4	[
water	25:28	0:0	4	i
op	25:29	0:0	4	-
water	25:30	0:0	4	1
op	25:31	0:0	4	]
op	25:33	0:0	4	==
water	25:36	0:0	4	0
water	25:37	0:0	4	xFF
op	25:41	0:0	4	&&
water	25:44	0:0	4	p_sys
op	25:49	0:0	4	->
water	25:51	0:0	4	p_peek
op	25:57	0:0	4	[
water	25:58	0:0	4	i
op	25:59	0:0	4	]
op	25:61	0:0	4	==
water	25:64	0:0	4	0
water	25:65	0:0	4	xD9
water	25:69	0:0	4	)
stmts	26:4	43:4	3	
water	26:4	0:0	4	{
if	27:8	31:8	4	(p_sys -> p_peek [ i - 1 ] == 0 xFF && p_sys -> p_peek [ i ] == 0 xD9)
cond	27:12	27:63	5	p_sys -> p_peek [ i - 1 ] == 0 xFF && p_sys -> p_peek [ i ] == 0 xD9
water	27:12	0:0	6	p_sys
op	27:17	0:0	6	->
water	27:19	0:0	6	p_peek
op	27:25	0:0	6	[
water	27:26	0:0	6	i
op	27:27	0:0	6	-
water	27:28	0:0	6	1
op	27:29	0:0	6	]
op	27:31	0:0	6	==
water	27:34	0:0	6	0
water	27:35	0:0	6	xFF
op	27:39	0:0	6	&&
water	27:42	0:0	6	p_sys
op	27:47	0:0	6	->
water	27:49	0:0	6	p_peek
op	27:55	0:0	6	[
water	27:56	0:0	6	i
op	27:57	0:0	6	]
op	27:59	0:0	6	==
water	27:62	0:0	6	0
water	27:63	0:0	6	xD9
stmts	28:8	31:8	5	
water	28:8	0:0	6	{
water	29:12	0:0	6	p_sys
op	29:17	0:0	6	->
water	29:19	0:0	6	i_level
op	29:26	0:0	6	++
water	29:28	0:0	6	;
call	30:12	30:67	6	msg_Dbg
arg	30:21	30:28	7	p_demux
water	30:21	0:0	8	p_demux
arg	30:30	30:63	7	"we found another JPEG SOI at %d"
water	30:30	0:0	8	"we found another JPEG SOI at %d"
arg	30:65	30:67	7	i
water	30:65	0:0	8	i
water	30:68	0:0	6	;
water	31:8	0:0	6	}
water	32:8	0:0	4	i
op	32:9	0:0	4	++
water	32:11	0:0	4	;
if	33:8	42:8	4	(i >= p_sys -> i_data_peeked)
cond	33:12	33:24	5	i >= p_sys -> i_data_peeked
water	33:12	0:0	6	i
op	33:14	0:0	6	>=
water	33:17	0:0	6	p_sys
op	33:22	0:0	6	->
water	33:24	0:0	6	i_data_peeked
stmts	34:8	42:8	5	
water	34:8	0:0	6	{
call	35:12	36:42	6	msg_Dbg
arg	35:21	35:28	7	p_demux
water	35:21	0:0	8	p_demux
arg	35:30	35:65	7	"did not find JPEG EOI in %d bytes"
water	35:30	0:0	8	"did not find JPEG EOI in %d bytes"
arg	36:21	36:42	7	p_sys->i_data_peeked
water	36:21	0:0	8	p_sys
op	36:26	0:0	8	->
water	36:28	0:0	8	i_data_peeked
water	36:43	0:0	6	;
if	37:12	41:12	6	(!Peek (p_demux ,false ))
cond	37:16	37:38	7	!Peek (p_demux ,false )
op	37:16	0:0	8	!
call	37:17	37:38	8	Peek
arg	37:23	37:30	9	p_demux
water	37:23	0:0	10	p_demux
arg	37:32	37:38	9	false
water	37:32	0:0	10	false
stmts	38:12	41:12	7	
water	38:12	0:0	8	{
call	39:16	39:77	8	msg_Warn
arg	39:26	39:33	9	p_demux
water	39:26	0:0	10	p_demux
arg	39:35	39:77	9	"no more data is available at the moment"
water	39:35	0:0	10	"no more data is available at the moment"
water	39:78	0:0	8	;
return	40:16	40:24	8	0
water	40:23	0:0	9	0
water	41:12	0:0	8	}
water	42:8	0:0	6	}
water	43:4	0:0	4	}
water	44:4	0:0	2	i
op	44:5	0:0	2	++
water	44:7	0:0	2	;
call	45:4	45:51	2	msg_Dbg
arg	45:13	45:20	3	p_demux
water	45:13	0:0	4	p_demux
arg	45:22	45:47	3	"JPEG EOI detected at %d"
water	45:22	0:0	4	"JPEG EOI detected at %d"
arg	45:49	45:51	3	i
water	45:49	0:0	4	i
water	45:52	0:0	2	;
water	46:4	0:0	2	p_sys
op	46:9	0:0	2	->
water	46:11	0:0	2	i_level
op	46:18	0:0	2	--
water	46:20	0:0	2	;
if	47:4	48:26	2	(p_sys -> i_level > 0)
cond	47:8	47:25	3	p_sys -> i_level > 0
water	47:8	0:0	4	p_sys
op	47:13	0:0	4	->
water	47:15	0:0	4	i_level
op	47:23	0:0	4	>
water	47:25	0:0	4	0
stmts	48:8	48:26	3	
goto	48:8	48:26	4	FIND_NEXT_EOI
water	48:13	0:0	5	FIND_NEXT_EOI
return	49:4	49:34	2	SendBlock(p_demux,i)
call	49:11	49:33	3	SendBlock
arg	49:22	49:29	4	p_demux
water	49:22	0:0	5	p_demux
arg	49:31	49:33	4	i
water	49:31	0:0	5	i
