func	2:0	31:0	0	static void	TsStoragePushCmd
params	2:28	0:0	1	
param	2:30	2:53	2	ts_storage_t *	p_storage
param	2:55	2:76	2	const ts_cmd_t *	p_cmd
param	2:78	2:91	2	bool	b_flush
stmnts	0:0	30:48	1	
decl	4:4	4:25	2	ts_cmd_t	cmd
op	4:17	0:0	2	=
op	4:19	0:0	2	*
water	4:20	0:0	2	p_cmd
call	5:4	5:49	2	assert
arg	5:12	5:49	3	!TsStorageIsFull(p_storage,p_cmd)
op	5:12	0:0	4	!
call	5:13	5:47	4	TsStorageIsFull
arg	5:30	5:39	5	p_storage
water	5:30	0:0	6	p_storage
arg	5:41	5:47	5	p_cmd
water	5:41	0:0	6	p_cmd
water	5:50	0:0	2	;
if	6:4	29:4	2	(cmd . i_type == C_SEND)
cond	6:8	6:22	3	cmd . i_type == C_SEND
water	6:8	0:0	4	cmd
op	6:11	0:0	4	.
water	6:12	0:0	4	i_type
op	6:19	0:0	4	==
water	6:22	0:0	4	C_SEND
stmts	7:4	29:4	3	
water	7:4	0:0	4	{
decl	8:8	8:45	4	block_t	*p_block
op	8:25	0:0	4	=
water	8:27	0:0	4	cmd
op	8:30	0:0	4	.
water	8:31	0:0	4	u
op	8:32	0:0	4	.
water	8:33	0:0	4	send
op	8:37	0:0	4	.
water	8:38	0:0	4	p_block
water	9:8	0:0	4	cmd
op	9:11	0:0	4	.
water	9:12	0:0	4	u
op	9:13	0:0	4	.
water	9:14	0:0	4	send
op	9:18	0:0	4	.
water	9:19	0:0	4	p_block
op	9:27	0:0	4	=
water	9:29	0:0	4	NULL
water	9:33	0:0	4	;
water	10:8	0:0	4	cmd
op	10:11	0:0	4	.
water	10:12	0:0	4	u
op	10:13	0:0	4	.
water	10:14	0:0	4	send
op	10:18	0:0	4	.
water	10:19	0:0	4	i_offset
op	10:28	0:0	4	=
call	10:30	10:56	4	ftell
arg	10:37	10:56	5	p_storage->p_filew
water	10:37	0:0	6	p_storage
op	10:46	0:0	6	->
water	10:48	0:0	6	p_filew
water	10:57	0:0	4	;
if	11:8	15:8	4	(fwrite (p_block ,sizeof ( * p_block ) ,1 ,p_storage -> p_filew ) != 1)
cond	11:12	11:74	5	fwrite (p_block ,sizeof ( * p_block ) ,1 ,p_storage -> p_filew ) != 1
call	11:12	11:69	6	fwrite
arg	11:20	11:27	7	p_block
water	11:20	0:0	8	p_block
arg	11:29	11:45	7	sizeof(*p_block)
op	11:29	0:0	8	sizeof
water	11:35	0:0	8	(
op	11:36	0:0	8	*
water	11:37	0:0	8	p_block
water	11:44	0:0	8	)
arg	11:47	11:48	7	1
water	11:47	0:0	8	1
arg	11:50	11:69	7	p_storage->p_filew
water	11:50	0:0	8	p_storage
op	11:59	0:0	8	->
water	11:61	0:0	8	p_filew
op	11:71	0:0	6	!=
water	11:74	0:0	6	1
stmts	12:8	15:8	5	
water	12:8	0:0	6	{
call	13:12	13:35	6	block_Release
arg	13:27	13:35	7	p_block
water	13:27	0:0	8	p_block
water	13:36	0:0	6	;
return	14:12	14:18	6	
water	15:8	0:0	6	}
water	16:8	0:0	4	p_storage
op	16:17	0:0	4	->
water	16:19	0:0	4	i_file_size
op	16:31	0:0	4	+=
op	16:34	0:0	4	sizeof
water	16:40	0:0	4	(
op	16:41	0:0	4	*
water	16:42	0:0	4	p_block
water	16:49	0:0	4	)
water	16:50	0:0	4	;
if	17:8	24:8	4	(p_block -> i_buffer > 0)
cond	17:12	17:32	5	p_block -> i_buffer > 0
water	17:12	0:0	6	p_block
op	17:19	0:0	6	->
water	17:21	0:0	6	i_buffer
op	17:30	0:0	6	>
water	17:32	0:0	6	0
stmts	18:8	24:8	5	
water	18:8	0:0	6	{
if	19:12	23:12	6	(fwrite (p_block -> p_buffer ,p_block -> i_buffer ,1 ,p_storage -> p_filew ) != 1)
cond	19:16	19:89	7	fwrite (p_block -> p_buffer ,p_block -> i_buffer ,1 ,p_storage -> p_filew ) != 1
call	19:16	19:84	8	fwrite
arg	19:24	19:41	9	p_block->p_buffer
water	19:24	0:0	10	p_block
op	19:31	0:0	10	->
water	19:33	0:0	10	p_buffer
arg	19:43	19:60	9	p_block->i_buffer
water	19:43	0:0	10	p_block
op	19:50	0:0	10	->
water	19:52	0:0	10	i_buffer
arg	19:62	19:63	9	1
water	19:62	0:0	10	1
arg	19:65	19:84	9	p_storage->p_filew
water	19:65	0:0	10	p_storage
op	19:74	0:0	10	->
water	19:76	0:0	10	p_filew
op	19:86	0:0	8	!=
water	19:89	0:0	8	1
stmts	20:12	23:12	7	
water	20:12	0:0	8	{
call	21:16	21:39	8	block_Release
arg	21:31	21:39	9	p_block
water	21:31	0:0	10	p_block
water	21:40	0:0	8	;
return	22:16	22:22	8	
water	23:12	0:0	8	}
water	24:8	0:0	6	}
water	25:8	0:0	4	p_storage
op	25:17	0:0	4	->
water	25:19	0:0	4	i_file_size
op	25:31	0:0	4	+=
water	25:34	0:0	4	p_block
op	25:41	0:0	4	->
water	25:43	0:0	4	i_buffer
water	25:51	0:0	4	;
call	26:8	26:31	4	block_Release
arg	26:23	26:31	5	p_block
water	26:23	0:0	6	p_block
water	26:32	0:0	4	;
if	27:8	28:40	4	(b_flush)
cond	27:12	27:12	5	b_flush
water	27:12	0:0	6	b_flush
stmts	28:12	28:40	5	
call	28:12	28:39	6	fflush
arg	28:20	28:39	7	p_storage->p_filew
water	28:20	0:0	8	p_storage
op	28:29	0:0	8	->
water	28:31	0:0	8	p_filew
water	28:40	0:0	6	;
water	29:4	0:0	4	}
water	30:4	0:0	2	p_storage
op	30:13	0:0	2	->
water	30:15	0:0	2	p_cmd
op	30:20	0:0	2	[
water	30:21	0:0	2	p_storage
op	30:30	0:0	2	->
water	30:32	0:0	2	i_cmd_w
op	30:39	0:0	2	++
op	30:41	0:0	2	]
op	30:43	0:0	2	=
water	30:45	0:0	2	cmd
water	30:48	0:0	2	;
